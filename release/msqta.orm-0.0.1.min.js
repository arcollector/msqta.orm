(function(e){var t="MSQTA-ORM!",n="transaction",r="continue",i="result",s="__msqta__",o="databases",u="name",a="dump",f="onsuccess",l="onerror",c="onupgradeneeded",h="executeSql",p=" __currents_ids__ ",d=d||{};d._a3=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,d._a4=e.IDBTransaction||e.webkitIDBTransaction||e.msIDBTransaction,d._a4&&(!d._a4.READ_WRITE||!d._a4.READ_ONLY)&&(d._a4={READ_WRITE:"readwrite",READ_ONLY:"readonly"}),d._a5=e.IDBKeyRange||e.webkitIDBKeyRange||e.msIDBKeyRange,d._Messages={"app is working":"The application is currently manipulating your local database, please wait a moment, leaving the application right now will cause that your database may get broken!"},d._tt={a:function(){},b:function(){},mm:function(){e.addEventListener("beforeunload",this.oo,!1)},nn:function(){e.removeEventListener("beforeunload",this.oo,!1)},oo:function(e){return e.returnValue=d._Messages["app is working"],d._Messages["app is working"]},ww:2097152,c:function(e){return e==="object"||e==="array"?this.d:e==="datetime"||e==="date"||e==="time"?this.e:e==="boolean"?this.f:this.g},d:function(e){return JSON.parse(e)},e:function(e){return new Date(e)},f:function(e){return!!e},g:function(e){return e},a2:["batch","destroy"],a1:["del","destroy","empty","get","getAll","getWithLike","getByCallback","getByIndex","getByIndexWithRange","put","set"],h:function(e){var t=this.a1,n=this.a,r,i;for(r=0,i=t.length;r<i;r++)e[t[r]]=n},n:function(e){var t=this.a2,n=this.a1,r,i,s,o=this.a,u,a;for(u=0,a=t.length;u<a;u++)e[t[u]]=o;s=e._a7;for(r in s){i=s[r];for(u=0,a=n.length;u<a;u++)i[n[u]]=o}},o:function(t){t=t.toLowerCase();if(t==="websql"){if(e.openDatabase)return d._b4.c8}else if(t==="indexeddb"&&d._a3)return d._b4.c7;if(e.openDatabase)return d._b4.c8;if(d._a3)return d._b4.c7},p:function(n,r,i,s,o){var u={},a;if(!n)throw t;return typeof o[1]=="function"?(u.callback=o[1],u.context=o[2]||e):typeof o[1]=="object"&&(u=o[1]),d._c2.prototype=r,a=new d._c2(n,i,u),a._u=d._tt.s,a._t=d._tt.r,a._c6=s,a._f3(),a},r:function(e,n){var r=this._b6,i=this._b5,s=r[e];if(!s)throw t;return s.ff(n,s.ee)},xx:{string:"TEXT",integer:"INTEGER",object:"TEXT",array:"TEXT",date:"DATE",time:"TIME",datetime:"DATETIME","float":"REAL","boolean":"INTEGER"},yy:{string:"",integer:0,object:"{}",array:"[]",date:"0000-00-00",time:"00:00:00",datetime:"0000-00-00 00:00:00","float":0,"boolean":0},zz:{string:"","int":0,integer:0,text:"",object:{},array:[],date:-22090752e5,time:-22090752e5,datetime:-22090752e5,"float":0,"boolean":!1},s:function(e){var n=this._c6,r=d._tt.xx,i=n==="webSQL"?d._tt.yy:d._tt.zz,s=this._b5,o=this._b4._b5,u=this._b6[e],a,f=u.type,l=r[f],c=u.allowNull;if(!l)throw t;a=this._b6[e],a.ee=c?n==="webSQL"?null:null:i[f],a.ff=n==="webSQL"?d._tt.uu.v(f):d._tt.vv.v(f),a.hh=f==="date"||f==="time"||f==="datetime",n==="webSQL"&&(a.ii=f,a.jj=l+(c?" NULL":""),a.kk=f==="object"||f==="array",a.gg=d._tt.c(f))},ll:function(e){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(e)?new Date(e):!1},pp:function(e){var t;return e-=0,e?(t=new Date(e),isNaN(t-0)?!1:t):!1},qq:function(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)},rr:function(e){e.setFullYear(0),e.setDate(0),e.setMonth(0)},ss:function(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0)}},d._tt.uu={v:function(e){if(e==="string"||e==="text")return this.w;if(e==="int"||e==="integer"||e==="float")return this.x;if(e==="object"||e==="array")return this.bb;if(e==="date")return d._tt.vv.y;if(e==="time")return d._tt.vv.z;if(e==="datetime")return d._tt.vv.aa;if(e==="boolean")return this.cc},w:function(e,t){return e||t},x:function(e,t){return e-=0,e?e:t},bb:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object")return e?e:t;try{return JSON.stringify(e)}catch(n){return t}},cc:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?1:e==="false"||e==="0"?0:t):e===1?1:e===0?0:t},dd:function(e){return e}},d._tt.vv={v:function(e){if(e==="string"||e==="text")return this.w;if(e==="int"||e==="integer"||e==="float")return this.x;if(e==="object"||e==="array")return this.bb;if(e==="date")return this.y;if(e==="time")return this.z;if(e==="datetime")return this.aa;if(e==="boolean")return this.cc},w:function(e,t){return e?e+"":t},x:function(e,t){return e-=0,e?e:t},y:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:(d._tt.qq(e),d._tt.ss(e)):(r=d._tt.pp(e))?(d._tt.qq(r),d._tt.ss(r)):(r=d._tt.ll(e))?(d._tt.qq(r),d._tt.ss(r)):(n=/^(\d{4}-\d{2}-\d{2})/.exec(e),n?(n=n[1].split("-"),Date.UTC(n[0],n[1]-1,n[2],0,0,0,0)):t)},z:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:(d._tt.rr(e),d._tt.ss(e)):(r=d._tt.pp(e))?(d._tt.rr(r),d._tt.ss(r)):(r=d._tt.ll(e))?(d._tt.rr(r),d._tt.ss(r)):(n=/^(?:\d{4}-\d{2}-\d{2} )?(\d{2}):(\d{2})(?::(\d{2}))?$/.exec(e),n?Date.UTC(0,0,0,n[1],n[2],n[3]||0,0):t)},aa:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:(d._tt.rr(e),d._tt.ss(e)):(r=d._tt.pp(e))?d._tt.ss(r):(r=d._tt.ll(e))?d._tt.ss(r):(n=/^(\d{4})-(\d{2})-(\d{2})(?:\s(\d{2}):(\d{2})(?::(\d{2}))?)?$/.exec(e),n?Date.UTC(n[1],n[2]-1,n[3],n[4]||0,n[5]||0,n[6]||0,0):t)},bb:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object"){if(!e)return t;if(typeof e=="string")try{return JSON.parse(e)}catch(n){return t}return e}return e},cc:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?!0:e==="false"||e==="0"?!1:t):e===1?!0:e===0?!1:t},dd:function(e){return e}},d.ORM=function(n,r,i){typeof n=="string"&&(n={name:n});var o=n.name;if(!o)throw t;if(o===s)throw t;if(!/^[\w][-.\w\d]+$/i.test(o))throw t;return n.callback=n.callback||r||d._tt.b,n.context=n.context||i||e,d._b4.prototype=d._tt.o(n.prefered||""),new d._b4(n)},d._b4=function(e){var t=this._b5=e.name;this._a6=[],this._a7={},this._a8=[],this.Schema._b4=this,this._a9=!0,this._b1=[],this._b2=e.callback,this._b3=e.context,e.forceDestroy?this._e4(this._d7,this):this._d7()},d._c2=function(n,r,i){var s=n._b5,o=r.name;if(o==="__currents_ids__")throw t;if(!/^[\w][-\w\d]+$/i.test(o))throw t;if(n._a7[o]&&!i.forceDestroy)throw t;var u=r.fields;if(typeof u!="object"||!Object.keys(u).length)throw t;var a=r.primaryKey;if(!a||a&&!u[a])throw t;if(u[a].type!=="integer")throw t;u[a].allowNull=!0;var f,l,c=[],h=[];for(f in u){l=u[f];if(l.index){if(!/^(integer|float|string|date|time|datetime|boolean)$/.test(l.type))throw t;c.push(f),l.index=!0}else l.index=!1;l.unique?(c.indexOf(f)===-1&&(c.push(f),l.index=!0),h.push(f),l.unique=!0):l.unique=!1}n._a7[o]=this,this._b4=n,this._b5=o,this._b6=u,this._b7=c,this._b8=h,this._b9=a,this._c1=Object.keys(u),this._d5=i.forceDestroy,this._d6=this._d5?!1:i.forceEmpty,this._b2=i.callback||d._tt.b,this._b3=i.context||e},d._b4.c7={Schema:function(e){return d._tt.p(this.constructor._b4,d._c2.c7,e,"indexedDB",arguments)},_m8:{l7:function(e){var t=e.ORM,n=t._o6,r=n._b5;this.ORM=t,this.n6=0,this.n5=!1,this.n7=null,this.n8=null,this.m9=e.m9,this.n1=e.n1,this.n2=e.n2,this.n4=e.n4,e.n9?(this.o2=this.l5,this.o3=a,this.o4=this.l4,this.o1=r):(this.o2=this.l4,this.o3=r,this.o4=this.l5,this.o1=a),this.l6()},l5:function(){return this.ORM._m3()},l4:function(){return this.ORM._k8()},l6:function(){var e=this,t=e.ORM,r=e.o3,s=e.o2();s[f]=function(t){e.n8=this[i];var s=e.n8[n]([r],d._a4.READ_ONLY),o=s.objectStore(r),u=o.openCursor();u._n3=e,u[f]=e.l8},s[l]=t._k3},l8:function(e){var t=this._n3,n=t.n8,r=this[i];r?t.n5?(t.n5=!1,n.close(),t.l9(r.value)):t.n6===0?(t.n6++,n.close(),t.l9(r.value)):(t.n5=!0,r.advance(t.n6),t.n6++):(n.close(),t.m2())},l9:function(e){var t=this,r=t.ORM,s=t.o1,o=t.o4();o[f]=function(r){t.n7=this[i];var o=t.n7[n]([s],d._a4.READ_WRITE),u=o.objectStore(s),a=t.n4(u,e,t.n6);a._n3=t,a[f]=t.m1,a[l]=t.m1},o[l]=r._k3},m1:function(e){var t=this._n3;t.n7.close(),t.l6()},m2:function(){this.m9.call(this.n1,this.n2)}},_d7:function(){d._tt.mm();var e=this,t=this._b5,r=this._m3();r[c]=function(e){var t=this[i],n;n=t.createObjectStore(o,{keyPath:"id",autoIncrement:!0}),n.createIndex(u,u,{unique:!0}),t.createObjectStore(a)},r[f]=function(r){var s=this[i],a=s[n]([o],d._a4.READ_WRITE),l=a.objectStore(o);l.index(u).get(t)[f]=function(n){var r=this[i];if(!r)e._o7=0,l.add({name:t,branch:0,schemas:{}})[f]=function(t){s.close(),e._f3()};else{s.close();var o=r.branch;e._o7=o,e._f3()}}},r[l]=function(e){this._b2.call(this._b3,null)}},_f3:function(){d._tt.nn(),this._b2.call(this._b3,!0),this._e1()},_e4:function(t,r){var s=this,a=this._b5,c=d._a3.deleteDatabase(a);d._tt.mm(),c[f]=function(l){c=s._m3(),c[f]=function(l){var c=this[i],h=c[n]([o],d._a4.READ_WRITE),p=h.objectStore(o);p.index(u).get(a)[f]=function(n){var o=this[i];p.delete(o.id)[f]=function(n){c.close(),d._tt.n(s),d._tt.nn(),t.call(r||e,!0)}}}},c[l]=function(n){d._tt.nn(),t.call(r||e,!1)}},_d9:function(e){this._b1.push(e),this._a9||this._e1()},_e1:function(){var e=this,t=this._b5,r;this._b1.length?(d._tt.mm(),r=this._m3(),r[f]=function(r){var s=this[i],a=s[n]([o],d._a4.READ_WRITE),l=a.objectStore(o);l.index(u).get(t)[f]=function(t){var n=this[i];e._k1(s,l,n)}},r[l]=this._k3):this._e2()},_k1:function(e,t,n){var r=this,i=this._b5,s=this._b1.shift(),o=s._b5,u=n.schemas[o],a={fields:s._b6,primaryKey:s._b9};this._o6=s,u?s._d5?this._g2(this._g5):(e.close(),this._f7(u,a)?s._d6?this._g2(this._g5,this):this._f9():s._d6?this._g6():this._k5()):(this._k2(t,n),e.close(),this._f8())},_f7:function(e,t){var n=!1,r,i=e.fields,s=t.fields,o,u;for(r in i){o=i[r],u=s[r];if(!u||o.type!==u.type||o.index!==u.index||o.unique!==u.unique){n=!0;break}}var a=e.primaryKey,f=t.primaryKey;return!n&&(a&&(!f||a!==f)||!a&&f)&&(n=!0),n},_k2:function(e,t){var n=this._o6,r=n._b5,i=n._b9,s=n._c5;return t.schemas[r]={fields:s,primaryKey:i},req=e.put(t),req},_f8:function(){var e=this,t=this._o6,n=this._b5,r=t._b5,s=this._k7();s[c]=function(t){var n=this[i];e._k4(n)},s[f]=function(t){var n=this[i];n.close(),e._k6(e._k5,e)},s[l]=this._k3},_f9:function(){var e=this,t=this._m3();t[f]=function(t){var r=this[i],s=r[n]([a],d._a4.READ_WRITE),o=s.objectStore(a);o.clear()[f]=function(t){r.close(),e._g1()}},t[l]=this._k3},_g1:function(){var e=this,t=this._o6,n=t._b5,r=function(e,t,n){return e.add(t,n)};this._m8.l7({ORM:this,n9:!1,m9:this._g2,n1:this,n2:this._g3,n4:r})},_g2:function(e){var t=this,n=this._o6,r=n._b5,s=this._b5,o=this._k7();o[c]=function(e){var n=this[i];n.deleteObjectStore(r),t._k4(n)},o[f]=function(n){var r=this[i];r.close(),t._k6(e,t)},o[l]=this._k3},_g3:function(){var e=this,t=this._o6,n=t._b5,r=t._b6,i=function(e,t){var n,i;for(i in t)n=r[i],n?t[i]=n.ff(t[i],n.ee):delete t[i];return e.put(t)};this._m8.l7({ORM:this,n9:!0,m9:this._g4,n1:this,n4:i})},_g4:function(){var e=this,t=this._b5,r;r=this._m3(),r[f]=function(t){var r=this[i],s=r[n]([a],d._a4.READ_WRITE),o=s.objectStore(a);o.clear()[f]=function(t){r.close(),e._g5()}},r[l]=this._k3},_g5:function(){var e=this,t=this._b5,r=this._o6,s=r._b5,a;a=this._m3(),a[f]=function(r){var s=this[i],a=s[n]([o],d._a4.READ_WRITE),l=a.objectStore(o);l.index(u).get(t)[f]=function(t){var n=this[i],r;r=e._k2(l,n),r[f]=function(t){s.close(),e._g7()}}},a[l]=this._k3},_g6:function(){var e=this,t=this._b5,r=this._o6,s=r._b5,o;o=this._k8(),o[f]=function(t){var r=this[i],o=r[n]([s],d._a4.READ_WRITE),u=o.objectStore(s);u.clear()[f]=function(t){e._g7()}},o[l]=this._k3},_g7:function(){this._k5()},_k3:function(){this._k5(!1)},_k4:function(e){var t=this._o6,n=t._b6,r=t._b5,i=t._b9,s,o,u,a;a=e.createObjectStore(r,{keyPath:i,autoIncrement:!0});for(s in n)o=n[s],o.index&&(u=o.unique,a.createIndex(s,s,u?{unique:!0}:{}))},_k5:function(e){var t=this._o6,n=t._b2,r=t._b3;n.call(r,typeof e=="undefined"?!0:e),delete t._b2,delete t._b3,delete t._d5,delete t._d6,delete this._o6,d._tt.nn(),this._e1()},_e2:function(){this._a9=!1},_k6:function(t,r){var s=this,a=this._b5,l=this._o7,c;c=this._m3(),c[f]=function(s){var c=this[i],h=c[n]([o],d._a4.READ_WRITE),p=h.objectStore(o);p.index(u).get(a)[f]=function(n){var s=this[i];s.branch=l,p.put(s),c.close(),t&&t.call(r||e)}}},_k7:function(){var e=this._b5,t=this._o7+1;return this._o7=t,d._a3.open(e,t)},_k8:function(){var e=this._b5,t=this._o7;return d._a3.open(e,t)},_m3:function(){return d._a3.open(s,1)},_k9:function(t){t.d3||(t.d3=d._tt.b),t.d4||(t.d4=e),this._a6.push(t);if(this._c4)return;this._c4=!0,d._tt.mm(),this._l1()},_l1:function(){var e=this._a6.shift();e.type==="destroy"?this._h1(e):this._m4(e,this._exec2,this)},_exec2:function(e){var t=e.schema,n=e.type;this["_"+n](e)},_m4:function(e,t,r){var s=e.schema,o=this._k8();o[f]=function(o){var u=this[i],a=u[n]([s],d._a4[e.p3?"READ_ONLY":"READ_WRITE"]),f=a.objectStore(s);e.p1=f,e.p2=u,t.call(r,e)}},_f1:function(){this._c4=!1,this._a6.length&&this._l1()},_l2:function(e,t,n){d._tt.nn(),e.p2.close(),e.d3.call(e.d4,t,n),this._f1()},_put:function(e){var t=this,n=e.p1,r=e.data,s=0,o=[],u=r.length,a=function(n){n&&o.push(n),s===u?t._l2(e,n,o):(h(),s++)},c=function(){t._l2(e,!1)},h=function(){var e=r[s],t=n.add(e);t[f]=function(e){a(this[i])},t[l]=function(e){c()}};a()},_set:function(e){var t=this,n=e.p1,s=e.data,o=e.o9,u=e.primaryKey,a=0,c=0,h=s.length,p=function(){c===h?t._l2(e,a):(v(),c++)},d=function(){t._l2(e,!1)},v=function(){var e=s[c],t=e.data,o=e.target,h=o[u],v,m=Object.keys(o).length;h?n.get(h)[f]=function(e){var r=this[i],s;if(r){for(v in t)r[v]=t[v];s=n.put(r),s[f]=function(e){this[i]&&a++,p()},s[l]=function(e){d()}}else p()}:n.openCursor()[f]=function(e){var n=this[i];if(n){var s=n.value,u=0,c;for(v in o)s[v]===o[v]&&u++;if(u===m){for(v in t)s[v]=t[v];c=n.update(s),c[f]=function(e){this[i]&&a++,n[r]()},c[l]=function(e){d()}}else n[r]()}else p()}};p()},_del:function(e){var t=this,n=e.p1;n.count()[f]=function(n){e.o8=this[i],t._m5(e)}},_m5:function(e){var t=this,n=e.data,r=e.primaryKey,i=e.p1,s=0,o=n.length,u=function(){s===o?t._m6(e):(a(),s++)},a=function(){var e=n[s];i.delete(e[r])[f]=function(e){u()}};u()},_m6:function(e){var t=this,n=e.p1;n.count()[f]=function(n){t._l2(e,e.o8-this[i])}},_empty:function(e){var t=this,n,r=e.p1;r.count()[f]=function(s){n=this[i],r.clear()[f]=function(r){t._l2(e,n)}}},_h1:function(e){var t=this,n=e.schema,r=this._k7();r[c]=function(e){var t=this[i];t.deleteObjectStore(n)},r[f]=function(n){var r=this[i];r.close(),t._l3(e)}},_l3:function(e){var t=this,r=this._b5,s=e.schema,a=this._a7[s],l=this._m3();l[f]=function(l){var c=this[i],h=c[n]([o],d._a4.READ_WRITE),p=h.objectStore(o);p.index(u).get(r)[f]=function(n){var r=this[i];delete r.schemas[s],p.put(r)[f]=function(n){t._k6(function(){e.p2=c,delete t._a7[s],d._tt.h(a),this._l2(e,!0)},t)}}}},_getAll:function(e){var t=this,n=e.schema,s=e.d2,o=e.p9,u=e.p7,a=e.p1,l=[];a.openCursor()[f]=function(a){var f=this[i],c;f?(c=f.value,s(c,o,u)&&(t._m7(n,c),l.push(c)),f[r]()):t._l2(e,l)}},_getWithRange:function(e){var t=this,n=e.schema,s=e.p4,o=e.p5,u=e.p6,a=e.p1,l=[],c=function(s){var o=this[i],u;o?(u=o.value,t._m7(n,u),l.push(u),o[r]()):t._l2(e,l)};s?a.openCursor(u)[f]=c:a.index(o).openCursor(u)[f]=c},_m7:function(e,t){var n=this._a7[e],r=n._b6,i;for(i in t)r[i].hh&&(t[i]=d._tt.e(t[i]))},batch:function(n,r,i){var s=this._b5,o;if(!Array.isArray(n)||!n.length)throw t;typeof r!="function"&&(r=d._tt.b),typeof i!="object"&&(i=e),o={data:n,d3:r,d4:i};if(this._c3){this._a8.push(o);return}this._c3=!0,this._f2(o)},_f2:function(n){var r=n.data,i=["set","put","del"],s=0,o=r.length,u,a,f,l;for(;s<o;s++){a=r[s],f=a.schema;if(!(f instanceof d._c2))throw t;l=a.type.toLowerCase();if(i.indexOf(l)===-1)throw t;u=f[l](a.data),u.d3=d._tt.b,u.d4=e,this._a6.push(u)}u=this._a6[this._a6.length-1],u.d3=n.d3,u.d4=n.d4,this._c3=!1,this._c4||this._f1()},destroy:function(e,t){this._e4(e||d._tt.a,t)}},d._c2.c7={_f3:function(){var e=this._b4,t=this._b6,n,r,i={};for(n in t)r=t[n],this._u(n),i[n]={type:r.type,index:r.index,unique:r.unique};this._c5=i,e._d9(this)},get:function(e,n,r){var i=this._b4,s=i._b5,o=this._b6,u,a={},f=this._b5,l;if(!e)throw t;for(u in o)a[u]=this._t(u,e);var c=function(e,t,n){for(var r in e)if(e[r]===n[r])return!0;return!1};l={type:"getAll",p3:!0,schema:f,d2:c,p7:a,d3:n,d4:r},i._k9(l)},getAll:function(e,t){var n=this._b4,r=n._b5,i=this._b5,s,o=function(){return!0};s={type:"getAll",p3:!0,schema:i,d2:o,d3:e,d4:t},n._k9(s)},getWithLike:function(e,n,r,i){var s=this._b4,o=s._b5,u=this._b6,a=this._b5,f,l,c,h,p,d;if(typeof n!="object")throw t;h=Object.keys(n)[0],p=n[h];if(!h||!p)throw t;h==="both"?p=new RegExp(p,"i"):h==="start"?p=new RegExp("^"+p,"i"):h==="end"&&(p=new RegExp(p+"$","i")),Array.isArray(e)||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw t}var v=function(e,t,n){var r,i=0,s=t.length;for(;i<s;i++){r=t[i];if(n.test(e[r]))return!0}return!1};d={type:"getAll",p3:!0,schema:a,d2:v,p7:p,p9:e,d3:r,d4:i},s._k9(d)},getByCallback:function(e,n,r){var i=this._b4,s=i._b5,o=this._b5,u;if(typeof e!="function")throw t;u={type:"getAll",p3:!0,schema:o,d2:e,d3:n,d4:r},i._k9(u)},getByIndex:function(e,n,r,i){var s=this._b4,o=s._b5,u=this._b5,a={},f=[],l,c,h,p,v,m;if(this._b9!==e&&this._b7.indexOf(e)===-1)throw t;this._b9===e?a.pk=e:a.index=e;if(!n)throw t;Array.isArray(n)||(n=[n]);if(n.length===1)m={type:"getWithRange",p3:!0,schema:u,p4:a.pk,p5:a.index,p6:d._a5.only(this._t(e,n[0])),d3:r,d4:i};else{for(p=0,v=n.length;p<v;p++)c=n[p],h=this._t(e,c),f.push(h);l=function(e,t,n){for(var r=0,i=t.length;r<i;r++)if(t[r]===e[n])return!0;return!1},m={type:"getAll",p3:!0,schema:u,d2:l,p7:a.pk||a.index,p9:f,d3:r,d4:i}}s._k9(m)},getByIndexWithRange:function(e,n,r,i){var s=this._b4,o=s._b5,u=this._b5,a=this._b6,f=/^(?:>|<|>=|<=|=)$/,l,c={},h={},p,v,m=a[e],g,y,b;if(this._b9!==e&&this._b7.indexOf(e)===-1)throw t;this._b9===e?c.pk=e:c.index=e;for(l in n){if(!f.test(l))throw t;g=n[l],y=this._t(e,g);if(!y&&y!==m.ee)throw t;h[l]=y}p=Object.keys(h).length;if(p===2)try{h[">"]&&h["<"]?v=d._a5.bound(h[">"],h["<"],!0,!0):h[">="]&&h["<="]?v=d._a5.bound(h[">="],h["<="]):h[">"]&&h["<="]?v=d._a5.bound(h[">"],h["<="],!0,!1):v=d._a5.bound(h[">="],h["<"],!1,!0)}catch(w){throw t}else p===1&&(h[">"]?v=d._a5.lowerBound(h[">"],!0):h[">="]?v=d._a5.lowerBound(h[">="]):h["<"]?v=d._a5.upperBound(h["<"],!0):h["<="]?v=d._a5.upperBound(h["<="]):v=d._a5.only(h["="]));if(!v)throw t;c.keyRange=v,b={type:"getWithRange",p3:!0,schema:u,p4:c.pk,p5:c.index,p6:v,d3:r,d4:i},s._k9(b)},put:function(e,t,n){var r=this._b4,i=r._b5,s=this._c1,o,u=this._b9,a=this._b5,f,l,c,h,p=s.length,d;!Array.isArray(e)&&typeof e=="object"&&(e=[e]);for(l=0,c=e.length;l<c;l++){f=e[l];for(h=0;h<p;h++)o=s[h],f[o]=this._t(o,f[o]);f[u]<=0&&delete f[u]}d={type:"put",schema:a,primaryKey:u,data:e,d3:t,d4:n};if(r._c3)return d;r._k9(d)},set:function(e,n,r){var i=this._b4,s=this._b5,o=this._b6,u=i._b5,a,f,l,c,h,p,d,v={},m={},g=[],y,b,w;if(!e||typeof e!="object")throw t;Array.isArray(e)||(e=[e]);for(y=0,b=e.length;y<b;y++){f=e[y];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw t;if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw t}else f.target=[];c=f.target;for(p in c){d=c[p],l=this._t(p,d);if(!l&&l!==o[p].ee)throw t;v[p]=l}h=f.data;for(p in h){d=h[p],l=this._t(p,d);if(!l&&l!==o[p].ee)throw t;m[p]=l}g.push({data:m,target:v}),m={},v={}}w={type:"set",schema:s,o9:this._b7,primaryKey:this._b9,data:g,d3:n,d4:r};if(i._c3)return w;i._k9(w)},del:function(e,n,r){var i=this._b4,s=i._b5,o=this._b9,u=this._b5,a,f,l,c=[],h,p,d;if(!o)throw t;if(!e)throw t;Array.isArray(e)||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this._t(o,a);if(!f)throw t;l={},l[o]=f,c.push(l)}d={type:"del",schema:u,primaryKey:o,data:c,d3:n,d4:r};if(i._c3)return d;i._k9(d)},destroy:function(e,t){var n=this._b4,r=n._b5,i=this._b5;n._k9({type:"destroy",schema:i,d3:e,d4:t})},empty:function(e,t){var n=this._b4,r=n._b5,i=this._b5;n._k9({type:"empty",schema:i,d3:e,d4:t})}},d._b4.c8={Schema:function(e){return d._tt.p(this.constructor._b4,d._c2.c8,e,"webSQL",arguments)},_d7:function(){(function(t){d._tt.mm(),t._h5=e.openDatabase(s,1,"",d._tt.ww),t._h5[n](function(e){e[h]("CREATE TABLE IF NOT EXISTS databases( id INTEGER PRIMARY KEY, name TEXT UNIQUE, schemas TEXT )"),e[h]('SELECT * FROM databases WHERE name = "'+t._b5+'"',[],function(e,n){t._d8(n)})})})(this)},_d8:function(t){var r=t.rows;this._h6=r.length?JSON.parse(r.item(0).schemas):{},this._h7=[],this._h8=e.openDatabase(this._b5,1,"",d._tt.ww),function(e){e._h8[n](function(e){e[h]("CREATE TABLE IF NOT EXISTS __currents_ids__( id INTEGER PRIMARY KEY, table_name TEXT UNIQUE, last_id INTEGER )")},null,function(){d._tt.nn(),e._b2.call(e.initContext,!0),e._e1()})}(this)},_d9:function(e){this._b1.push(e),this._a9||(this._a9=!0,this._e1())},_e1:function(){var e=this,t,n=this._b5;this._b1.length?(d._tt.mm(),t=this._b1.shift(),t._f4()):(d._tt.nn(),this._e2())},_e2:function(){this._a9=!1},_e3:function(e,t,r){var i=this,s=this._b5,o=this._h6;this._h5[n](function(e){e[h]('REPLACE INTO databases( name, schemas ) VALUES( "'+s+'", '+"'"+JSON.stringify(o)+"'"+")")},null,function(){e.call(t,r)})},_e4:function(e,t){this.destroy(e,t)},_e5:function(e,t){var r=this,i=e._b5;delete this._a7[i],delete this._h6[i],d._tt.h(e),this._h8[n](function(e){e[h]("DELETE FROM"+p+'WHERE table_name = "'+i+'"')},null,function(){r._e3(t.d3,t.d4,!0)})},_e6:function(e){},_e7:function(t){var n=t.d3,r=t.d4;n||(t.d3=d._tt.b),r||(t.d4=e);if(this._c4){t.j4?this._h7.push(t):this._a6.push(t);return}this._c4=!0,d._tt.mm(),this._e8(t)},_e8:function(e){this._h9=e;var t=this,r=0,i=[],s=e.i1;Array.isArray(s)||(s=[s]);var o=e.i3?function(e,t){r+=t.rowsAffected}:e.i5?function(e,t){i.push(t.insertId)}:d._tt.a,u=function(n,s){e.i3?e.returnValue=s.rowsAffected+r:e.i5?(e.returnValue=s.insertId,i.length||i.push(s.insertId),e.j9=i):e.i4&&(e.returnValue=s.rowsAffected),t._e9(s)},a=function(e){t._e6(e),t._e9(!1)};this._h8[n](function(t){var n,r=s.length;while(r--)n=s.shift(),t[h](n,e.i2?e.i2.shift():[],r?o:u)},a)},_e9:function(e){var t=this._h9;this._c4=!1,e||(t.returnValue=!1),t.j5?t.j5.call(t.j6,e,t):t.d3.call(t.d4,t.returnValue,t.j9),this._f1()},_f1:function(){d._tt.nn(),this._c4||(this._h7.length?this._e7(this._h7.shift()):this._a6.length&&!this._a9&&this._e7(this._a6.shift()))},batch:function(n,r,i){var s=this._b5,o;if(!Array.isArray(n)||!n.length)throw t;r||(r=d._tt.b),i||(i=e),o={data:n,callback:r,context:i};if(this._c3){this._a8.push(o);return}this._c3=!0,this._f2(o)},_f2:function(e){var n=e.data,r=["set","put","del"],i,s,o,u=0,a=n.length;for(;u<a;u++){i=n[u],s=i.schema;if(!(s instanceof d._c2))throw t;o=i.type.toLowerCase();if(r.indexOf(o)===-1)throw t;this._a6.push(s[o](i.data))}var f=this._a6[this._a6.length-1];f.d3=e.callback,f.d4=e.context,this._c3=!1,this._f1(),this._a8.length&&this._f2(this._a8.shift())},destroy:function(t,n){(t||d._tt.a).call(n||e,!1)}},d._c2.c8={_f3:function(){var e=this._b6,t,n,r=this._b4,i=r._b5,s=this._b5,o=[],u=this._b9,a,f={},l,c,h={};for(n in e)t=e[n],a=[],u===n?a.push("PRIMARY KEY"):(l=t.index,c=t.unique,l&&c?f[n]=!0:l&&(f[n]=!1)),this._u(n),h[n]={type:t.type,index:t.index,unique:t.unique},o.push(n+" "+e[n].jj+(a.length?" "+a.join(" "):""));this._i6='CREATE TABLE "'+s+'" ( '+o.join(", ")+" )",this._c5=h,this._j8=f,this._i8=[],r._d9(this)},_f4:function(){var e=this._b4,t=e._b5,n=this._b5,r,i,s;this._d5?(r="DROP TABLE IF EXISTS "+n,e._e7({i1:r,j6:this,j5:this._f8,j4:!0})):(s={fields:this._c5,primaryKey:this._b9},i=e._h6[n],i?this._f7(i,s):(e._h6[n]=s,this._b4._e3(this._f8,this)))},_f5:function(e,t,n){return"CREATE UNIQUE INDEX "+this._h4(e,t)+" ON "+(n||e)+" ( "+t+" )"},_f6:function(e,t,n){return"CREATE INDEX "+this._h4(e,t)+" ON "+(n||e)+" ( "+t+" )"},_h4:function(e,t){return e+"_"+t},_f7:function(e,t){var n=this._b4,r=n._b5,i=this._b5,s=!1,o=e.fields,u=t.fields,a,f,l;for(l in o){a=o[l],f=u[l];if(!f||a.type!==f.type||a.unique!==f.unique){s=!0;break}}var c=e.primaryKey,h=t.primaryKey;!s&&(c&&(!h||c!==h)||!c&&h)&&(s=!0);if(s)n._h6[i]=t,this._b4._e3(this._f9,this);else{var p=[],d=this._b7,v=this._j8;for(l in o)a=o[l],a.index&&(d.indexOf(l)===-1?p.push(l):delete v[l]);p.length||Object.keys(v).length?(this._i8=p,n._h6[i]=t,this._b4._e3(this._h3,this)):this._d6?this._h2():this._g7()}},_f8:function(){var e=this._b4,t=this._b5,n=e._b5,r=this._b9,i,s;i="CREATE TRIGGER IF NOT EXISTS update_last_id_on_"+t+" AFTER INSERT ON "+t+" BEGIN "+" UPDATE"+p+"SET last_id = ( "+" SELECT CASE "+" WHEN ( SELECT 1 WHERE NEW.rowid >= ( SELECT last_id FROM"+p+'WHERE table_name = "'+t+'" ) )'+" THEN NEW.rowid "+" WHEN ( SELECT 1 WHERE NEW.rowid < ( SELECT last_id FROM"+p+'WHERE table_name = "'+t+'" ) )'+" THEN ( SELECT last_id - 1 FROM"+p+'WHERE table_name = "'+t+'" ) '+" ELSE "+" ( SELECT last_id FROM"+p+'WHERE table_name = "'+t+'" ) '+" END "+' ) + 1 WHERE table_name = "'+t+'" ; '+" END ",s="REPLACE INTO"+p+'VALUES( null, "'+t+'", 1 )',e._e7({i1:[this._i6,i,s],j6:this,j5:this._h3,j4:!0})},_f9:function(){var e=this._b4,t=this._i6,n=this._b5,r=n+ +(new Date),i=t.replace('CREATE TABLE "'+n+'"','CREATE TABLE "'+r+'"');this._i9=0,this._j1=r,e._e7({i1:i,j6:this,j5:this._g1,j4:!0})},_g1:function(){var e=this._b4,t=e._b5,n=this._b5,r=this._j1,i=[],s=this._j8,o;for(o in s)i.push("DROP INDEX IF EXISTS "+this._h4(n,o)),s[o]?i.push(this._f5(n,o,r)):i.push(this._f6(n,o,r));i.length?e._e7({i1:i,j6:this,j5:this._g2,j4:!0}):this._g2()},_g2:function(){var e=this._b4,t=this._b5,n=this._j1,r=this._i9,i;this._d6?(this._j7=!0,this._g7()):this._d5?this._g6():this._g3()},_g3:function(){var e=this._b4,t=this._b5,n=this._j1,r="SELECT * FROM "+t+" LIMIT "+this._i9+", 500";e._e7({i1:r,j6:this,j5:this._g4,j4:!0})},_g4:function(e){var t=this._b4,n=this._b6,r=this._b5,i=this._j1,s=e.rows,o,u,a,f=[],l,c=[],h=[],p=[],d=[],v,m,g,y;if(!s.length)this._g5();else{o=s.item(0);for(u in o)n[u]&&f.push(u);for(u in n)a=n[u],f.indexOf(u)===-1&&(f.push(u),h.push(a.ee),c.push("?"));for(m=0,g=s.length;m<g;m++){v=[],l=[],o=s.item(m);for(u in o)a=n[u],a&&(l.push("?"),a.kk?v.push(o[u]):v.push(a.ff(o[u],a.ee)));p.push("INSERT INTO "+i+" ( "+f.join(", ")+" ) VALUES ( "+l.concat(c).join(", ")+" )"),d.push(v.concat(h))}y={i1:p,i2:d,j6:this,j4:!0},g===500?(this._i9+=500,y.j5=this._g3):y.j5=this._g5,t._e7(y)}},_g5:function(){var e=this._b4,t=this._b5,n="DROP TABLE "+t,r=this._j1,i="ALTER TABLE "+r+" RENAME TO "+t;e._e7({i1:[n,i],j6:this,j5:this._g6,j4:!0})},_g6:function(){var e=this._b4;this._d6&&!this._j7?this._h2():this._g7()},_g7:function(){delete this._i6,delete this._j8,delete this._j7,delete this._j1,delete this._i9,delete this._i8,delete this._d5,delete this._d6,this._b2.call(this._b3,!0),delete this._b2,delete this._b3,this._b4._e1()},_h2:function(){var e=this._b4,t=e._b5,n=this._b5,r="DELETE FROM "+n;e._e7({i1:[r],j6:this,j5:this._g7,j4:!0})},_h3:function(){var e=this._b4,t=this._b5,n=[],r=this._i8,i=this._j8,s;while(r.length)n.push("DROP INDEX "+this._h4(t,r.shift()));for(s in i)i[s]?n.push(this._f5(t,s)):n.push(this._f6(t,s));n.length?e._e7({i1:n,j6:this,j5:this._g6,j4:!0}):this._g6()},get:function(e,n,r){var i=this._b4,s=this._b6,o,u=i._b5,a=this._b5,f,l=[],c=[];if(!e)throw t;for(o in s)l.push(o+" = ?"),c.push(this._t(o,e));f="SELECT * FROM "+a+" WHERE "+l.join(" OR "),i._e7({i1:f,i2:[c],j5:this._g9,j6:this,d3:n,d4:r})},getByCallback:function(e,n,r){var i=this._b4,s=this._b6,o,u=this._b5,a;if(typeof e!="function")throw t;a="SELECT * FROM "+u,i._e7({i1:a,j6:this,j5:this._g8,d3:n,d4:r,d2:e})},_g8:function(e,t){var n=this._b6,r=e.rows,i=0,s=r.length,o,u,a=t.d2,f,l=[];for(;i<s;i++){o=r.item(i),f={};for(u in o)f[u]=n[u].gg(o[u]);a(f)&&l.push(f)}t.d3.call(t.d4,l)},getByIndex:function(e,n,r,i){var s=this._b4,o=s._b5,u=this._b5,a,f=[],l=[],c,h,p,d;if(this._b9!==e&&this._b7.indexOf(e)===-1)throw t;if(!n)throw t;Array.isArray(n)||(n=[n]);for(p=0,d=n.length;p<d;p++)c=n[p],h=this._t(e,c),f.push(e+" = ?"),l.push(h);a="SELECT * FROM "+u+(f.length?" WHERE "+f.join(" OR "):""),s._e7({i1:a,i2:[l],j6:this,j5:this._g9,d3:r,d4:i})},getByIndexWithRange:function(e,n,r,i){var s=this._b4,o=s._b5,u=this._b5,a=this._b6,f=/^(?:>|<|>=|<=|=)$/,l,c=[],h,p,d=[],v;if(this._b9!==e&&this._b7.indexOf(e)===-1)throw t;for(l in n){if(!f.test(l))throw t;h=n[l],p=this._t(e,h);if(!p&&p!==a[e].ee)throw t;c.push(e+" "+l+" ?"),d.push(p)}if(!c.length)throw t;v="SELECT * FROM "+u+" WHERE "+c.join(" AND "),s._e7({i1:v,i2:[d],j6:this,j5:this._g9,d3:r,d4:i})},getAll:function(e,t){var n=this._b4,r=this._b5,i="SELECT * FROM "+r;n._e7({i1:i,j6:this,j5:this._g9,d3:e,d4:t})},getWithLike:function(e,n,r,i){var s=this._b4,o=s._b5,u=this._b6,a=this._b5,f,l,c,h,p,d=[],v,m=[];if(typeof n!="object")throw t;h=Object.keys(n)[0],p=n[h];if(!h||!p)throw t;h==="both"?p="%"+p+"%":h==="start"?p+="%":h==="end"&&(p="%"+p),Array.isArray(e)||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw t;m.push(c+" LIKE ?"),d.push(p)}v="SELECT * FROM "+a+" WHERE "+m.join(" OR "),s._e7({i1:v,i2:[d],j6:this,j5:this._g9,d3:r,d4:i})},_g9:function(e,t){var n=this._b6,r=e.rows,i=0,s=r.length,o,u,a,f=[];for(;i<s;i++){o=r.item(i),a={};for(u in o)a[u]=n[u].gg(o[u]);f.push(a)}t.d3.call(t.d4,f)},put:function(e,t,n){var r=this._b4,i=r._b5,s=this._c1,o,u,a=this._b5,f=this._b9,l,c=[],h,d,v=[],m,g,y,b,w=s.length,E;!Array.isArray(e)&&typeof e=="object"&&(e=[e]);for(g=0,y=e.length;g<y;g++){m=e[g],l=[],h=[],d=[];for(b=0;b<w;b++)o=s[b],l.push(o),u=this._t(o,m[o]),o===f&&(!u||u<=0)?d.push("( SELECT last_id FROM"+p+'WHERE table_name = "'+a+'" )'):(h.push(u),d.push("?"));c.push(h),v.push("INSERT OR ROLLBACK INTO "+a+" ( "+l.join(", ")+" ) "+"VALUES ( "+d.join(" , ")+" )")}E={i1:v,i2:c,d3:t,d4:n,i5:!0};if(r._c3)return E;r._e7(E)},set:function(e,n,r){var i=this._b4,s=this._b5,o=i._b5,u=this._b6,a,f,l,c,h,p,d,v,m,g=[],y,b=[],w,E,S;if(!e||typeof e!="object")throw t;Array.isArray(e)||(e=[e]);for(w=0,E=e.length;w<E;w++){f=e[w],y=[],m=[],v=[];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw t;if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw t}else f.target=[];h=f.data;for(p in h){d=h[p],l=this._t(p,d);if(!l&&l!==u[p].ee)throw t;m.push(p+" = ?"),y.push(l)}c=f.target;for(p in c){d=c[p],l=this._t(p,d);if(!l&&l!==u[p].ee)throw t;v.push(p+" = ?"),y.push(l)}b.push("UPDATE OR ROLLBACK "+s+" SET "+m.join(", ")+(v.length?" WHERE "+v.join(" AND "):"")),g.push(y)}S={i1:b,i2:g,i3:!0,d3:n,d4:r};if(i._c3)return S;i._e7(S)},del:function(e,n,r){var i=this._b4,s=i._b5,o=this._b9,u=this._b5,a,f,l,c=[],h,p,d;if(!o)throw t;if(!e)throw t;Array.isArray(e)||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this._t(o,a);if(!f)throw t;c.push(o+" = "+f)}l="DELETE FROM "+u+(c.length?" WHERE "+c.join(" OR "):""),d={i1:l,i4:!0,d3:n,d4:r};if(i._c3)return d;i._e7(d)},destroy:function(e,t){var n=this._b4,r=this._b5,i="DROP TABLE "+r;n._e7({j5:this._h1,j6:this,i1:i,d3:e,d4:t})},_h1:function(e,t){var n=this._b4;e&&n._e5(this,t)},empty:function(e,t){var n=this._b4,r=this._b5,i="DELETE FROM "+r;n._e7({i1:i,i4:!0,d3:e,d4:t})}},e.MSQTA=d})(window);