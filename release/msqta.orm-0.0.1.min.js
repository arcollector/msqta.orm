(function(e){var t="MSQTA-ORM!",n="__msqta__",r="databases",i="name",s="dump",o=o||{};o.rr=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,o.ss=e.IDBTransaction||e.webkitIDBTransaction||e.msIDBTransaction;if(!o.ss.READ_WRITE||!o.ss.READ_ONLY)o.ss.READ_WRITE="readwrite",o.ss.READ_ONLY="readonly";o.tt=e.IDBKeyRange||e.webkitIDBKeyRange||e.msIDBKeyRange,o.ii={a:function(){},b:function(){},ll:2097152,c:function(e){return e==="object"||e==="array"?this.d:e==="datetime"?this.h:e==="date"?this.e:e==="time"?this.g:e==="boolean"?this.i:this.j},d:function(e){return JSON.parse(e)},e:function(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2],0,0,0,0)},g:function(e){var t=new Date,n=e.split(":");return t.setHours(n[0]),t.setMinutes(n[1]),t.setSeconds(n[2]),t},h:function(e){var t=e.split(" "),n=t[0].split("-"),r=t[1].split(":");return new Date(n[0],n[1]-1,n[2],r[0],r[1],r[2],0)},i:function(e){return!!e},j:function(e){return e},qq:["batch","destroy"],pp:["del","destroy","empty","get","getAll","getWithLike","getByCallback","getByIndex","getByIndexWithRange","put","set"],k:function(e){var t=this.pp,n=this.a,r,i;for(r=0,i=t.length;r<i;r++)e[t[r]]=n},l:function(e){var t=this.qq,n=this.pp,r,i,s,o=this.a,u,a;for(u=0,a=t.length;u<a;u++)e[t[u]]=o;s=e.vv;for(r in s){i=s[r];for(u=0,a=n.length;u<a;u++)i[n[u]]=o}},m:function(t){t=t.toLowerCase();if(t==="websql"){if(e.openDatabase)return o.a2.b6}else if(t==="indexeddb"&&o.rr)return o.a2.b5;if(e.openDatabase)return o.a2.b6;if(o.rr)return o.a2.b5},n:function(n){var r=n.ORM,i=n.b7,s=n.implementation,u=n.schemaDefinition,a=n.b8,f={},l;if(!r)throw Error(t);return typeof a[1]=="function"?(f.callback=a[1],f.context=a[2]||e):typeof a[1]=="object"&&(f=a[1]),o.a9.prototype=i,l=new o.a9(r,u,f),l.r=o.ii.p,l.q=o.ii.o,l.b4=s,l.d7(),l},o:function(e,n){var r=this.a4,i=this.a3,s=r[e];if(!s)throw Error(t);return s.cc(n,s.bb)},mm:{string:"TEXT",integer:"INTEGER",object:"TEXT",array:"TEXT",date:"DATE",time:"TIME",datetime:"DATETIME","float":"REAL","boolean":"INTEGER"},nn:{string:"",integer:0,object:"{}",array:"[]",date:"0000-00-00",time:"00:00:00",datetime:"0000-00-00 00:00:00","float":0,"boolean":0},oo:{string:"","int":0,integer:0,text:"",object:{},array:[],date:new Date(0,0,0),time:new Date(0,0,0),datetime:new Date(0,0,0),"float":0,"boolean":!1},p:function(e){var n=this.b4,r=o.ii.mm,i=n==="webSQL"?o.ii.nn:o.ii.oo,s=this.a3,u=this.a2.a3,a=this.a4[e],f,l=a.type,c=r[l],h=a.allowNull;if(!c)throw Error(t);f=this.a4[e],f.bb=h?n==="webSQL"?null:null:i[l],f.cc=n==="webSQL"?o.ii.jj.s(l):o.ii.kk.s(l),f.dd=o.ii.c(l),f.ee=l==="date"||l==="time"||l==="datetime",n==="webSQL"&&(f.ff=l,f.gg=c+(h?" NULL":""),f.hh=l==="object"||l==="array")}},o.ii.jj={s:function(e){if(e==="string"||e==="text")return this.t;if(e==="int"||e==="integer"||e==="float")return this.u;if(e==="object"||e==="array")return this.y;if(e==="date")return this.v;if(e==="time")return this.w;if(e==="datetime")return this.x;if(e==="boolean")return this.z},t:function(e,t){return e||t},u:function(e,t){return e-=0,e?e:t},v:function(e,t){var n,r;return e instanceof Date&&+e>=0?(n=e.getMonth()+1,r=e.getDate(),e.getFullYear()+"-"+(n<10?"0"+n:n)+"-"+(r<10?"0"+r:r)):(n=/^(\d{4}-\d{2}-\d{2})(?: \d{2}:\d{2}(?::\d{2}))?$/.exec(e),n?n[1]:t)},w:function(e,t){if(e instanceof Date&&+e>=0)return e.toTimeString().substring(0,8);var n=/^(?:\d{4}-\d{2}-\d{2} )?(\d{2}:\d{2})(:\d{2})?$/.exec(e);return n?n[1]+(n[2]||":00"):t},x:function(e,t){var n,r;return e instanceof Date&&+e>=0?(n=e.getMonth()+1,r=e.getDate(),e.getFullYear()+"-"+(n<10?"0"+n:n)+"-"+(r<10?"0"+r:r)+" "+e.toTimeString().substring(0,8)):(n=/^(\d{4}-\d{2}-\d{2})(?: |T)(\d{2}:\d{2})(?:(:\d{2})[^Z]+Z|(:\d{2}))?$/.exec(e),n?n[1]+" "+n[2]+(n[3]||n[4]||":00"):t)},y:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object")return e?typeof e=="string"?"'"+e+"'":e:t;try{return JSON.stringify(e)}catch(n){return t}},z:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?1:e==="false"||e==="0"?0:t):e===1?1:e===0?0:t},aa:function(e){return e}},o.ii.kk={s:function(e){if(e==="string"||e==="text")return this.t;if(e==="int"||e==="integer"||e==="float")return this.u;if(e==="object"||e==="array")return this.y;if(e==="date")return this.v;if(e==="time")return this.w;if(e==="datetime")return this.x;if(e==="boolean")return this.z},t:function(e,t){return e?e+"":t},u:function(e,t){return e-=0,e?e:t},v:function(e,t){var n,r;return e instanceof Date&&!isNaN(e-0)?(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e):(n=/^(\d{4}-\d{2}-\d{2})(?: \d{2}:\d{2}(?::\d{2}))?$/.exec(e),n?(n=n[1].split("-"),new Date(n[0],n[1]-1,n[2],0,0,0,0)):t)},w:function(e,t){if(e instanceof Date&&!isNaN(e-0))return e;var n=/^(\d{4}-\d{2}-\d{2} )?(\d{2}:\d{2})(:\d{2})?$/.exec(e);if(!n)return t;var r,i,s;return n[1]?(r=n[1].split("-"),r[1]=r[1]-1):(r=new Date,r=[r.getFullYear(),r.getMonth(),r.getDate()]),i=n[2].split(":"),s=n[3]||0,new Date(r[0],r[1],r[2],i[0],i[1],s,0)},x:function(e,t){var n,r;if(e instanceof Date&&!isNaN(e-0))return e;n=/^(\d{4}-\d{2}-\d{2})(?: |T)(\d{2}:\d{2})(?::(\d{2})[^Z]+Z|:(\d{2}))?$/.exec(e);if(!n)return t;var i,s,o;return i=n[1].split("-"),s=n[2].split(":"),o=n[3]||n[4]||0,new Date(i[0],i[1]-1,i[2],s[0],s[1],o,0)},y:function(e,t){return typeof e=="undefined"?t:typeof e!="object"?e?typeof e=="string"?"'"+e+"'":e:t:e},z:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?!0:e==="false"||e==="0"?!1:t):e===1?!0:e===0?!1:t},aa:function(e){return e}},o.ORM=function(n,r,i){typeof n=="string"&&(n={name:n});if(!n.name)throw Error(t);return n.callback=typeof r=="function"?r:o.ii.b,n.context=i||e,o.a2.prototype=o.ii.m(n.prefered||""),new o.a2(n)},o.a2=function(e){var t=this.a3=e.name;this.forceDestroy=e.forceDestroy,this.uu=[],this.vv={},this.ww=[],this.Schema.a2=this,this.xx=!0,this.yy=[],this.zz=e.callback,this.a1=e.context,this.forceDestroy?this.c6(this.b9,this):this.b9()},o.a9=function(n,r,i){var s=n.a3,u=r.name;if(n.vv[u]&&!i.forceDestroy)throw Error(t);var a=r.fields;if(typeof a!="object"||!Object.keys(a).length)throw Error(t);var f=r.primaryKey;if(!f||f&&!a[f])throw Error(t);if(a[f].type!=="integer")throw Error(t);a[f].allowNull=!0;var l,c,h=[],p=[];for(l in a){c=a[l];if(c.index){if(!/^(integer|float|string|date|time|datetime)$/.test(c.type))throw Error(t);h.push(l)}else c.index=!1;c.unique?(h.indexOf(l)===-1&&h.push(l),p.push(l)):c.unique=!1}n.vv[u]=this,this.a2=n,this.a3=u,this.a4=a,this.a5=h,this.a6=p,this.a7=f,this.a8=Object.keys(a),this.forceDestroy=i.forceDestroy,this.forceEmpty=this.forceDestroy?!1:i.forceEmpty,this.zz=typeof i.callback=="function"?i.callback:o.ii.b,this.a1=i.context||e},o.a2.b5={Schema:function(e){return o.ii.n({ORM:this.constructor.a2,b7:o.a9.b5,schemaDefinition:e,implementation:"indexedDB",b8:arguments})},k9:{k2:function(e){var t=e.ORM,n=t.m7,r=n.a3;this.ORM=t,this.l7=0,this.l6=!1,this.l8=null,this.l9=null,this.l1=e.l1,this.l2=e.l2,this.l3=e.l3,this.l5=e.l5,e.m1?(this.m3=this.j9,this.m4=s,this.m5=this.j8,this.m2=r):(this.m3=this.j8,this.m4=r,this.m5=this.j9,this.m2=s),this.k1()},j9:function(){return this.ORM.k7()},j8:function(){return this.ORM.j1()},k1:function(){var e=this,t=e.ORM,n=e.m4,r=e.m3();r.onsuccess=function(t){e.l9=this.result;var r=e.l9.transaction([n],o.ss.READ_ONLY),i=r.objectStore(n),s=i.openCursor();s.l4=e,s.onsuccess=e.k3},r.onerror=t.i5},k3:function(e){var t=this.l4,n=t.l9,r=this.result;r?t.l6?(t.k4(r.value),t.l6=!1,n.close()):t.l7===0?(t.k4(r.value),t.l7++,n.close()):(r.advance(t.l7),t.l7++,t.l6=!0):(n.close(),t.k6())},k4:function(e){var t=this,n=t.ORM,r=t.m2,i=t.m5();i.onsuccess=function(n){t.l8=this.result;var i=t.l8.transaction([r],o.ss.READ_WRITE),s=i.objectStore(r),u=t.l5(s,e,t.l7);u.l4=t,u.onsuccess=t.k5,u.onerror=t.k5},i.onerror=n.i5},k5:function(e){var t=this.l4;t.l8.close(),t.k1()},k6:function(){this.l1.call(this.l2,this.l3)}},b9:function(){var e=this,t=this.a3,n=this.k7();n.onupgradeneeded=function(e){var t=this.result,n;n=t.createObjectStore(r,{keyPath:"id",autoIncrement:!0}),n.createIndex(i,i,{unique:!0}),t.createObjectStore(s)},n.onsuccess=function(n){var s=this.result,u=s.transaction([r],o.ss.READ_WRITE),a=u.objectStore(r);a.index(i).get(t).onsuccess=function(n){var r=this.result;if(!r)e.m8=0,a.add({name:t,branch:0,schemas:{}}).onsuccess=function(t){s.close(),e.d7()};else{s.close();var i=r.branch;e.m8=i,e.d7()}}},n.onerror=function(e){this.zz.call(this.a1,null)}},d7:function(){this.zz.call(this.a1,!0),this.c3()},c6:function(t,s){var u=this,a=this.a3,f=o.rr.deleteDatabase(a);f.onsuccess=function(l){f=o.rr.open(n),f.onsuccess=function(n){var f=this.result,l=f.transaction([r],o.ss.READ_WRITE),c=l.objectStore(r);c.index(i).get(a).onsuccess=function(n){var r=this.result;c.delete(r.id).onsuccess=function(n){f.close(),o.ii.l(u),t.call(s||e,!0)}}}},f.onerror=function(n){t.call(s||e,!1)}},c2:function(e){this.yy.push(e),this.xx||this.c3()},c3:function(){var e=this,t=this.a3,n;this.yy.length?(n=this.k7(),n.onsuccess=function(n){var s=this.result,u=s.transaction([r],o.ss.READ_WRITE),a=u.objectStore(r);a.index(i).get(t).onsuccess=function(t){var n=this.result;e.i3(s,a,n)}},n.onerror=this.i5):this.c4()},i3:function(e,t,n){var r=this,i=this.a3,s=this.yy.shift(),o=s.a3,u=n.schemas[o],a={fields:s.a4,primaryKey:s.a7};this.m7=s,u?s.forceDestroy?this.e6(this.e9):(e.close(),this.e2(u,a)?s.forceEmpty?this.e6(this.e9,this):this.e4():s.forceEmpty?this.f1():this.i7()):(this.i4(t,n),e.close(),this.e3())},e2:function(e,t){var n=!1,r=e.fields,i=t.fields,s,o;for(fieldName in r){s=r[fieldName],o=i[fieldName];if(!o||s.type!==o.type||s.index!==o.index||s.unique!==o.unique){n=!0;break}}var u=e.primaryKey,a=t.primaryKey;return!n&&(u&&(!a||u!==a)||!u&&a)&&(n=!0),n},i4:function(e,t){var n=this.m7,r=n.a3,i=n.a7,s=n.b3;return t.schemas[r]={fields:s,primaryKey:i},req=e.put(t),req},e3:function(){var e=this,t=this.m7,n=this.a3,r=t.a3,i=this.i9();i.onupgradeneeded=function(t){var n=this.result;e.i6(n)},i.onsuccess=function(t){var n=this.result;n.close(),e.i8(e.i7,e)},i.onerror=this.i5},e4:function(){var e=this,t=this.k7();t.onsuccess=function(t){var n=this.result,r=n.transaction([s],o.ss.READ_WRITE),i=r.objectStore(s);i.clear().onsuccess=function(t){n.close(),e.e5()}},t.onerror=this.i5},e5:function(){var e=this,t=this.m7,n=t.a3,r=function(e,t,n){return e.add(t,n)};this.k9.k2({ORM:this,m1:!1,l1:this.e6,l2:this,l3:this.e7,l5:r})},e6:function(e){var t=this,n=this.m7,r=n.a3,i=this.a3,s=this.i9();s.onupgradeneeded=function(e){var n=this.result;n.deleteObjectStore(r),t.i6(n)},s.onsuccess=function(n){var r=this.result;r.close(),t.i8(e,t)},s.onerror=this.i5},e7:function(){var e=this,t=this.m7,n=t.a3,r=t.a4,i=function(e,t){var n,i;for(i in t)n=r[i],n?t[i]=n.cc(t[i],n.bb):delete t[i];return e.put(t)};this.k9.k2({ORM:this,m1:!0,l1:this.e8,l2:this,l5:i})},e8:function(){var e=this,t=this.a3,n;n=this.k7(),n.onsuccess=function(t){var n=this.result,r=n.transaction([s],o.ss.READ_WRITE),i=r.objectStore(s);i.clear().onsuccess=function(t){n.close(),e.e9()}},n.onerror=this.i5},e9:function(){var e=this,t=this.a3,n=this.m7,s=n.a3,u;u=this.k7(),u.onsuccess=function(n){var s=this.result,u=s.transaction([r],o.ss.READ_WRITE),a=u.objectStore(r);a.index(i).get(t).onsuccess=function(t){var n=this.result,r;r=e.i4(a,n),r.onsuccess=function(t){s.close(),e.f2()}}},u.onerror=this.i5},f1:function(){var e=this,t=this.a3,n=this.m7,r=n.a3,i;i=this.j1(),i.onsuccess=function(t){var n=this.result,i=n.transaction([r],o.ss.READ_WRITE),s=i.objectStore(r);s.clear().onsuccess=function(t){e.f2()}},i.onerror=this.i5},f2:function(){this.i7()},i5:function(){this.i7(!1)},i6:function(e){var t=this.m7,n=t.a4,r=t.a3,i=t.a7,s,o,u,a;a=e.createObjectStore(r,{keyPath:i,autoIncrement:!0});for(s in n)o=n[s],o.index&&(u=o.unique,a.createIndex(s,s,u?{unique:!0}:{}))},i7:function(e){var t=this.m7,n=t.zz,r=t.a1;n.call(r,typeof e=="undefined"?!0:e),delete t.zz,delete t.a1,delete this.m7,this.c3()},c4:function(){this.xx=!1},i8:function(t,n){var s=this,u=this.a3,a=this.m8,f;f=this.k7(),f.onsuccess=function(s){var f=this.result,l=f.transaction([r],o.ss.READ_WRITE),c=l.objectStore(r);c.index(i).get(u).onsuccess=function(r){var i=this.result;i.branch=a,c.put(i),f.close(),t&&t.call(n||e)}}},i9:function(){var e=this.a3,t=this.m8+1;return this.m8=t,o.rr.open(e,t)},j1:function(){var e=this.a3,t=this.m8;return o.rr.open(e,t)},k7:function(){return o.rr.open(n,1)},j2:function(t){t.callback||(t.callback=o.ii.b),t.context||(t.context=e),this.uu.push(t);if(this.b2)return;this.b2=!0,this.j3()},j3:function(){var e=this.uu.shift();e.type==="destroy"?this.f5(e):this.k8(e,this._exec2,this)},_exec2:function(e){var t=e.schema,n=e.type;this["_"+n](e)},k8:function(e,t,n){var r=e.schema,i=this.j1();i.onsuccess=function(i){var s=this.result,u=e.type,a=s.transaction([r],o.ss.READ_WRITE);objectStore=a.objectStore(r),e.objectStore=objectStore,e.database=s,t.call(n,e)}},d3:function(){this.b2=!1,this.uu.length&&this.j3()},j4:function(e,t){e.database.close(),e.callback.call(e.context,t),this.d3()},_put:function(e){var t=this,n=e.objectStore,r=e.data,i=0,s=r.length,o=function(n){i===s?t.j4(e,n):(u(),i++)},u=function(){var u=r[i],a=n.add(u);a.onsuccess=function(e){o(this.result)},a.onerror=function(r){i!==s?(e.database.close(),t.k8(e,function(){n=e.objectStore,o(!1)},t)):o(!1)}};o()},_set:function(e){var t=this,n=e.objectStore,r=e.data,i=e.indexes,s=e.primaryKey,o=0,u=0,a=r.length,f=function(){u===a?t.j4(e,o):(l(),u++)},l=function(){var e=r[u],t=e.data,i=e.target,a=i[s],l,c=Object.keys(i).length;a?n.get(a).onsuccess=function(e){var r=this.result,i;if(r){for(l in t)r[l]=t[l];i=n.put(r),i.onsuccess=function(e){this.result&&o++,f()},i.onerror=function(e){f(!1)}}else f()}:n.openCursor().onsuccess=function(e){var n=this.result;if(n){var r=n.value,s=0,u;for(l in i)r[l]===i[l]&&s++;if(s===c){for(l in t)r[l]=t[l];u=n.update(r),u.onsuccess=function(e){this.result&&o++,n.continue()},u.onerror=function(e){n.continue()}}else n.continue()}else f()}};f()},_del:function(e){var t=this,n=e.objectStore,r=e.data,i=e.primaryKey,s=0,o=0,u=r.length,a=function(){o===u?t.j4(e,s):(f(),o++)},f=function(){var e=r[o];n.delete(e[i]).onsuccess=function(e){this.result&&s++,a()}};a()},_empty:function(e){var t=this,n,r=e.objectStore;r.count().onsuccess=function(i){n=this.result,r.clear().onsuccess=function(r){t.j4(e,n)}}},f5:function(e){var t=this,n=e.schema,r=this.i9();r.onupgradeneeded=function(e){var t=this.result;t.deleteObjectStore(n)},r.onsuccess=function(n){var r=this.result;r.close(),t.j5(e)}},j5:function(e){var t=this,n=this.a3,s=e.schema,u=this.vv[s],a=this.k7();a.onsuccess=function(a){var f=this.result,l=f.transaction([r],o.ss.READ_WRITE),c=l.objectStore(r);c.index(i).get(n).onsuccess=function(n){var r=this.result;delete r.schemas[s],c.put(r).onsuccess=function(n){t.i8(function(){e.database=f,delete t.vv[s],o.ii.k(u),this.j4(e,!0)},t)}}}},batch:function(n,r,i){var s=this.a3,u;if(!(n instanceof Array)||!n.length)throw Error(t);typeof r!="function"&&(r=o.ii.b),typeof i!="object"&&(i=e),u={data:n,callback:r,context:i};if(this.b1){this.ww.push(u);return}this.b1=!0,this.d4(u)},d4:function(n){var r=n.data,i=["set","put","del"],s=0,u=r.length,a,f,l,c;for(;s<u;s++){f=r[s],l=f.schema;if(!(l instanceof o.a9))throw Error(t);c=f.type.toLowerCase();if(i.indexOf(c)===-1)throw Error(t);a=l[c](f.data),a.callback=o.ii.b,a.context=e,this.uu.push(a)}a=this.uu[this.uu.length-1],a.callback=n.callback,a.context=n.context,this.b1=!1,this.b2||this.d3()},destroy:function(e,t){typeof e!="function"&&(e=o.ii.a),this.c6(e,t)}},o.a9.b5={d7:function(){var e=this.a2,t=this.a4,n,r,i={};for(n in t)r=t[n],this.r(n),i[n]={type:r.type,index:r.index,unique:r.unique};this.b3=i,e.c2(this)},get:function(e,n,r){var i=this.a2,s=i.a3,o=this.a4,u,a={},f=this.a3;if(!e)throw Error(t);for(u in o)a[u]=this.q(u,e);var l=function(e,t,n){for(var r in e)if(e[r]===n[r])return!0;return!1};this.j6({callback:l,comparator:a,fields:null},n,r)},getAll:function(e,t){var n=this.a2,r=n.a3,i=this.a3,s=function(){return!0};this.j6({callback:s,comparator:null,fields:null},e,t)},getWithLike:function(e,n,r,i){var s=this.a2,o=s.a3,u=this.a4,a=this.a3,f,l,c,h,p;if(typeof n!="object")throw Error(t);h=Object.keys(n)[0],p=n[h];if(!h||!p)throw Error(t);h==="both"?p=new RegExp(p,"i"):h==="start"?p=new RegExp("^"+p,"i"):h==="end"&&(p=new RegExp(p+"$","i")),e instanceof Array||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw Error(t)}var d=function(e,t,n){var r,i=0,s=t.length;for(;i<s;i++){r=t[i];if(n.test(e[r]))return!0}return!1};this.j6({callback:d,comparator:p,fields:e},r,i)},getByCallback:function(e,n,r){var i=this.a2,s=i.a3,o=this.a3;if(typeof e!="function")throw Error(t);this.j6({callback:e,comparator:null,fields:null},n,r)},j6:function(t,n,r){var i={filterData:t,callback:n||o.ii.b,context:r||e,self:this};(function(e){var t=e.self,n=t.a2,r=n.j1(),i,s=n.a3,u=t.a3,a=e.filterData,f=a.callback,l=a.comparator,c=a.fields,h=[];r.onsuccess=function(t){var n=this.result,r=n.transaction([u],o.ss.READ_ONLY);objectStore=r.objectStore(u),i=n,objectStore.openCursor().onsuccess=function(t){var n=this.result,r;n?(r=n.value,f(r,c,l)&&h.push(r),n.continue()):(i.close(),e.callback.call(e.context,h))}}})(i)},getByIndex:function(e,n,r,i){var s=this.a2,u=s.a3,a=this.a3,f={},l=[],c,h,p,d,v;if(this.a7!==e&&this.a5.indexOf(e)===-1)throw Error(t);this.a7===e?f.pk=e:f.index=e;if(!n)throw Error(t);n instanceof Array||(n=[n]);if(n.length===1)f.keyRange=o.tt.only(this.q(e,n[0])),this.j7(f,r,i);else{for(d=0,v=n.length;d<v;d++)h=n[d],p=this.q(e,h),l.push(p);c=function(e,t,n){for(var r=0,i=t.length;r<i;r++)if(t[r]===e[n])return!0;return!1},this.j6({callback:c,comparator:f.pk||f.index,fields:l},r,i)}},getByIndexWithRange:function(e,n,r,i){var s=this.a2,u=s.a3,a=this.a3,f=this.a4,l=/^(?:>|<|>=|<=|=)$/,c,h={},p={},d,v,m=f[e],g,y;if(this.a7!==e&&this.a5.indexOf(e)===-1)throw Error(t);this.a7===e?h.pk=e:h.index=e,g=n["="],g&&m.ee&&(n={">=":g,"<=":g});for(c in n){if(!l.test(c))throw Error(t);g=n[c],y=this.q(e,g);if(!y&&y!==m.bb)throw Error(t);p[c]=y}d=Object.keys(p).length;if(d===2)try{p[">"]&&p["<"]?v=o.tt.bound(p[">"],p["<"],!0,!0):p[">="]&&p["<="]?v=o.tt.bound(p[">="],p["<="]):p[">"]&&p["<="]?v=o.tt.bound(p[">"],p["<="],!0,!1):v=o.tt.bound(p[">="],p["<"],!1,!0)}catch(b){throw Error(t)}else d===1&&(p[">"]?v=o.tt.lowerBound(p[">"],!0):p[">="]?v=o.tt.lowerBound(p[">="]):p["<"]?v=o.tt.upperBound(p["<"],!0):p["<="]?v=o.tt.upperBound(p["<="]):v=o.tt.only(p["="]));if(!v)throw Error(t);h.keyRange=v,this.j7(h,r,i)},j7:function(t,n,r){var i={range:t,callback:n||o.ii.b,context:r||e,self:this};(function(e){var t=e.self,n=t.a2,r=e.range,i=r.pk,s=r.index,u=r.keyRange,a=n.j1(),f,l=n.a3,c=t.a3,h=[],p=function(t){var n=this.result;n?(h.push(n.value),n.continue()):(f.close(),e.callback.call(e.context,h))};a.onsuccess=function(e){var t=this.result,n=t.transaction([c],o.ss.READ_ONLY);objectStore=n.objectStore(c),f=t,i?objectStore.openCursor(u).onsuccess=p:objectStore.index(s).openCursor(u).onsuccess=p}})(i)},put:function(e,t,n){var r=this.a2,i=r.a3,s=this.a8,o,u=this.a7,a=this.a3,f,l,c,h,p=s.length,d;!(e instanceof Array)&&typeof e=="object"&&(e=[e]);for(l=0,c=e.length;l<c;l++){f=e[l];for(h=0;h<p;h++)o=s[h],f[o]=this.q(o,f[o]);f[u]<=0&&delete f[u]}d={type:"put",schema:a,primaryKey:u,data:e,callback:t,context:n};if(r.b1)return d;r.j2(d)},set:function(e,n,r){var i=this.a2,s=this.a3,o=this.a4,u=i.a3,a,f,l,c,h,p,d={},v={},m=[],g,y,b;if(!e||typeof e!="object")throw Error(t);e instanceof Array||(e=[e]);for(g=0,y=e.length;g<y;g++){f=e[g];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw Error(t);if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw Error(t)}else f.target=[];l=f.target;for(h in l){p=l[h],parsedValue=this.q(h,p);if(!parsedValue&&parsedValue!==o[h].bb)throw Error(t);d[h]=parsedValue}c=f.data;for(h in c){p=c[h],parsedValue=this.q(h,p);if(!parsedValue&&parsedValue!==o[h].bb)throw Error(t);v[h]=parsedValue}m.push({data:v,target:d}),v={},d={}}b={type:"set",schema:s,indexes:this.a5,primaryKey:this.a7,data:m,callback:n,context:r};if(i.b1)return b;i.j2(b)},del:function(e,n,r){var i=this.a2,s=i.a3,o=this.a7,u=this.a3,a,f,l,c=[],h,p,d;if(!o)throw Error(t);if(!e)throw Error(t);e instanceof Array||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this.q(o,a);if(!f)throw Error(t);l={},l[o]=f,c.push(l)}d={type:"del",schema:u,primaryKey:o,data:c,callback:n,context:r};if(i.b1)return d;i.j2(d)},destroy:function(e,t){var n=this.a2,r=n.a3,i=this.a3;n.j2({type:"destroy",schema:i,callback:e,context:t})},empty:function(e,t){var n=this.a2,r=n.a3,i=this.a3;n.j2({type:"empty",schema:i,callback:e,context:t})}},o.a2.b6={Schema:function(e){return o.ii.n({ORM:this.constructor.a2,b7:o.a9.b6,schemaDefinition:e,implementation:"webSQL",b8:arguments})},b9:function(){(function(t){t.f6=e.openDatabase(n,1,"",o.ii.ll),t.f6.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS databases( id INTEGER PRIMARY KEY, name TEXT UNIQUE, schemas TEXT )"),e.executeSql('SELECT * FROM databases WHERE name = "'+t.a3+'"',[],function(e,n){t.c1(n)})})})(this)},c1:function(t){var n=t.rows;this.f7=n.length?JSON.parse(n.item(0).schemas):{},this.f8=[],this.f9=[],this.g1=e.openDatabase(this.a3,1,"",o.ii.ll),this.zz.call(this.initContext,!0),this.c3()},c2:function(e){this.yy.push(e),this.xx||(this.xx=!0,this.c3())},c3:function(){var e=this,t=this.a3;this.yy.length?this.yy.shift().d8():this.c4()},c4:function(){this.xx=!1},c5:function(e,t,n){var r=this,i=this.a3,s=this.f7;this.f6.transaction(function(r){r.executeSql('REPLACE INTO databases( name, schemas ) VALUES( "'+i+'", '+"'"+JSON.stringify(s)+"'"+")",[],function(){e.call(t,n)})})},c6:function(e,t){this.destroy(e,t)},c7:function(e,t){var n=e.a3;delete this.vv[n],delete this.f7[n],o.ii.k(e),this.c5(t.g6,t.g7,!0)},c8:function(e){},c9:function(n){var r=n.g6,i=n.g7;if(r&&typeof r!="function")throw Error(t);r||(n.g6=o.ii.b);if(i&&typeof i!="object")throw Error(t);i||(n.g7=e);if(this.b2){n.h8?this.f9.push(n):this.uu.push(n);return}this.b2=!0,this.d1(n)},d1:function(e){this.g2=e;var t=this,n=0,r=e.g3;r instanceof Array||(r=[r]);var i=e.g5?function(e,t){n+=t.rowsAffected}:o.ii.a,s=function(r,i){e.g5?e.i2=i.rowsAffected+n:e.g9?e.i2=i.insertId:e.g8&&(e.i2=i.rowsAffected),t.d2(i)},u=function(e,n){t.c8(n)},a=function(e,n){t.c8(n),t.d2(!1)};this.g1.transaction(function(t){var n,o=r.length;while(o--)n=r.shift(),t.executeSql(n,e.g4?e.g4.shift():[],o?i:s,o?u:a)})},d2:function(e){queryData=this.g2,this.b2=!1,e||(queryData.i2=!1),queryData.h9?queryData.h9.call(queryData.i1,e,queryData):queryData.g6.call(queryData.g7,queryData.i2),this.d3()},d3:function(){this.b2||(this.f9.length?this.c9(this.f9.shift()):this.uu.length&&!this.xx&&this.c9(this.uu.shift()))},batch:function(n,r,i){var s=this.a3,u;if(!(n instanceof Array)||!n.length)throw Error(t);typeof r!="function"&&(r=o.ii.b),typeof i!="object"&&(i=e),u={data:n,callback:r,context:i};if(this.b1){this.ww.push(u);return}this.b1=!0,this.d4(u)},d4:function(e){var n=e.data,r=["set","put","del"],i,s,u,a=0,f=n.length;for(;a<f;a++){i=n[a],s=i.schema;if(!(s instanceof o.a9))throw Error(t);u=i.type.toLowerCase();if(r.indexOf(u)===-1)throw Error(t);this.uu.push(s[u](i.data))}var l=this.uu[this.uu.length-1];l.g6=e.callback,l.g7=e.context,this.b1=!1,this.d3(),this.ww.length&&this.d4(this.ww.shift())},destroy:function(t,n){typeof t!="function"&&(t=o.ii.a),t.call(n||e,!1)},d5:function(e){return this.f8.push(e),this.f8.length-0},d6:function(e){this.f8.splice(e,1)}},o.a9.b6={d7:function(){var e=this.a4,t,n,r=this.a2,i=r.a3,s=this.a3,o=[],u=this.a7,a,f={},l,c,h,p,d={};for(n in e)t=e[n],a=[],u===n?a.push("PRIMARY KEY"):(l=t.index,c=t.unique,l&&c?f[n]=this.d9(s,n):c?a.push("UNIQUE"):l&&(f[n]=this.e1(s,n))),this.r(n),d[n]={type:t.type,index:t.index,unique:t.unique},o.push(n+" "+e[n].gg+(a.length?" "+a.join(" "):""));h='CREATE TABLE "'+s+'" ( '+o.join(", ")+" )",this.h1=h,this.b3=d,this.h2=f,this.h3=[],r.c2(this)},d8:function(){var e=this.a2,t=e.a3,n=this.a3,r=this.h1,i,s,o;this.forceDestroy?(this.h7=!0,i="DROP TABLE IF EXISTS "+n,e.c9({g3:[i,r],i1:this,h9:this.e8,h8:!0})):(o={fields:this.b3,primaryKey:this.a7},s=e.f7[n],s?this.e2(s,o):(e.f7[n]=o,this.a2.c5(this.e3,this)))},d9:function(e,t){return"CREATE UNIQUE INDEX "+e+"_"+t+" ON "+e+" ( "+t+" )"},e1:function(e,t){return"CREATE INDEX "+e+"_"+t+" ON "+e+" ( "+t+" )"},e2:function(e,t){var n=this.a2,r=n.a3,i=this.a3,s=!1,o=e.fields,u=t.fields,a,f,l,c={},h=this.h2;for(l in o){a=o[l],f=u[l];if(!f||a.type!==f.type){s=!0;break}a.index&&a.unique?c[l]=this.d9(i,l):a.index&&(c[l]=this.e1(i,l))}var p=e.primaryKey,d=t.primaryKey;!s&&(p&&(!d||p!==d)||!p&&d)&&(s=!0);if(s)n.f7[i]=t,this.a2.c5(this.e4,this);else{var v,m,g=[];for(l in c)v=c[l],m=h[l],(!m||m&&v!==m)&&g.push(l);g.length?(this.h3=g,n.f7[i]=t,this.a2.c5(this.e8,this)):this.f1()}},e3:function(){var e=this.a2,t=this.a3,n=e.a3,r=this.h1;e.c9({g3:[r],i1:this,h9:this.e8,h8:!0})},e4:function(){var e=this.a2,t=this.h1,n=this.a3,r=n+ +(new Date),i=t.replace('CREATE TABLE "'+n+'"','CREATE TABLE "'+r+'"');this.h4=0,this.h5=r,e.c9({g3:[i],i1:this,h9:this.e5,h8:!0})},e5:function(){var e=this.a2,t=this.a3,n=this.h5,r=this.h4,i,s=this.a4;this.h6=e.d5("DROP TABLE "+n),i="SELECT * FROM "+t+" LIMIT "+r+", 500",e.c9({g3:[i],i1:this,h9:this.e6,h8:!0})},e6:function(e){var n=this.a2,r=this.a4,i=this.a3,s=this.h5,o=e.rows,u,a,f,l=[],c,h=[],p=[],d=[],v=[],m,g,y,b;if(!e)throw Error(t);if(!o.length){this.e7();return}u=o.item(0);for(a in u)r[a]&&l.push(a);for(a in r)f=r[a],l.indexOf(a)===-1&&(l.push(a),p.push(f.bb),h.push("?"));for(g=0,y=o.length;g<y;g++){m=[],c=[],u=o.item(g);for(a in u)f=r[a],f&&(c.push("?"),f.hh?m.push(u[a]):m.push(f.cc(u[a],f.bb)));d.push("INSERT INTO "+s+" ( "+l.join(", ")+" ) VALUES ( "+c.concat(h).join(", ")+" )"),v.push(m.concat(p))}b={g3:d,g4:v,i1:this,h8:!0},y===500?(this.h4+=500,b.h9=this.e5):b.h9=this.e7,n.c9(b)},e7:function(){var e=this.a2,t=this.a3,n="DROP TABLE "+t,r=this.h5,i="ALTER TABLE "+r+" RENAME TO "+t;this.h7=!0,e.c9({g3:[n,i],i1:this,h9:this.e8,h8:!0})},e8:function(){var e=this.a2,t=e.a3,n=[],r=this.h3,i,s=this.h2;if(!this.h7)while(r.length)n.push("DROP INDEX "+t+"_"+r.shift());else delete this.h7;for(i in s)n.push(s[i]);n.length?e.c9({g3:n,i1:this,h9:this.e9,h8:!0}):this.e9()},e9:function(){var e=this.a2;e.d6(this.h6),delete this.h5,delete this.h4,delete this.h6,delete this.h3,this.forceEmpty?this.f2():this.f1()},f1:function(){var e=this.a2;delete this.h1,delete this.h2,this.zz.call(this.a1,!0),delete this.zz,delete this.a1,e.c3()},f2:function(){var e=this.a2,t=e.a3,n=this.a3,r="DELETE FROM "+n;e.c9({g3:[r],i1:this,h9:this.f1,h8:!0})},get:function(e,n,r){var i=this.a2,s=this.a4,o,u=i.a3,a=this.a3,f,l=[],c=[];if(!e)throw Error(t);for(o in s)l.push(o+" = ?"),c.push(this.q(o,e));f="SELECT * FROM "+a+" WHERE "+l.join(" OR "),i.c9({g3:f,g4:[c],h9:this.f4,i1:this,g6:n,g7:r})},getByCallback:function(e,n,r){var i=this.a2,s=this.a4,o,u=this.a3,a;if(typeof e!="function")throw Error(t);a="SELECT * FROM "+u,i.c9({g3:a,i1:this,h9:this.f3,g6:n,g7:r,filterCallback:e})},f3:function(e,t){var n=this.a4,r=e.rows,i=0,s=r.length,o,u,a=t.filterCallback,f,l=[];for(;i<s;i++){o=r.item(i),f={};for(u in o)f[u]=n[u].dd(o[u]);a(f)&&l.push(f)}t.g6.call(t.g7,l)},getByIndex:function(e,n,r,i){var s=this.a2,o=s.a3,u=this.a3,a,f=[],l=[],c,h,p,d;if(this.a7!==e&&this.a5.indexOf(e)===-1)throw Error(t);if(!n)throw Error(t);n instanceof Array||(n=[n]);for(p=0,d=n.length;p<d;p++)c=n[p],h=this.q(e,c),f.push(e+" = ?"),l.push(h);a="SELECT * FROM "+u+(f.length?" WHERE "+f.join(" OR "):""),s.c9({g3:a,g4:[l],i1:this,h9:this.f4,g6:r,g7:i})},getByIndexWithRange:function(e,n,r,i){var s=this.a2,o=s.a3,u=this.a3,a=this.a4,f=/^(?:>|<|>=|<=|=)$/,l,c=[],h,p,d=[],v;if(this.a7!==e&&this.a5.indexOf(e)===-1)throw Error(t);for(l in n){if(!f.test(l))throw Error(t);h=n[l],p=this.q(e,h);if(!p&&p!==a[e].bb)throw Error(t);c.push(e+" "+l+" ?"),d.push(p)}if(!c.length)throw Error(t);v="SELECT * FROM "+u+" WHERE "+c.join(" AND "),s.c9({g3:v,g4:[d],i1:this,h9:this.f4,g6:r,g7:i})},getAll:function(e,t){var n=this.a2,r=this.a3,i="SELECT * FROM "+r;n.c9({g3:i,i1:this,h9:this.f4,g6:e,g7:t})},getWithLike:function(e,n,r,i){var s=this.a2,o=s.a3,u=this.a4,a=this.a3,f,l,c,h,p,d=[],v,m=[];if(typeof n!="object")throw Error(t);h=Object.keys(n)[0],p=n[h];if(!h||!p)throw Error(t);h==="both"?p="%"+p+"%":h==="start"?p+="%":h==="end"&&(p="%"+p),e instanceof Array||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw Error(t);m.push(c+" LIKE ?"),d.push(p)}v="SELECT * FROM "+a+" WHERE "+m.join(" OR "),s.c9({g3:v,g4:[d],i1:this,h9:this.f4,g6:r,g7:i})},f4:function(e,t){var n=this.a4,r=e.rows,i=0,s=r.length,o,u,a,f=[];for(;i<s;i++){o=r.item(i),a={};for(u in o)a[u]=n[u].dd(o[u]);f.push(a)}t.g6.call(t.g7,f)},put:function(e,t,n){var r=this.a2,i=r.a3,s=this.a8,o,u=this.a3,a,f=[],l,c,h=[],p,d,v,m,g=s.length,y;!(e instanceof Array)&&typeof e=="object"&&(e=[e]);for(d=0,v=e.length;d<v;d++){p=e[d],a=[],l=[],c=[];for(m=0;m<g;m++)o=s[m],a.push(o),l.push(this.q(o,p[o])),c.push("?");f.push(l),h.push("INSERT INTO "+u+" ( "+a.join(", ")+" ) "+"VALUES ( "+c.join(" , ")+" )")}y={g3:h,g4:f,g6:t,g7:n,g9:!0};if(r.b1)return y;r.c9(y)},set:function(e,n,r){var i=this.a2,s=this.a3,o=i.a3,u=this.a4,a,f,l,c,h,p,d,v,m=[],g,y=[],b,w,S;if(!e||typeof e!="object")throw Error(t);e instanceof Array||(e=[e]);for(b=0,w=e.length;b<w;b++){f=e[b],g=[],v=[],d=[];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw Error(t);if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw Error(t)}else f.target=[];c=f.data;for(h in c){p=c[h],parsedValue=this.q(h,p);if(!parsedValue&&parsedValue!==u[h].bb)throw Error(t);v.push(h+" = ?"),g.push(parsedValue)}l=f.target;for(h in l){p=l[h],parsedValue=this.q(h,p);if(!parsedValue&&parsedValue!==u[h].bb)throw Error(t);d.push(h+" = ?"),g.push(parsedValue)}y.push("UPDATE "+s+" SET "+v.join(", ")+(d.length?" WHERE "+d.join(" AND "):"")),m.push(g)}S={g3:y,g4:m,g5:!0,g6:n,g7:r};if(i.b1)return S;i.c9(S)},del:function(e,n,r){var i=this.a2,s=i.a3,o=this.a7,u=this.a3,a,f,l,c=[],h,p,d;if(!o)throw Error(t);if(!e)throw Error(t);e instanceof Array||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this.q(o,a);if(!f)throw Error(t);c.push(o+" = "+f)}l="DELETE FROM "+u+(c.length?" WHERE "+c.join(" OR "):""),d={g3:l,g8:!0,g6:n,g7:r};if(i.b1)return d;i.c9(d)},destroy:function(e,t){var n=this.a2,r=this.a3,i="DROP TABLE "+r;n.c9({h9:this.f5,i1:this,g3:i,g6:e,g7:t})},f5:function(e,t){var n=this.a2;e&&n.c7(this,t)},empty:function(e,t){var n=this.a2,r=this.a3,i="DELETE FROM "+r;n.c9({g3:i,g8:!0,g6:e,g7:t})}},e.MSQTA=o})(window)