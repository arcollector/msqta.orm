(function(e){var t="MSQTA-ORM!",n="transaction",r="continue",i="result",s="__msqta__",o="databases",u="name",a="dump",f="onsuccess",l="onerror",c="onupgradeneeded",h="executeSql",p=" __currents_ids__ ",d=d||{};d._a8=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,d._a9=e.IDBTransaction||e.webkitIDBTransaction||e.msIDBTransaction,d._a9&&(!d._a9.READ_WRITE||!d._a9.READ_ONLY)&&(d._a9={READ_WRITE:"readwrite",READ_ONLY:"readonly"}),d._b1=e.IDBKeyRange||e.webkitIDBKeyRange||e.msIDBKeyRange,d._Messages={"app is working":"The application is currently manipulating your local database, please wait a moment, leaving the application right now will cause that your database may get broken!"},d._yy={a:function(){},b:function(){},pp:function(){e.addEventListener("beforeunload",this.rr,!1)},qq:function(){e.removeEventListener("beforeunload",this.rr,!1)},rr:function(e){return e.returnValue=d._Messages["app is working"],d._Messages["app is working"]},a2:2097152,c:function(e){return e==="object"||e==="array"?this.d:e==="datetime"?this.h:e==="date"?this.e:e==="time"?this.g:e==="boolean"?this.n:this.o},d:function(e){return JSON.parse(e)},e:function(e){var t;return t=e.split("-"),new Date(t[0],t[1]-1,t[2],0,0,0,0)},g:function(e){var t,n;return t=new Date,n=e.split(":"),t.setHours(n[0]),t.setMinutes(n[1]),t.setSeconds(n[2]),t},h:function(e){var t,n,r;return t=e.split(" "),n=t[0].split("-"),r=t[1].split(":"),new Date(n[0],n[1]-1,n[2],r[0],r[1],r[2],0)},n:function(e){return!!e},o:function(e){return e},a7:["batch","destroy"],a6:["del","destroy","empty","get","getAll","getWithLike","getByCallback","getByIndex","getByIndexWithRange","put","set"],p:function(e){var t=this.a6,n=this.a,r,i;for(r=0,i=t.length;r<i;r++)e[t[r]]=n},r:function(e){var t=this.a7,n=this.a6,r,i,s,o=this.a,u,a;for(u=0,a=t.length;u<a;u++)e[t[u]]=o;s=e._b3;for(r in s){i=s[r];for(u=0,a=n.length;u<a;u++)i[n[u]]=o}},s:function(t){t=t.toLowerCase();if(t==="websql"){if(e.openDatabase)return d._b9.d4}else if(t==="indexeddb"&&d._a8)return d._b9.d3;if(e.openDatabase)return d._b9.d4;if(d._a8)return d._b9.d3},t:function(n,r,i,s,o){var u={},a;if(!n)throw t;return typeof o[1]=="function"?(u.callback=o[1],u.context=o[2]||e):typeof o[1]=="object"&&(u=o[1]),d._c7.prototype=r,a=new d._c7(n,i,u),a._x=d._yy.v,a._w=d._yy.u,a._d2=s,a._f8(),a},u:function(e,n){var r=this._c2,i=this._c1,s=r[e];if(!s)throw t;return s.ii(n,s.hh)},a3:{string:"TEXT",integer:"INTEGER",object:"TEXT",array:"TEXT",date:"DATE",time:"TIME",datetime:"DATETIME","float":"REAL","boolean":"INTEGER"},a4:{string:"",integer:0,object:"{}",array:"[]",date:"0000-00-00",time:"00:00:00",datetime:"0000-00-00 00:00:00","float":0,"boolean":0},a5:{string:"","int":0,integer:0,text:"",object:{},array:[],date:+(new Date(0,0,0)),time:+(new Date(0,0,0)),datetime:+(new Date(0,0,0)),"float":0,"boolean":!1},v:function(e){var n=this._d2,r=d._yy.a3,i=n==="webSQL"?d._yy.a4:d._yy.a5,s=this._c1,o=this._b9._c1,u=this._c2[e],a,f=u.type,l=r[f],c=u.allowNull;if(!l)throw t;a=this._c2[e],a.hh=c?n==="webSQL"?null:null:i[f],a.ii=n==="webSQL"?d._yy.zz.y(f):d._yy.a1.y(f),a.kk=f==="date"||f==="time"||f==="datetime",n==="webSQL"&&(a.ll=f,a.mm=l+(c?" NULL":""),a.nn=f==="object"||f==="array",a.jj=d._yy.c(f))},oo:function(e){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(e)?new Date(e):!1},ss:function(e){var t;return e-=0,e?(t=new Date(e),isNaN(t-0)?!1:t):!1},tt:function(e){if(isNaN(e-0))return null;var t=e.getMonth()+1,n=e.getDate();return e.getFullYear()+"-"+(t<10?"0"+t:t)+"-"+(n<10?"0"+n:n)},uu:function(e){return isNaN(e-0)?null:e.toTimeString().substring(0,8)},vv:function(e){return isNaN(e-0)?null:this.tt(e)+" "+this.uu(e)},ww:function(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)},xx:function(e){e.setFullYear(0),e.setDate(0),e.setMonth(0)}},d._yy.zz={y:function(e){if(e==="string"||e==="text")return this.z;if(e==="int"||e==="integer"||e==="float")return this.aa;if(e==="object"||e==="array")return this.ee;if(e==="date")return this.bb;if(e==="time")return this.cc;if(e==="datetime")return this.dd;if(e==="boolean")return this.ff},z:function(e,t){return e||t},aa:function(e,t){return e-=0,e?e:t},bb:function(e,t){var n,r;return e instanceof Date?d._yy.tt(e)||t:(r=d._yy.ss(e))?d._yy.tt(r):(r=d._yy.oo(e))?d._yy.tt(r):(n=/^(\d{4}-\d{2}-\d{2})/.exec(e),n?n[1]:t)},cc:function(e,t){var n,r;return e instanceof Date?d._yy.uu(e)||t:(r=d._yy.ss(e))?d._yy.uu(r):(r=d._yy.oo(e))?d._yy.uu(r):(n=/^(?:\d{4}-\d{2}-\d{2}\s)?(\d{2}:\d{2})(:\d{2})?$/.exec(e),n?n[1]+(n[2]||":00"):t)},dd:function(e,t){var n,r;return e instanceof Date?d._yy.vv(e)||t:(r=d._yy.ss(e))?d._yy.vv(r):(r=d._yy.oo(e))?d._yy.vv(r):(n=/^(\d{4}-\d{2}-\d{2}\s)(\d{2}:\d{2})(:\d{2})?$/.exec(e),n?n[1]+n[2]+(n[3]||":00"):t)},ee:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object")return e?e:t;try{return JSON.stringify(e)}catch(n){return t}},ff:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?1:e==="false"||e==="0"?0:t):e===1?1:e===0?0:t},gg:function(e){return e}},d._yy.a1={y:function(e){if(e==="string"||e==="text")return this.z;if(e==="int"||e==="integer"||e==="float")return this.aa;if(e==="object"||e==="array")return this.ee;if(e==="date")return this.bb;if(e==="time")return this.cc;if(e==="datetime")return this.dd;if(e==="boolean")return this.ff},z:function(e,t){return e?e+"":t},aa:function(e,t){return e-=0,e?e:t},bb:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:(d._yy.ww(e),+e):(r=d._yy.ss(e))?(d._yy.ww(r),+r):(r=d._yy.oo(e))?(d._yy.ww(r),+r):(n=/^(\d{4}-\d{2}-\d{2})/.exec(e),n?(n=n[1].split("-"),+(new Date(n[0],n[1]-1,n[2],0,0,0,0))):t)},cc:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:(d._yy.xx(e),+e):(r=d._yy.ss(e))?(d._yy.xx(r),+r):(r=d._yy.oo(e))?(d._yy.xx(r),+r):(n=/^(?:\d{4}-\d{2}-\d{2} )?(\d{2}):(\d{2})(?::(\d{2}))?$/.exec(e),n?+(new Date(0,0,0,n[1],n[2],n[3]||0,0)):t)},dd:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:+e:(r=d._yy.ss(e))?+r:(r=d._yy.oo(e))?+r:(n=/^(\d{4})-(\d{2})-(\d{2})(?:\s(\d{2}):(\d{2})(?::(\d{2}))?)?$/.exec(e),n?+(new Date(n[1],n[2]-1,n[3],n[4]||0,n[5]||0,n[6]||0,0)):t)},ee:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object"){if(!e)return t;if(typeof e=="string")try{return JSON.parse(e)}catch(n){return t}return e}return e},ff:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?!0:e==="false"||e==="0"?!1:t):e===1?!0:e===0?!1:t},gg:function(e){return e}},d.ORM=function(n,r,i){typeof n=="string"&&(n={name:n});var o=n.name;if(!o)throw t;if(o===s)throw t;if(!/^[\w][-.\w\d]+$/i.test(o))throw t;return n.callback=n.callback||r||d._yy.b,n.context=n.context||i||e,d._b9.prototype=d._yy.s(n.prefered||""),new d._b9(n)},d._b9=function(e){var t=this._c1=e.name;this._b2=[],this._b3={},this._b4=[],this.Schema._b9=this,this._b5=!0,this._b6=[],this._b7=e.callback,this._b8=e.context,e.forceDestroy?this._e9(this._e3,this):this._e3()},d._c7=function(n,r,i){var s=n._c1,o=r.name;if(o==="__currents_ids__")throw t;if(!/^[\w][-\w\d]+$/i.test(o))throw t;if(n._b3[o]&&!i.forceDestroy)throw t;var u=r.fields;if(typeof u!="object"||!Object.keys(u).length)throw t;var a=r.primaryKey;if(!a||a&&!u[a])throw t;if(u[a].type!=="integer")throw t;u[a].allowNull=!0;var f,l,c=[],h=[];for(f in u){l=u[f];if(l.index){if(!/^(integer|float|string|date|time|datetime|boolean)$/.test(l.type))throw t;c.push(f),l.index=!0}else l.index=!1;l.unique?(c.indexOf(f)===-1&&(c.push(f),l.index=!0),h.push(f),l.unique=!0):l.unique=!1}n._b3[o]=this,this._b9=n,this._c1=o,this._c2=u,this._c3=c,this._c4=h,this._c5=a,this._c6=Object.keys(u),this._e1=i.forceDestroy,this._e2=this._e1?!1:i.forceEmpty,this._b7=i.callback||d._yy.b,this._b8=i.context||e},d._b9.d3={Schema:function(e){return d._yy.t(this.constructor._b9,d._c7.d3,e,"indexedDB",arguments)},_n4:{m3:function(e){var t=e.ORM,n=t._p2,r=n._c1;this.ORM=t,this.o2=0,this.o1=!1,this.o3=null,this.o4=null,this.n5=e.n5,this.n6=e.n6,this.n7=e.n7,this.n9=e.n9,e.o5?(this.o7=this.m1,this.o8=a,this.o9=this.l9,this.o6=r):(this.o7=this.l9,this.o8=r,this.o9=this.m1,this.o6=a),this.m2()},m1:function(){return this.ORM._m8()},l9:function(){return this.ORM._l4()},m2:function(){var e=this,t=e.ORM,r=e.o8,s=e.o7();s[f]=function(t){e.o4=this[i];var s=e.o4[n]([r],d._a9.READ_ONLY),o=s.objectStore(r),u=o.openCursor();u._n8=e,u[f]=e.m4},s[l]=t._k8},m4:function(e){var t=this._n8,n=t.o4,r=this[i];r?t.o1?(t.o1=!1,n.close(),t.m5(r.value)):t.o2===0?(t.o2++,n.close(),t.m5(r.value)):(t.o1=!0,r.advance(t.o2),t.o2++):(n.close(),t.m7())},m5:function(e){var t=this,r=t.ORM,s=t.o6,o=t.o9();o[f]=function(r){t.o3=this[i];var o=t.o3[n]([s],d._a9.READ_WRITE),u=o.objectStore(s),a=t.n9(u,e,t.o2);a._n8=t,a[f]=t.m6,a[l]=t.m6},o[l]=r._k8},m6:function(e){var t=this._n8;t.o3.close(),t.m2()},m7:function(){this.n5.call(this.n6,this.n7)}},_e3:function(){d._yy.pp();var e=this,t=this._c1,r=this._m8();r[c]=function(e){var t=this[i],n;n=t.createObjectStore(o,{keyPath:"id",autoIncrement:!0}),n.createIndex(u,u,{unique:!0}),t.createObjectStore(a)},r[f]=function(r){var s=this[i],a=s[n]([o],d._a9.READ_WRITE),l=a.objectStore(o);l.index(u).get(t)[f]=function(n){var r=this[i];if(!r)e._p3=0,l.add({name:t,branch:0,schemas:{}})[f]=function(t){s.close(),e._f8()};else{s.close();var o=r.branch;e._p3=o,e._f8()}}},r[l]=function(e){this._b7.call(this._b8,null)}},_f8:function(){d._yy.qq(),this._b7.call(this._b8,!0),this._e6()},_e9:function(t,r){var s=this,a=this._c1,c=d._a8.deleteDatabase(a);d._yy.pp(),c[f]=function(l){c=s._m8(),c[f]=function(l){var c=this[i],h=c[n]([o],d._a9.READ_WRITE),p=h.objectStore(o);p.index(u).get(a)[f]=function(n){var o=this[i];p.delete(o.id)[f]=function(n){c.close(),d._yy.r(s),d._yy.qq(),t.call(r||e,!0)}}}},c[l]=function(n){d._yy.qq(),t.call(r||e,!1)}},_e5:function(e){this._b6.push(e),this._b5||this._e6()},_e6:function(){var e=this,t=this._c1,r;this._b6.length?(d._yy.pp(),r=this._m8(),r[f]=function(r){var s=this[i],a=s[n]([o],d._a9.READ_WRITE),l=a.objectStore(o);l.index(u).get(t)[f]=function(t){var n=this[i];e._k6(s,l,n)}},r[l]=this._k8):this._e7()},_k6:function(e,t,n){var r=this,i=this._c1,s=this._b6.shift(),o=s._c1,u=n.schemas[o],a={fields:s._c2,primaryKey:s._c5};this._p2=s,u?s._e1?this._g7(this._h1):(e.close(),this._g3(u,a)?s._e2?this._g7(this._h1,this):this._g5():s._e2?this._h2():this._l1()):(this._k7(t,n),e.close(),this._g4())},_g3:function(e,t){var n=!1,r,i=e.fields,s=t.fields,o,u;for(r in i){o=i[r],u=s[r];if(!u||o.type!==u.type||o.index!==u.index||o.unique!==u.unique){n=!0;break}}var a=e.primaryKey,f=t.primaryKey;return!n&&(a&&(!f||a!==f)||!a&&f)&&(n=!0),n},_k7:function(e,t){var n=this._p2,r=n._c1,i=n._c5,s=n._d1;return t.schemas[r]={fields:s,primaryKey:i},req=e.put(t),req},_g4:function(){var e=this,t=this._p2,n=this._c1,r=t._c1,s=this._l3();s[c]=function(t){var n=this[i];e._k9(n)},s[f]=function(t){var n=this[i];n.close(),e._l2(e._l1,e)},s[l]=this._k8},_g5:function(){var e=this,t=this._m8();t[f]=function(t){var r=this[i],s=r[n]([a],d._a9.READ_WRITE),o=s.objectStore(a);o.clear()[f]=function(t){r.close(),e._g6()}},t[l]=this._k8},_g6:function(){var e=this,t=this._p2,n=t._c1,r=function(e,t,n){return e.add(t,n)};this._n4.m3({ORM:this,o5:!1,n5:this._g7,n6:this,n7:this._g8,n9:r})},_g7:function(e){var t=this,n=this._p2,r=n._c1,s=this._c1,o=this._l3();o[c]=function(e){var n=this[i];n.deleteObjectStore(r),t._k9(n)},o[f]=function(n){var r=this[i];r.close(),t._l2(e,t)},o[l]=this._k8},_g8:function(){var e=this,t=this._p2,n=t._c1,r=t._c2,i=function(e,t){var n,i;for(i in t)n=r[i],n?t[i]=n.ii(t[i],n.hh):delete t[i];return e.put(t)};this._n4.m3({ORM:this,o5:!0,n5:this._g9,n6:this,n9:i})},_g9:function(){var e=this,t=this._c1,r;r=this._m8(),r[f]=function(t){var r=this[i],s=r[n]([a],d._a9.READ_WRITE),o=s.objectStore(a);o.clear()[f]=function(t){r.close(),e._h1()}},r[l]=this._k8},_h1:function(){var e=this,t=this._c1,r=this._p2,s=r._c1,a;a=this._m8(),a[f]=function(r){var s=this[i],a=s[n]([o],d._a9.READ_WRITE),l=a.objectStore(o);l.index(u).get(t)[f]=function(t){var n=this[i],r;r=e._k7(l,n),r[f]=function(t){s.close(),e._h3()}}},a[l]=this._k8},_h2:function(){var e=this,t=this._c1,r=this._p2,s=r._c1,o;o=this._l4(),o[f]=function(t){var r=this[i],o=r[n]([s],d._a9.READ_WRITE),u=o.objectStore(s);u.clear()[f]=function(t){e._h3()}},o[l]=this._k8},_h3:function(){this._l1()},_k8:function(){this._l1(!1)},_k9:function(e){var t=this._p2,n=t._c2,r=t._c1,i=t._c5,s,o,u,a;a=e.createObjectStore(r,{keyPath:i,autoIncrement:!0});for(s in n)o=n[s],o.index&&(u=o.unique,a.createIndex(s,s,u?{unique:!0}:{}))},_l1:function(e){var t=this._p2,n=t._b7,r=t._b8;n.call(r,typeof e=="undefined"?!0:e),delete t._b7,delete t._b8,delete t._e1,delete t._e2,delete this._p2,d._yy.qq(),this._e6()},_e7:function(){this._b5=!1},_l2:function(t,r){var s=this,a=this._c1,l=this._p3,c;c=this._m8(),c[f]=function(s){var c=this[i],h=c[n]([o],d._a9.READ_WRITE),p=h.objectStore(o);p.index(u).get(a)[f]=function(n){var s=this[i];s.branch=l,p.put(s),c.close(),t&&t.call(r||e)}}},_l3:function(){var e=this._c1,t=this._p3+1;return this._p3=t,d._a8.open(e,t)},_l4:function(){var e=this._c1,t=this._p3;return d._a8.open(e,t)},_m8:function(){return d._a8.open(s,1)},_l5:function(t){t.d8||(t.d8=d._yy.b),t.d9||(t.d9=e),this._b2.push(t);if(this._c9)return;this._c9=!0,d._yy.pp(),this._l6()},_l6:function(){var e=this._b2.shift();e.type==="destroy"?this._h6(e):this._m9(e,this._exec2,this)},_exec2:function(e){var t=e.schema,n=e.type;this["_"+n](e)},_m9:function(e,t,r){var s=e.schema,o=this._l4();o[f]=function(o){var u=this[i],a=u[n]([s],d._a9[e.p8?"READ_ONLY":"READ_WRITE"]),f=a.objectStore(s);e.p6=f,e.p7=u,t.call(r,e)}},_f6:function(){this._c9=!1,this._b2.length&&this._l6()},_l7:function(e,t,n){d._yy.qq(),e.p7.close(),e.d8.call(e.d9,t,n),this._f6()},_put:function(e){var t=this,n=e.p6,r=e.data,s=0,o=[],u=r.length,a=function(n){n&&o.push(n),s===u?t._l7(e,n,o):(h(),s++)},c=function(){t._l7(e,!1)},h=function(){var e=r[s],t=n.add(e);t[f]=function(e){a(this[i])},t[l]=function(e){c()}};a()},_set:function(e){var t=this,n=e.p6,s=e.data,o=e.p5,u=e.primaryKey,a=0,c=0,h=s.length,p=function(){c===h?t._l7(e,a):(v(),c++)},d=function(){t._l7(e,!1)},v=function(){var e=s[c],t=e.data,o=e.target,h=o[u],v,m=Object.keys(o).length;h?n.get(h)[f]=function(e){var r=this[i],s;if(r){for(v in t)r[v]=t[v];s=n.put(r),s[f]=function(e){this[i]&&a++,p()},s[l]=function(e){d()}}else p()}:n.openCursor()[f]=function(e){var n=this[i];if(n){var s=n.value,u=0,c;for(v in o)s[v]===o[v]&&u++;if(u===m){for(v in t)s[v]=t[v];c=n.update(s),c[f]=function(e){this[i]&&a++,n[r]()},c[l]=function(e){d()}}else n[r]()}else p()}};p()},_del:function(e){var t=this,n=e.p6;n.count()[f]=function(n){e.p4=this[i],t._n1(e)}},_n1:function(e){var t=this,n=e.data,r=e.primaryKey,i=e.p6,s=0,o=n.length,u=function(){s===o?t._n2(e):(a(),s++)},a=function(){var e=n[s];i.delete(e[r])[f]=function(e){u()}};u()},_n2:function(e){var t=this,n=e.p6;n.count()[f]=function(n){t._l7(e,e.p4-this[i])}},_empty:function(e){var t=this,n,r=e.p6;r.count()[f]=function(s){n=this[i],r.clear()[f]=function(r){t._l7(e,n)}}},_h6:function(e){var t=this,n=e.schema,r=this._l3();r[c]=function(e){var t=this[i];t.deleteObjectStore(n)},r[f]=function(n){var r=this[i];r.close(),t._l8(e)}},_l8:function(e){var t=this,r=this._c1,s=e.schema,a=this._b3[s],l=this._m8();l[f]=function(l){var c=this[i],h=c[n]([o],d._a9.READ_WRITE),p=h.objectStore(o);p.index(u).get(r)[f]=function(n){var r=this[i];delete r.schemas[s],p.put(r)[f]=function(n){t._l2(function(){e.p7=c,delete t._b3[s],d._yy.p(a),this._l7(e,!0)},t)}}}},_getAll:function(e){var t=this,n=e.schema,s=e.d7,o=e.undefined,o=e.undefined,u=e.p6,a=[];u.openCursor()[f]=function(u){var f=this[i],l;f?(l=f.value,s(l,o,o)&&(t._n3(n,l),a.push(l)),f[r]()):t._l7(e,a)}},_getWithRange:function(e){var t=this,n=e.schema,s=e.p9,o=e.undefined,o=e.undefined,u=e.p6,a=[],l=function(s){var o=this[i],u;o?(u=o.value,t._n3(n,u),a.push(u),o[r]()):t._l7(e,a)};s?u.openCursor(o)[f]=l:u.index(o).openCursor(o)[f]=l},_n3:function(e,t){var n=this._b3[e],r=n._c2,i;for(i in t)r[i].kk&&(t[i]=new Date(t[i]))},batch:function(n,r,i){var s=this._c1,o;if(!Array.isArray(n)||!n.length)throw t;typeof r!="function"&&(r=d._yy.b),typeof i!="object"&&(i=e),o={data:n,d8:r,d9:i};if(this._c8){this._b4.push(o);return}this._c8=!0,this._f7(o)},_f7:function(n){var r=n.data,i=["set","put","del"],s=0,o=r.length,u,a,f,l;for(;s<o;s++){a=r[s],f=a.schema;if(!(f instanceof d._c7))throw t;l=a.type.toLowerCase();if(i.indexOf(l)===-1)throw t;u=f[l](a.data),u.d8=d._yy.b,u.d9=e,this._b2.push(u)}u=this._b2[this._b2.length-1],u.d8=n.d8,u.d9=n.d9,this._c8=!1,this._c9||this._f6()},destroy:function(e,t){this._e9(e||d._yy.a,t)}},d._c7.d3={_f8:function(){var e=this._b9,t=this._c2,n,r,i={};for(n in t)r=t[n],this._x(n),i[n]={type:r.type,index:r.index,unique:r.unique};this._d1=i,e._e5(this)},get:function(e,n,r){var i=this._b9,s=i._c1,o=this._c2,u,a={},f=this._c1,l;if(!e)throw t;for(u in o)a[u]=this._w(u,e);var c=function(e,t,n){for(var r in e)if(e[r]===n[r])return!0;return!1};l={type:"getAll",p8:!0,schema:f,d7:c,"undefined":a,d8:n,d9:r},i._l5(l)},getAll:function(e,t){var n=this._b9,r=n._c1,i=this._c1,s,o=function(){return!0};s={type:"getAll",p8:!0,schema:i,d7:o,d8:e,d9:t},n._l5(s)},getWithLike:function(e,n,r,i){var s=this._b9,o=s._c1,u=this._c2,a=this._c1,f,l,c,h,p,d;if(typeof n!="object")throw t;h=Object.keys(n)[0],p=n[h];if(!h||!p)throw t;h==="both"?p=new RegExp(p,"i"):h==="start"?p=new RegExp("^"+p,"i"):h==="end"&&(p=new RegExp(p+"$","i")),Array.isArray(e)||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw t}var v=function(e,t,n){var r,i=0,s=t.length;for(;i<s;i++){r=t[i];if(n.test(e[r]))return!0}return!1};d={type:"getAll",p8:!0,schema:a,d7:v,"undefined":p,"undefined":e,d8:r,d9:i},s._l5(d)},getByCallback:function(e,n,r){var i=this._b9,s=i._c1,o=this._c1,u;if(typeof e!="function")throw t;u={type:"getAll",p8:!0,schema:o,d7:e,d8:n,d9:r},i._l5(u)},getByIndex:function(e,n,r,i){var s=this._b9,o=s._c1,u=this._c1,a={},f=[],l,c,h,p,v,m;if(this._c5!==e&&this._c3.indexOf(e)===-1)throw t;this._c5===e?a.pk=e:a.index=e;if(!n)throw t;Array.isArray(n)||(n=[n]);if(n.length===1)m={type:"getWithRange",p8:!0,schema:u,p9:a.pk,"undefined":a.index,"undefined":d._b1.only(this._w(e,n[0])),d8:r,d9:i};else{for(p=0,v=n.length;p<v;p++)c=n[p],h=this._w(e,c),f.push(h);l=function(e,t,n){for(var r=0,i=t.length;r<i;r++)if(t[r]===e[n])return!0;return!1},m={type:"getAll",p8:!0,schema:u,d7:l,"undefined":a.pk||a.index,"undefined":f,d8:r,d9:i}}s._l5(m)},getByIndexWithRange:function(e,n,r,i){var s=this._b9,o=s._c1,u=this._c1,a=this._c2,f=/^(?:>|<|>=|<=|=)$/,l,c={},h={},p,v,m=a[e],g,y,b;if(this._c5!==e&&this._c3.indexOf(e)===-1)throw t;this._c5===e?c.pk=e:c.index=e;for(l in n){if(!f.test(l))throw t;g=n[l],y=this._w(e,g);if(!y&&y!==m.hh)throw t;h[l]=y}p=Object.keys(h).length;if(p===2)try{h[">"]&&h["<"]?v=d._b1.bound(h[">"],h["<"],!0,!0):h[">="]&&h["<="]?v=d._b1.bound(h[">="],h["<="]):h[">"]&&h["<="]?v=d._b1.bound(h[">"],h["<="],!0,!1):v=d._b1.bound(h[">="],h["<"],!1,!0)}catch(w){throw t}else p===1&&(h[">"]?v=d._b1.lowerBound(h[">"],!0):h[">="]?v=d._b1.lowerBound(h[">="]):h["<"]?v=d._b1.upperBound(h["<"],!0):h["<="]?v=d._b1.upperBound(h["<="]):v=d._b1.only(h["="]));if(!v)throw t;c.keyRange=v,b={type:"getWithRange",p8:!0,schema:u,p9:c.pk,"undefined":c.index,"undefined":v,d8:r,d9:i},s._l5(b)},put:function(e,t,n){var r=this._b9,i=r._c1,s=this._c6,o,u=this._c5,a=this._c1,f,l,c,h,p=s.length,d;!Array.isArray(e)&&typeof e=="object"&&(e=[e]);for(l=0,c=e.length;l<c;l++){f=e[l];for(h=0;h<p;h++)o=s[h],f[o]=this._w(o,f[o]);f[u]<=0&&delete f[u]}d={type:"put",schema:a,primaryKey:u,data:e,d8:t,d9:n};if(r._c8)return d;r._l5(d)},set:function(e,n,r){var i=this._b9,s=this._c1,o=this._c2,u=i._c1,a,f,l,c,h,p,d,v={},m={},g=[],y,b,w;if(!e||typeof e!="object")throw t;Array.isArray(e)||(e=[e]);for(y=0,b=e.length;y<b;y++){f=e[y];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw t;if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw t}else f.target=[];c=f.target;for(p in c){d=c[p],l=this._w(p,d);if(!l&&l!==o[p].hh)throw t;v[p]=l}h=f.data;for(p in h){d=h[p],l=this._w(p,d);if(!l&&l!==o[p].hh)throw t;m[p]=l}g.push({data:m,target:v}),m={},v={}}w={type:"set",schema:s,p5:this._c3,primaryKey:this._c5,data:g,d8:n,d9:r};if(i._c8)return w;i._l5(w)},del:function(e,n,r){var i=this._b9,s=i._c1,o=this._c5,u=this._c1,a,f,l,c=[],h,p,d;if(!o)throw t;if(!e)throw t;Array.isArray(e)||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this._w(o,a);if(!f)throw t;l={},l[o]=f,c.push(l)}d={type:"del",schema:u,primaryKey:o,data:c,d8:n,d9:r};if(i._c8)return d;i._l5(d)},destroy:function(e,t){var n=this._b9,r=n._c1,i=this._c1;n._l5({type:"destroy",schema:i,d8:e,d9:t})},empty:function(e,t){var n=this._b9,r=n._c1,i=this._c1;n._l5({type:"empty",schema:i,d8:e,d9:t})}},d._b9.d4={Schema:function(e){return d._yy.t(this.constructor._b9,d._c7.d4,e,"webSQL",arguments)},_e3:function(){(function(t){d._yy.pp(),t._i1=e.openDatabase(s,1,"",d._yy.a2),t._i1[n](function(e){e[h]("CREATE TABLE IF NOT EXISTS databases( id INTEGER PRIMARY KEY, name TEXT UNIQUE, schemas TEXT )"),e[h]('SELECT * FROM databases WHERE name = "'+t._c1+'"',[],function(e,n){t._e4(n)})})})(this)},_e4:function(t){var r=t.rows;this._i2=r.length?JSON.parse(r.item(0).schemas):{},this._i3=[],this._i4=e.openDatabase(this._c1,1,"",d._yy.a2),function(e){e._i4[n](function(e){e[h]("CREATE TABLE IF NOT EXISTS __currents_ids__( id INTEGER PRIMARY KEY, table_name TEXT UNIQUE, last_id INTEGER )")},null,function(){d._yy.qq(),e._b7.call(e.initContext,!0),e._e6()})}(this)},_e5:function(e){this._b6.push(e),this._b5||(this._b5=!0,this._e6())},_e6:function(){var e=this,t,n=this._c1;this._b6.length?(d._yy.pp(),t=this._b6.shift(),t._f9()):(d._yy.qq(),this._e7())},_e7:function(){this._b5=!1},_e8:function(e,t,r){var i=this,s=this._c1,o=this._i2;this._i1[n](function(e){e[h]('REPLACE INTO databases( name, schemas ) VALUES( "'+s+'", '+"'"+JSON.stringify(o)+"'"+")")},null,function(){e.call(t,r)})},_e9:function(e,t){this.destroy(e,t)},_f1:function(e,t){var r=this,i=e._c1;delete this._b3[i],delete this._i2[i],d._yy.p(e),this._i4[n](function(e){e[h]("DELETE FROM"+p+'WHERE table_name = "'+i+'"')},null,function(){r._e8(t.d8,t.d9,!0)})},_f2:function(e){},_f3:function(t){var n=t.d8,r=t.d9;n||(t.d8=d._yy.b),r||(t.d9=e);if(this._c9){t.j9?this._i3.push(t):this._b2.push(t);return}this._c9=!0,d._yy.pp(),this._f4(t)},_f4:function(e){this._i5=e;var t=this,r=0,i=[],s=e.i6;Array.isArray(s)||(s=[s]);var o=e.i8?function(e,t){r+=t.rowsAffected}:e.j1?function(e,t){i.push(t.insertId)}:d._yy.a,u=function(n,s){e.i8?e.returnValue=s.rowsAffected+r:e.j1?(e.returnValue=s.insertId,i.length||i.push(s.insertId),e.k5=i):e.i9&&(e.returnValue=s.rowsAffected),t._f5(s)},a=function(e){t._f2(e),t._f5(!1)};this._i4[n](function(t){var n,r=s.length;while(r--)n=s.shift(),t[h](n,e.i7?e.i7.shift():[],r?o:u)},a)},_f5:function(e){var t=this._i5;this._c9=!1,e||(t.returnValue=!1),t.k1?t.k1.call(t.k2,e,t):t.d8.call(t.d9,t.returnValue,t.k5),this._f6()},_f6:function(){d._yy.qq(),this._c9||(this._i3.length?this._f3(this._i3.shift()):this._b2.length&&!this._b5&&this._f3(this._b2.shift()))},batch:function(n,r,i){var s=this._c1,o;if(!Array.isArray(n)||!n.length)throw t;r||(r=d._yy.b),i||(i=e),o={data:n,callback:r,context:i};if(this._c8){this._b4.push(o);return}this._c8=!0,this._f7(o)},_f7:function(e){var n=e.data,r=["set","put","del"],i,s,o,u=0,a=n.length;for(;u<a;u++){i=n[u],s=i.schema;if(!(s instanceof d._c7))throw t;o=i.type.toLowerCase();if(r.indexOf(o)===-1)throw t;this._b2.push(s[o](i.data))}var f=this._b2[this._b2.length-1];f.d8=e.callback,f.d9=e.context,this._c8=!1,this._f6(),this._b4.length&&this._f7(this._b4.shift())},destroy:function(t,n){(t||d._yy.a).call(n||e,!1)}},d._c7.d4={_f8:function(){var e=this._c2,t,n,r=this._b9,i=r._c1,s=this._c1,o=[],u=this._c5,a,f={},l,c,h={};for(n in e)t=e[n],a=[],u===n?a.push("PRIMARY KEY"):(l=t.index,c=t.unique,l&&c?f[n]=!0:l&&(f[n]=!1)),this._x(n),h[n]={type:t.type,index:t.index,unique:t.unique},o.push(n+" "+e[n].mm+(a.length?" "+a.join(" "):""));this._j2='CREATE TABLE "'+s+'" ( '+o.join(", ")+" )",this._d1=h,this._k4=f,this._j4=[],r._e5(this)},_f9:function(){var e=this._b9,t=e._c1,n=this._c1,r,i,s;this._e1?(r="DROP TABLE IF EXISTS "+n,e._f3({i6:r,k2:this,k1:this._g4,j9:!0})):(s={fields:this._d1,primaryKey:this._c5},i=e._i2[n],i?this._g3(i,s):(e._i2[n]=s,this._b9._e8(this._g4,this)))},_g1:function(e,t,n){return"CREATE UNIQUE INDEX "+this._h9(e,t)+" ON "+(n||e)+" ( "+t+" )"},_g2:function(e,t,n){return"CREATE INDEX "+this._h9(e,t)+" ON "+(n||e)+" ( "+t+" )"},_h9:function(e,t){return e+"_"+t},_g3:function(e,t){var n=this._b9,r=n._c1,i=this._c1,s=!1,o=e.fields,u=t.fields,a,f,l;for(l in o){a=o[l],f=u[l];if(!f||a.type!==f.type||a.unique!==f.unique){s=!0;break}}var c=e.primaryKey,h=t.primaryKey;!s&&(c&&(!h||c!==h)||!c&&h)&&(s=!0);if(s)n._i2[i]=t,this._b9._e8(this._g5,this);else{var p=[],d=this._c3,v=this._k4;for(l in o)a=o[l],a.index&&(d.indexOf(l)===-1?p.push(l):delete v[l]);p.length||Object.keys(v).length?(this._j4=p,n._i2[i]=t,this._b9._e8(this._h8,this)):this._e2?this._h7():this._h3()}},_g4:function(){var e=this._b9,t=this._c1,n=e._c1,r=this._c5,i,s;i="CREATE TRIGGER IF NOT EXISTS update_last_id_on_"+t+" AFTER INSERT ON "+t+" BEGIN "+" UPDATE"+p+"SET last_id = ( "+" SELECT CASE "+" WHEN ( SELECT 1 WHERE NEW.rowid >= ( SELECT last_id FROM"+p+'WHERE table_name = "'+t+'" ) )'+" THEN NEW.rowid "+" WHEN ( SELECT 1 WHERE NEW.rowid < ( SELECT last_id FROM"+p+'WHERE table_name = "'+t+'" ) )'+" THEN ( SELECT last_id - 1 FROM"+p+'WHERE table_name = "'+t+'" ) '+" ELSE "+" ( SELECT last_id FROM"+p+'WHERE table_name = "'+t+'" ) '+" END "+' ) + 1 WHERE table_name = "'+t+'" ; '+" END ",s="REPLACE INTO"+p+'VALUES( null, "'+t+'", 1 )',e._f3({i6:[this._j2,i,s],k2:this,k1:this._h8,j9:!0})},_g5:function(){var e=this._b9,t=this._j2,n=this._c1,r=n+ +(new Date),i=t.replace('CREATE TABLE "'+n+'"','CREATE TABLE "'+r+'"');this._j5=0,this._j6=r,e._f3({i6:i,k2:this,k1:this._g6,j9:!0})},_g6:function(){var e=this._b9,t=e._c1,n=this._c1,r=this._j6,i=[],s=this._k4,o;for(o in s)i.push("DROP INDEX IF EXISTS "+this._h9(n,o)),s[o]?i.push(this._g1(n,o,r)):i.push(this._g2(n,o,r));i.length?e._f3({i6:i,k2:this,k1:this._g7,j9:!0}):this._g7()},_g7:function(){var e=this._b9,t=this._c1,n=this._j6,r=this._j5,i;this._e2?(this._k3=!0,this._h3()):this._e1?this._h2():this._g8()},_g8:function(){var e=this._b9,t=this._c1,n=this._j6,r="SELECT * FROM "+t+" LIMIT "+this._j5+", 500";e._f3({i6:r,k2:this,k1:this._g9,j9:!0})},_g9:function(e){var t=this._b9,n=this._c2,r=this._c1,i=this._j6,s=e.rows,o,u,a,f=[],l,c=[],h=[],p=[],d=[],v,m,g,y;if(!s.length)this._h1();else{o=s.item(0);for(u in o)n[u]&&f.push(u);for(u in n)a=n[u],f.indexOf(u)===-1&&(f.push(u),h.push(a.hh),c.push("?"));for(m=0,g=s.length;m<g;m++){v=[],l=[],o=s.item(m);for(u in o)a=n[u],a&&(l.push("?"),a.nn?v.push(o[u]):v.push(a.ii(o[u],a.hh)));p.push("INSERT INTO "+i+" ( "+f.join(", ")+" ) VALUES ( "+l.concat(c).join(", ")+" )"),d.push(v.concat(h))}y={i6:p,i7:d,k2:this,j9:!0},g===500?(this._j5+=500,y.k1=this._g8):y.k1=this._h1,t._f3(y)}},_h1:function(){var e=this._b9,t=this._c1,n="DROP TABLE "+t,r=this._j6,i="ALTER TABLE "+r+" RENAME TO "+t;e._f3({i6:[n,i],k2:this,k1:this._h2,j9:!0})},_h2:function(){var e=this._b9;this._e2&&!this._k3?this._h7():this._h3()},_h3:function(){delete this._j2,delete this._k4,delete this._k3,delete this._j6,delete this._j5,delete this._j4,delete this._e1,delete this._e2,this._b7.call(this._b8,!0),delete this._b7,delete this._b8,this._b9._e6()},_h7:function(){var e=this._b9,t=e._c1,n=this._c1,r="DELETE FROM "+n;e._f3({i6:[r],k2:this,k1:this._h3,j9:!0})},_h8:function(){var e=this._b9,t=this._c1,n=[],r=this._j4,i=this._k4,s;while(r.length)n.push("DROP INDEX "+this._h9(t,r.shift()));for(s in i)i[s]?n.push(this._g1(t,s)):n.push(this._g2(t,s));n.length?e._f3({i6:n,k2:this,k1:this._h2,j9:!0}):this._h2()},get:function(e,n,r){var i=this._b9,s=this._c2,o,u=i._c1,a=this._c1,f,l=[],c=[];if(!e)throw t;for(o in s)l.push(o+" = ?"),c.push(this._w(o,e));f="SELECT * FROM "+a+" WHERE "+l.join(" OR "),i._f3({i6:f,i7:[c],k1:this._h5,k2:this,d8:n,d9:r})},getByCallback:function(e,n,r){var i=this._b9,s=this._c2,o,u=this._c1,a;if(typeof e!="function")throw t;a="SELECT * FROM "+u,i._f3({i6:a,k2:this,k1:this._h4,d8:n,d9:r,d7:e})},_h4:function(e,t){var n=this._c2,r=e.rows,i=0,s=r.length,o,u,a=t.d7,f,l=[];for(;i<s;i++){o=r.item(i),f={};for(u in o)f[u]=n[u].jj(o[u]);a(f)&&l.push(f)}t.d8.call(t.d9,l)},getByIndex:function(e,n,r,i){var s=this._b9,o=s._c1,u=this._c1,a,f=[],l=[],c,h,p,d;if(this._c5!==e&&this._c3.indexOf(e)===-1)throw t;if(!n)throw t;Array.isArray(n)||(n=[n]);for(p=0,d=n.length;p<d;p++)c=n[p],h=this._w(e,c),f.push(e+" = ?"),l.push(h);a="SELECT * FROM "+u+(f.length?" WHERE "+f.join(" OR "):""),s._f3({i6:a,i7:[l],k2:this,k1:this._h5,d8:r,d9:i})},getByIndexWithRange:function(e,n,r,i){var s=this._b9,o=s._c1,u=this._c1,a=this._c2,f=/^(?:>|<|>=|<=|=)$/,l,c=[],h,p,d=[],v;if(this._c5!==e&&this._c3.indexOf(e)===-1)throw t;for(l in n){if(!f.test(l))throw t;h=n[l],p=this._w(e,h);if(!p&&p!==a[e].hh)throw t;c.push(e+" "+l+" ?"),d.push(p)}if(!c.length)throw t;v="SELECT * FROM "+u+" WHERE "+c.join(" AND "),s._f3({i6:v,i7:[d],k2:this,k1:this._h5,d8:r,d9:i})},getAll:function(e,t){var n=this._b9,r=this._c1,i="SELECT * FROM "+r;n._f3({i6:i,k2:this,k1:this._h5,d8:e,d9:t})},getWithLike:function(e,n,r,i){var s=this._b9,o=s._c1,u=this._c2,a=this._c1,f,l,c,h,p,d=[],v,m=[];if(typeof n!="object")throw t;h=Object.keys(n)[0],p=n[h];if(!h||!p)throw t;h==="both"?p="%"+p+"%":h==="start"?p+="%":h==="end"&&(p="%"+p),Array.isArray(e)||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw t;m.push(c+" LIKE ?"),d.push(p)}v="SELECT * FROM "+a+" WHERE "+m.join(" OR "),s._f3({i6:v,i7:[d],k2:this,k1:this._h5,d8:r,d9:i})},_h5:function(e,t){var n=this._c2,r=e.rows,i=0,s=r.length,o,u,a,f=[];for(;i<s;i++){o=r.item(i),a={};for(u in o)a[u]=n[u].jj(o[u]);f.push(a)}t.d8.call(t.d9,f)},put:function(e,t,n){var r=this._b9,i=r._c1,s=this._c6,o,u,a=this._c1,f=this._c5,l,c=[],h,d,v=[],m,g,y,b,w=s.length,E;!Array.isArray(e)&&typeof e=="object"&&(e=[e]);for(g=0,y=e.length;g<y;g++){m=e[g],l=[],h=[],d=[];for(b=0;b<w;b++)o=s[b],l.push(o),u=this._w(o,m[o]),o===f&&(!u||u<=0)?d.push("( SELECT last_id FROM"+p+'WHERE table_name = "'+a+'" )'):(h.push(u),d.push("?"));c.push(h),v.push("INSERT OR ROLLBACK INTO "+a+" ( "+l.join(", ")+" ) "+"VALUES ( "+d.join(" , ")+" )")}E={i6:v,i7:c,d8:t,d9:n,j1:!0};if(r._c8)return E;r._f3(E)},set:function(e,n,r){var i=this._b9,s=this._c1,o=i._c1,u=this._c2,a,f,l,c,h,p,d,v,m,g=[],y,b=[],w,E,S;if(!e||typeof e!="object")throw t;Array.isArray(e)||(e=[e]);for(w=0,E=e.length;w<E;w++){f=e[w],y=[],m=[],v=[];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw t;if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw t}else f.target=[];h=f.data;for(p in h){d=h[p],l=this._w(p,d);if(!l&&l!==u[p].hh)throw t;m.push(p+" = ?"),y.push(l)}c=f.target;for(p in c){d=c[p],l=this._w(p,d);if(!l&&l!==u[p].hh)throw t;v.push(p+" = ?"),y.push(l)}b.push("UPDATE OR ROLLBACK "+s+" SET "+m.join(", ")+(v.length?" WHERE "+v.join(" AND "):"")),g.push(y)}S={i6:b,i7:g,i8:!0,d8:n,d9:r};if(i._c8)return S;i._f3(S)},del:function(e,n,r){var i=this._b9,s=i._c1,o=this._c5,u=this._c1,a,f,l,c=[],h,p,d;if(!o)throw t;if(!e)throw t;Array.isArray(e)||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this._w(o,a);if(!f)throw t;c.push(o+" = "+f)}l="DELETE FROM "+u+(c.length?" WHERE "+c.join(" OR "):""),d={i6:l,i9:!0,d8:n,d9:r};if(i._c8)return d;i._f3(d)},destroy:function(e,t){var n=this._b9,r=this._c1,i="DROP TABLE "+r;n._f3({k1:this._h6,k2:this,i6:i,d8:e,d9:t})},_h6:function(e,t){var n=this._b9;e&&n._f1(this,t)},empty:function(e,t){var n=this._b9,r=this._c1,i="DELETE FROM "+r;n._f3({i6:i,i9:!0,d8:e,d9:t})}},e.MSQTA=d})(window);