(function(e){var t="MSQTA-ORM!",n="transaction",r="continue",i="result",s="__msqta__",o="databases",u="name",a="dump",f="onsuccess",l="onerror",c="onupgradeneeded",h="executeSql",p=" __currents_ids__ ",d=d||{};d._yy=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,d._zz=e.IDBTransaction||e.webkitIDBTransaction||e.msIDBTransaction,d._zz&&(!d._zz.READ_WRITE||!d._zz.READ_ONLY)&&(d._zz={READ_WRITE:"readwrite",READ_ONLY:"readonly"}),d._a1=e.IDBKeyRange||e.webkitIDBKeyRange||e.msIDBKeyRange,d._pp={a:function(){},b:function(){},ss:2097152,c:function(e){return e==="object"||e==="array"?this.d:e==="datetime"?this.h:e==="date"?this.e:e==="time"?this.g:e==="boolean"?this.n:this.o},d:function(e){return JSON.parse(e)},e:function(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2],0,0,0,0)},g:function(e){var t=new Date,n=e.split(":");return t.setHours(n[0]),t.setMinutes(n[1]),t.setSeconds(n[2]),t},h:function(e){var t=e.split(" "),n=t[0].split("-"),r=t[1].split(":");return new Date(n[0],n[1]-1,n[2],r[0],r[1],r[2],0)},n:function(e){return!!e},o:function(e){return e},xx:["batch","destroy"],ww:["del","destroy","empty","get","getAll","getWithLike","getByCallback","getByIndex","getByIndexWithRange","put","set"],p:function(e){var t=this.ww,n=this.a,r,i;for(r=0,i=t.length;r<i;r++)e[t[r]]=n},r:function(e){var t=this.xx,n=this.ww,r,i,s,o=this.a,u,a;for(u=0,a=t.length;u<a;u++)e[t[u]]=o;s=e._a3;for(r in s){i=s[r];for(u=0,a=n.length;u<a;u++)i[n[u]]=o}},s:function(t){t=t.toLowerCase();if(t==="websql"){if(e.openDatabase)return d._a9.c4}else if(t==="indexeddb"&&d._yy)return d._a9.c3;if(e.openDatabase)return d._a9.c4;if(d._yy)return d._a9.c3},t:function(n,r,i,s,o){var u={},a;if(!n)throw t;return typeof o[1]=="function"?(u.callback=o[1],u.context=o[2]||e):typeof o[1]=="object"&&(u=o[1]),d._b7.prototype=r,a=new d._b7(n,i,u),a._x=d._pp.v,a._w=d._pp.u,a._c2=s,a._e8(),a},u:function(e,n){var r=this._b2,i=this._b1,s=r[e];if(!s)throw t;return s.ii(n,s.hh)},tt:{string:"TEXT",integer:"INTEGER",object:"TEXT",array:"TEXT",date:"DATE",time:"TIME",datetime:"DATETIME","float":"REAL","boolean":"INTEGER"},uu:{string:"",integer:0,object:"{}",array:"[]",date:"0000-00-00",time:"00:00:00",datetime:"0000-00-00 00:00:00","float":0,"boolean":0},vv:{string:"","int":0,integer:0,text:"",object:{},array:[],date:new Date(0,0,0),time:new Date(0,0,0),datetime:new Date(0,0,0),"float":0,"boolean":!1},v:function(e){var n=this._c2,r=d._pp.tt,i=n==="webSQL"?d._pp.uu:d._pp.vv,s=this._b1,o=this._a9._b1,u=this._b2[e],a,f=u.type,l=r[f],c=u.allowNull;if(!l)throw t;a=this._b2[e],a.hh=c?n==="webSQL"?null:null:i[f],a.ii=n==="webSQL"?d._pp.qq.y(f):d._pp.rr.y(f),a.jj=d._pp.c(f),a.kk=f==="date"||f==="time"||f==="datetime",n==="webSQL"&&(a.ll=f,a.mm=l+(c?" NULL":""),a.nn=f==="object"||f==="array")}},d._pp.qq={y:function(e){if(e==="string"||e==="text")return this.z;if(e==="int"||e==="integer"||e==="float")return this.aa;if(e==="object"||e==="array")return this.ee;if(e==="date")return this.bb;if(e==="time")return this.cc;if(e==="datetime")return this.dd;if(e==="boolean")return this.ff},z:function(e,t){return e||t},aa:function(e,t){return e-=0,e?e:t},bb:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:(n=e.getMonth()+1,r=e.getDate(),e.getFullYear()+"-"+(n<10?"0"+n:n)+"-"+(r<10?"0"+r:r)):(n=/^(\d{4}-\d{2}-\d{2})/.exec(e),n?n[1]:t)},cc:function(e,t){if(e instanceof Date)return isNaN(e-0)?t:e.toTimeString().substring(0,8);var n=/^(?:\d{4}-\d{2}-\d{2}(?: |T))?(\d{2}:\d{2})(?:(:\d{2})[^Z]+Z|(:\d{2}))?$/.exec(e);return n?n[1]+(n[2]||n[3]||":00"):t},dd:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:(n=e.getMonth()+1,r=e.getDate(),e.getFullYear()+"-"+(n<10?"0"+n:n)+"-"+(r<10?"0"+r:r)+" "+e.toTimeString().substring(0,8)):(n=/^(\d{4}-\d{2}-\d{2})(?: |T)(\d{2}:\d{2})(?:(:\d{2})[^Z]+Z|(:\d{2}))?$/.exec(e),n?n[1]+" "+n[2]+(n[3]||n[4]||":00"):t)},ee:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object")return e?e:t;try{return JSON.stringify(e)}catch(n){return t}},ff:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?1:e==="false"||e==="0"?0:t):e===1?1:e===0?0:t},gg:function(e){return e}},d._pp.rr={oo:function(e){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(e)?new Date(e):!1},y:function(e){if(e==="string"||e==="text")return this.z;if(e==="int"||e==="integer"||e==="float")return this.aa;if(e==="object"||e==="array")return this.ee;if(e==="date")return this.bb;if(e==="time")return this.cc;if(e==="datetime")return this.dd;if(e==="boolean")return this.ff},z:function(e,t){return e?e+"":t},aa:function(e,t){return e-=0,e?e:t},bb:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:e:(r=d._pp.rr.oo(e))?r:(n=/^(\d{4}-\d{2}-\d{2})/.exec(e),n?(n=n[1].split("-"),new Date(n[0],n[1]-1,n[2],0,0,0,0)):t)},cc:function(e,t){var n,r;if(e instanceof Date)return isNaN(e-0)?t:e;if(r=d._pp.rr.oo(e))return r;n=/^(\d{4}-\d{2}-\d{2} )?(\d{2}:\d{2})(:\d{2})?$/.exec(e);if(!n)return t;var i,s,o;return n[1]?(i=n[1].split("-"),i[1]=i[1]-1):(i=new Date,i=[i.getFullYear(),i.getMonth(),i.getDate()]),s=n[2].split(":"),o=n[3]||0,new Date(i[0],i[1],i[2],s[0],s[1],o,0)},dd:function(e,t){var n,r;if(e instanceof Date)return isNaN(e-0)?e:t;if(r=d._pp.rr.oo(e))return r;n=/^(\d{4}-\d{2}-\d{2})(?: |T)(\d{2}:\d{2})(?::(\d{2})[^Z]+Z|:(\d{2}))?$/.exec(e);if(!n)return t;var i,s,o;return i=n[1].split("-"),s=n[2].split(":"),o=n[3]||n[4]||0,new Date(i[0],i[1]-1,i[2],s[0],s[1],o,0)},ee:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object"){if(!e)return t;if(typeof e=="string")try{return JSON.parse(e)}catch(n){return t}return e}return e},ff:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?!0:e==="false"||e==="0"?!1:t):e===1?!0:e===0?!1:t},gg:function(e){return e}},d.ORM=function(n,r,i){typeof n=="string"&&(n={name:n});var o=n.name;if(!o)throw t;if(o===s)throw t;if(!/^[\w][-.\w\d]+$/i.test(o))throw t;return n.callback=n.callback||r||d._pp.b,n.context=n.context||i||e,d._a9.prototype=d._pp.s(n.prefered||""),new d._a9(n)},d._a9=function(e){var t=this._b1=e.name;this._a2=[],this._a3={},this._a4=[],this.Schema._a9=this,this._a5=!0,this._a6=[],this._a7=e.callback,this._a8=e.context,e.forceDestroy?this._d9(this._d3,this):this._d3()},d._b7=function(n,r,i){var s=n._b1,o=r.name;if(o==="__currents_ids__")throw t;if(!/^[\w][-\w\d]+$/i.test(o))throw t;if(n._a3[o]&&!i.forceDestroy)throw t;var u=r.fields;if(typeof u!="object"||!Object.keys(u).length)throw t;var a=r.primaryKey;if(!a||a&&!u[a])throw t;if(u[a].type!=="integer")throw t;u[a].allowNull=!0;var f,l,c=[],h=[];for(f in u){l=u[f];if(l.index){if(!/^(integer|float|string|date|time|datetime|boolean)$/.test(l.type))throw t;c.push(f),l.index=!0}else l.index=!1;l.unique?(c.indexOf(f)===-1&&(c.push(f),l.index=!0),h.push(f),l.unique=!0):l.unique=!1}n._a3[o]=this,this._a9=n,this._b1=o,this._b2=u,this._b3=c,this._b4=h,this._b5=a,this._b6=Object.keys(u),this._d1=i.forceDestroy,this._d2=this._d1?!1:i.forceEmpty,this._a7=i.callback||d._pp.b,this._a8=i.context||e},d._a9.c3={Schema:function(e){return d._pp.t(this.constructor._a9,d._b7.c3,e,"indexedDB",arguments)},_m3:{l3:function(e){var t=e.ORM,n=t._o1,r=n._b1;this.ORM=t,this.n1=0,this.m9=!1,this.n2=null,this.n3=null,this.m4=e.m4,this.m5=e.m5,this.m6=e.m6,this.m8=e.m8,e.n4?(this.n6=this.l1,this.n7=a,this.n8=this.k9,this.n5=r):(this.n6=this.k9,this.n7=r,this.n8=this.l1,this.n5=a),this.l2()},l1:function(){return this.ORM._l8()},k9:function(){return this.ORM._k4()},l2:function(){var e=this,t=e.ORM,r=e.n7,s=e.n6();s[f]=function(t){e.n3=this[i];var s=e.n3[n]([r],d._zz.READ_ONLY),o=s.objectStore(r),u=o.openCursor();u._m7=e,u[f]=e.l4},s[l]=t._j8},l4:function(e){var t=this._m7,n=t.n3,r=this[i];r?t.m9?(t.m9=!1,n.close(),t.l5(r.value)):t.n1===0?(t.n1++,n.close(),t.l5(r.value)):(t.m9=!0,r.advance(t.n1),t.n1++):(n.close(),t.l7())},l5:function(e){var t=this,r=t.ORM,s=t.n5,o=t.n8();o[f]=function(r){t.n2=this[i];var o=t.n2[n]([s],d._zz.READ_WRITE),u=o.objectStore(s),a=t.m8(u,e,t.n1);a._m7=t,a[f]=t.l6,a[l]=t.l6},o[l]=r._j8},l6:function(e){var t=this._m7;t.n2.close(),t.l2()},l7:function(){this.m4.call(this.m5,this.m6)}},_d3:function(){var e=this,t=this._b1,r=this._l8();r[c]=function(e){var t=this[i],n;n=t.createObjectStore(o,{keyPath:"id",autoIncrement:!0}),n.createIndex(u,u,{unique:!0}),t.createObjectStore(a)},r[f]=function(r){var s=this[i],a=s[n]([o],d._zz.READ_WRITE),l=a.objectStore(o);l.index(u).get(t)[f]=function(n){var r=this[i];if(!r)e._o2=0,l.add({name:t,branch:0,schemas:{}})[f]=function(t){s.close(),e._e8()};else{s.close();var o=r.branch;e._o2=o,e._e8()}}},r[l]=function(e){this._a7.call(this._a8,null)}},_e8:function(){this._a7.call(this._a8,!0),this._d6()},_d9:function(t,r){var s=this,a=this._b1,c=d._yy.deleteDatabase(a);c[f]=function(l){c=s._l8(),c[f]=function(l){var c=this[i],h=c[n]([o],d._zz.READ_WRITE),p=h.objectStore(o);p.index(u).get(a)[f]=function(n){var o=this[i];p.delete(o.id)[f]=function(n){c.close(),d._pp.r(s),t.call(r||e,!0)}}}},c[l]=function(n){t.call(r||e,!1)}},_d5:function(e){this._a6.push(e),this._a5||this._d6()},_d6:function(){var e=this,t=this._b1,r;this._a6.length?(r=this._l8(),r[f]=function(r){var s=this[i],a=s[n]([o],d._zz.READ_WRITE),l=a.objectStore(o);l.index(u).get(t)[f]=function(t){var n=this[i];e._j6(s,l,n)}},r[l]=this._j8):this._d7()},_j6:function(e,t,n){var r=this,i=this._b1,s=this._a6.shift(),o=s._b1,u=n.schemas[o],a={fields:s._b2,primaryKey:s._b5};this._o1=s,u?s._d1?this._f7(this._g1):(e.close(),this._f3(u,a)?s._d2?this._f7(this._g1,this):this._f5():s._d2?this._g2():this._k1()):(this._j7(t,n),e.close(),this._f4())},_f3:function(e,t){var n=!1,r,i=e.fields,s=t.fields,o,u;for(r in i){o=i[r],u=s[r];if(!u||o.type!==u.type||o.index!==u.index||o.unique!==u.unique){n=!0;break}}var a=e.primaryKey,f=t.primaryKey;return!n&&(a&&(!f||a!==f)||!a&&f)&&(n=!0),n},_j7:function(e,t){var n=this._o1,r=n._b1,i=n._b5,s=n._c1;return t.schemas[r]={fields:s,primaryKey:i},req=e.put(t),req},_f4:function(){var e=this,t=this._o1,n=this._b1,r=t._b1,s=this._k3();s[c]=function(t){var n=this[i];e._j9(n)},s[f]=function(t){var n=this[i];n.close(),e._k2(e._k1,e)},s[l]=this._j8},_f5:function(){var e=this,t=this._l8();t[f]=function(t){var r=this[i],s=r[n]([a],d._zz.READ_WRITE),o=s.objectStore(a);o.clear()[f]=function(t){r.close(),e._f6()}},t[l]=this._j8},_f6:function(){var e=this,t=this._o1,n=t._b1,r=function(e,t,n){return e.add(t,n)};this._m3.l3({ORM:this,n4:!1,m4:this._f7,m5:this,m6:this._f8,m8:r})},_f7:function(e){var t=this,n=this._o1,r=n._b1,s=this._b1,o=this._k3();o[c]=function(e){var n=this[i];n.deleteObjectStore(r),t._j9(n)},o[f]=function(n){var r=this[i];r.close(),t._k2(e,t)},o[l]=this._j8},_f8:function(){var e=this,t=this._o1,n=t._b1,r=t._b2,i=function(e,t){var n,i;for(i in t)n=r[i],n?t[i]=n.ii(t[i],n.hh):delete t[i];return e.put(t)};this._m3.l3({ORM:this,n4:!0,m4:this._f9,m5:this,m8:i})},_f9:function(){var e=this,t=this._b1,r;r=this._l8(),r[f]=function(t){var r=this[i],s=r[n]([a],d._zz.READ_WRITE),o=s.objectStore(a);o.clear()[f]=function(t){r.close(),e._g1()}},r[l]=this._j8},_g1:function(){var e=this,t=this._b1,r=this._o1,s=r._b1,a;a=this._l8(),a[f]=function(r){var s=this[i],a=s[n]([o],d._zz.READ_WRITE),l=a.objectStore(o);l.index(u).get(t)[f]=function(t){var n=this[i],r;r=e._j7(l,n),r[f]=function(t){s.close(),e._g3()}}},a[l]=this._j8},_g2:function(){var e=this,t=this._b1,r=this._o1,s=r._b1,o;o=this._k4(),o[f]=function(t){var r=this[i],o=r[n]([s],d._zz.READ_WRITE),u=o.objectStore(s);u.clear()[f]=function(t){e._g3()}},o[l]=this._j8},_g3:function(){this._k1()},_j8:function(){this._k1(!1)},_j9:function(e){var t=this._o1,n=t._b2,r=t._b1,i=t._b5,s,o,u,a;a=e.createObjectStore(r,{keyPath:i,autoIncrement:!0});for(s in n)o=n[s],o.index&&(u=o.unique,a.createIndex(s,s,u?{unique:!0}:{}))},_k1:function(e){var t=this._o1,n=t._a7,r=t._a8;n.call(r,typeof e=="undefined"?!0:e),delete t._a7,delete t._a8,delete t._d1,delete t._d2,delete this._o1,this._d6()},_d7:function(){this._a5=!1},_k2:function(t,r){var s=this,a=this._b1,l=this._o2,c;c=this._l8(),c[f]=function(s){var c=this[i],h=c[n]([o],d._zz.READ_WRITE),p=h.objectStore(o);p.index(u).get(a)[f]=function(n){var s=this[i];s.branch=l,p.put(s),c.close(),t&&t.call(r||e)}}},_k3:function(){var e=this._b1,t=this._o2+1;return this._o2=t,d._yy.open(e,t)},_k4:function(){var e=this._b1,t=this._o2;return d._yy.open(e,t)},_l8:function(){return d._yy.open(s,1)},_k5:function(t){typeof t.c8!="function"&&(t.c8=d._pp.b),t.c9||(t.c9=e),this._a2.push(t);if(this._b9)return;this._b9=!0,this._k6()},_k6:function(){var e=this._a2.shift();e.type==="destroy"?this._g6(e):this._l9(e,this._exec2,this)},_exec2:function(e){var t=e.schema,n=e.type;this["_"+n](e)},_l9:function(e,t,r){var s=e.schema,o=this._k4();o[f]=function(o){var u=this[i],a=u[n]([s],d._zz[e.o7?"READ_ONLY":"READ_WRITE"]),f=a.objectStore(s);e.o5=f,e.o6=u,t.call(r,e)}},_e6:function(){this._b9=!1,this._a2.length&&this._k6()},_k7:function(e,t){e.o6.close(),e.c8.call(e.c9,t),this._e6()},_put:function(e){var t=this,n=e.o5,r=e.data,s=0,o=r.length,u=function(n){s===o?t._k7(e,n):(c(),s++)},a=function(){t._k7(e,!1)},c=function(){var e=r[s],t=n.add(e);t[f]=function(e){u(this[i])},t[l]=function(e){a()}};u()},_set:function(e){var t=this,n=e.o5,s=e.data,o=e.o4,u=e.primaryKey,a=0,c=0,h=s.length,p=function(){c===h?t._k7(e,a):(v(),c++)},d=function(){t._k7(e,!1)},v=function(){var e=s[c],t=e.data,o=e.target,h=o[u],v,m=Object.keys(o).length;h?n.get(h)[f]=function(e){var r=this[i],s;if(r){for(v in t)r[v]=t[v];s=n.put(r),s[f]=function(e){this[i]&&a++,p()},s[l]=function(e){d()}}else p()}:n.openCursor()[f]=function(e){var n=this[i];if(n){var s=n.value,u=0,c;for(v in o)s[v]===o[v]&&u++;if(u===m){for(v in t)s[v]=t[v];c=n.update(s),c[f]=function(e){this[i]&&a++,n[r]()},c[l]=function(e){d()}}else n[r]()}else p()}};p()},_del:function(e){var t=this,n=e.o5;n.count()[f]=function(n){e.o3=this[i],t._m1(e)}},_m1:function(e){var t=this,n=e.data,r=e.primaryKey,i=e.o5,s=0,o=n.length,u=function(){s===o?t._m2(e):(a(),s++)},a=function(){var e=n[s];i.delete(e[r])[f]=function(e){u()}};u()},_m2:function(e){var t=this,n=e.o5;n.count()[f]=function(n){t._k7(e,e.o3-this[i])}},_empty:function(e){var t=this,n,r=e.o5;r.count()[f]=function(s){n=this[i],r.clear()[f]=function(r){t._k7(e,n)}}},_g6:function(e){var t=this,n=e.schema,r=this._k3();r[c]=function(e){var t=this[i];t.deleteObjectStore(n)},r[f]=function(n){var r=this[i];r.close(),t._k8(e)}},_k8:function(e){var t=this,r=this._b1,s=e.schema,a=this._a3[s],l=this._l8();l[f]=function(l){var c=this[i],h=c[n]([o],d._zz.READ_WRITE),p=h.objectStore(o);p.index(u).get(r)[f]=function(n){var r=this[i];delete r.schemas[s],p.put(r)[f]=function(n){t._k2(function(){e.o6=c,delete t._a3[s],d._pp.p(a),this._k7(e,!0)},t)}}}},_getAll:function(e){var t=this,n=e.c7,s=e.p4,o=e.p2,u=e.o5,a=[];u.openCursor()[f]=function(u){var f=this[i],l;f?(l=f.value,n(l,s,o)&&a.push(l),f[r]()):t._k7(e,a)}},_getWithRange:function(e){var t=this,n=e.o8,s=e.o9,o=e.p1,u=e.o5,a=[],l=function(n){var s=this[i];s?(a.push(s.value),s[r]()):t._k7(e,a)};n?u.openCursor(o)[f]=l:u.index(s).openCursor(o)[f]=l},batch:function(n,r,i){var s=this._b1,o;if(!Array.isArray(n)||!n.length)throw t;typeof r!="function"&&(r=d._pp.b),typeof i!="object"&&(i=e),o={data:n,c8:r,c9:i};if(this._b8){this._a4.push(o);return}this._b8=!0,this._e7(o)},_e7:function(n){var r=n.data,i=["set","put","del"],s=0,o=r.length,u,a,f,l;for(;s<o;s++){a=r[s],f=a.schema;if(!(f instanceof d._b7))throw t;l=a.type.toLowerCase();if(i.indexOf(l)===-1)throw t;u=f[l](a.data),u.c8=d._pp.b,u.c9=e,this._a2.push(u)}u=this._a2[this._a2.length-1],u.c8=n.c8,u.c9=n.c9,this._b8=!1,this._b9||this._e6()},destroy:function(e,t){typeof e!="function"&&(e=d._pp.a),this._d9(e,t)}},d._b7.c3={_e8:function(){var e=this._a9,t=this._b2,n,r,i={};for(n in t)r=t[n],this._x(n),i[n]={type:r.type,index:r.index,unique:r.unique};this._c1=i,e._d5(this)},get:function(e,n,r){var i=this._a9,s=i._b1,o=this._b2,u,a={},f=this._b1,l;if(!e)throw t;for(u in o)a[u]=this._w(u,e);var c=function(e,t,n){for(var r in e)if(e[r]===n[r])return!0;return!1};l={type:"getAll",o7:!0,schema:f,c7:c,p2:a,c8:n,c9:r},i._k5(l)},getAll:function(e,t){var n=this._a9,r=n._b1,i=this._b1,s,o=function(){return!0};s={type:"getAll",o7:!0,schema:i,c7:o,c8:e,c9:t},n._k5(s)},getWithLike:function(e,n,r,i){var s=this._a9,o=s._b1,u=this._b2,a=this._b1,f,l,c,h,p,d;if(typeof n!="object")throw t;h=Object.keys(n)[0],p=n[h];if(!h||!p)throw t;h==="both"?p=new RegExp(p,"i"):h==="start"?p=new RegExp("^"+p,"i"):h==="end"&&(p=new RegExp(p+"$","i")),Array.isArray(e)||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw t}var v=function(e,t,n){var r,i=0,s=t.length;for(;i<s;i++){r=t[i];if(n.test(e[r]))return!0}return!1};d={type:"getAll",o7:!0,schema:a,c7:v,p2:p,p4:e,c8:r,c9:i},s._k5(d)},getByCallback:function(e,n,r){var i=this._a9,s=i._b1,o=this._b1,u;if(typeof e!="function")throw t;u={type:"getAll",o7:!0,schema:o,c7:e,c8:n,c9:r},i._k5(u)},getByIndex:function(e,n,r,i){var s=this._a9,o=s._b1,u=this._b1,a={},f=[],l,c,h,p,v,m;if(this._b5!==e&&this._b3.indexOf(e)===-1)throw t;this._b5===e?a.pk=e:a.index=e;if(!n)throw t;Array.isArray(n)||(n=[n]);if(n.length===1)m={type:"getWithRange",o7:!0,schema:u,o8:a.pk,o9:a.index,p1:d._a1.only(this._w(e,n[0])),c8:r,c9:i};else{for(p=0,v=n.length;p<v;p++)c=n[p],h=this._w(e,c),f.push(h);l=function(e,t,n){for(var r=0,i=t.length;r<i;r++)if(t[r]===e[n])return!0;return!1},m={type:"getAll",o7:!0,schema:u,c7:l,p2:a.pk||a.index,p4:f,c8:r,c9:i}}s._k5(m)},getByIndexWithRange:function(e,n,r,i){var s=this._a9,o=s._b1,u=this._b1,a=this._b2,f=/^(?:>|<|>=|<=|=)$/,l,c={},h={},p,v,m=a[e],g,y,b;if(this._b5!==e&&this._b3.indexOf(e)===-1)throw t;this._b5===e?c.pk=e:c.index=e,g=n["="],g&&m.kk&&(n={">=":g,"<=":g});for(l in n){if(!f.test(l))throw t;g=n[l],y=this._w(e,g);if(!y&&y!==m.hh)throw t;h[l]=y}p=Object.keys(h).length;if(p===2)try{h[">"]&&h["<"]?v=d._a1.bound(h[">"],h["<"],!0,!0):h[">="]&&h["<="]?v=d._a1.bound(h[">="],h["<="]):h[">"]&&h["<="]?v=d._a1.bound(h[">"],h["<="],!0,!1):v=d._a1.bound(h[">="],h["<"],!1,!0)}catch(w){throw t}else p===1&&(h[">"]?v=d._a1.lowerBound(h[">"],!0):h[">="]?v=d._a1.lowerBound(h[">="]):h["<"]?v=d._a1.upperBound(h["<"],!0):h["<="]?v=d._a1.upperBound(h["<="]):v=d._a1.only(h["="]));if(!v)throw t;c.keyRange=v,b={type:"getWithRange",o7:!0,schema:u,o8:c.pk,o9:c.index,p1:v,c8:r,c9:i},s._k5(b)},put:function(e,t,n){var r=this._a9,i=r._b1,s=this._b6,o,u=this._b5,a=this._b1,f,l,c,h,p=s.length,d;!Array.isArray(e)&&typeof e=="object"&&(e=[e]);for(l=0,c=e.length;l<c;l++){f=e[l];for(h=0;h<p;h++)o=s[h],f[o]=this._w(o,f[o]);f[u]<=0&&delete f[u]}d={type:"put",schema:a,primaryKey:u,data:e,c8:t,c9:n};if(r._b8)return d;r._k5(d)},set:function(e,n,r){var i=this._a9,s=this._b1,o=this._b2,u=i._b1,a,f,l,c,h,p,d,v={},m={},g=[],y,b,w;if(!e||typeof e!="object")throw t;Array.isArray(e)||(e=[e]);for(y=0,b=e.length;y<b;y++){f=e[y];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw t;if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw t}else f.target=[];c=f.target;for(p in c){d=c[p],l=this._w(p,d);if(!l&&l!==o[p].hh)throw t;v[p]=l}h=f.data;for(p in h){d=h[p],l=this._w(p,d);if(!l&&l!==o[p].hh)throw t;m[p]=l}g.push({data:m,target:v}),m={},v={}}w={type:"set",schema:s,o4:this._b3,primaryKey:this._b5,data:g,c8:n,c9:r};if(i._b8)return w;i._k5(w)},del:function(e,n,r){var i=this._a9,s=i._b1,o=this._b5,u=this._b1,a,f,l,c=[],h,p,d;if(!o)throw t;if(!e)throw t;Array.isArray(e)||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this._w(o,a);if(!f)throw t;l={},l[o]=f,c.push(l)}d={type:"del",schema:u,primaryKey:o,data:c,c8:n,c9:r};if(i._b8)return d;i._k5(d)},destroy:function(e,t){var n=this._a9,r=n._b1,i=this._b1;n._k5({type:"destroy",schema:i,c8:e,c9:t})},empty:function(e,t){var n=this._a9,r=n._b1,i=this._b1;n._k5({type:"empty",schema:i,c8:e,c9:t})}},d._a9.c4={Schema:function(e){return d._pp.t(this.constructor._a9,d._b7.c4,e,"webSQL",arguments)},_d3:function(){(function(t){t._h1=e.openDatabase(s,1,"",d._pp.ss),t._h1[n](function(e){e[h]("CREATE TABLE IF NOT EXISTS databases( id INTEGER PRIMARY KEY, name TEXT UNIQUE, schemas TEXT )"),e[h]('SELECT * FROM databases WHERE name = "'+t._b1+'"',[],function(e,n){t._d4(n)})})})(this)},_d4:function(t){var r=t.rows;this._h2=r.length?JSON.parse(r.item(0).schemas):{},this._h3=[],this._h4=e.openDatabase(this._b1,1,"",d._pp.ss),function(e){e._h4[n](function(e){e[h]("CREATE TABLE IF NOT EXISTS __currents_ids__( id INTEGER PRIMARY KEY, table_name TEXT UNIQUE, last_id INTEGER )")},null,function(){e._a7.call(e.initContext,!0),e._d6()})}(this)},_d5:function(e){this._a6.push(e),this._a5||(this._a5=!0,this._d6())},_d6:function(){var e=this,t,n=this._b1;this._a6.length?(t=this._a6.shift(),t._e9()):this._d7()},_d7:function(){this._a5=!1},_d8:function(e,t,r){var i=this,s=this._b1,o=this._h2;this._h1[n](function(e){e[h]('REPLACE INTO databases( name, schemas ) VALUES( "'+s+'", '+"'"+JSON.stringify(o)+"'"+")")},null,function(){e.call(t,r)})},_d9:function(e,t){this.destroy(e,t)},_e1:function(e,t){var r=this,i=e._b1;delete this._a3[i],delete this._h2[i],d._pp.p(e),this._h4[n](function(e){e[h]("DELETE FROM"+p+'WHERE table_name = "'+i+'"')},null,function(){r._d8(t.c8,t.c9,!0)})},_e2:function(e){},_e3:function(t){var n=t.c8,r=t.c9;n||(t.c8=d._pp.b),r||(t.c9=e);if(this._b9){t.i9?this._h3.push(t):this._a2.push(t);return}this._b9=!0,this._e4(t)},_e4:function(e){this._h5=e;var t=this,r=0,i=e.h6;Array.isArray(i)||(i=[i]);var s=e.h8?function(e,t){r+=t.rowsAffected}:d._pp.a,o=function(n,i){e.h8?e.j3=i.rowsAffected+r:e.i1?e.j3=i.insertId:e.h9&&(e.j3=i.rowsAffected),t._e5(i)},u=function(e){t._e2(e),t._e5(!1)};this._h4[n](function(t){var n,r=i.length;while(r--)n=i.shift(),t[h](n,e.h7?e.h7.shift():[],r?s:o)},u)},_e5:function(e){var t=this._h5;this._b9=!1,e||(t.j3=!1),t.j1?t.j1.call(t.j2,e,t):t.c8.call(t.c9,t.j3),this._e6()},_e6:function(){this._b9||(this._h3.length?this._e3(this._h3.shift()):this._a2.length&&!this._a5&&this._e3(this._a2.shift()))},batch:function(n,r,i){var s=this._b1,o;if(!Array.isArray(n)||!n.length)throw t;r||(r=d._pp.b),i||(i=e),o={data:n,callback:r,context:i};if(this._b8){this._a4.push(o);return}this._b8=!0,this._e7(o)},_e7:function(e){var n=e.data,r=["set","put","del"],i,s,o,u=0,a=n.length;for(;u<a;u++){i=n[u],s=i.schema;if(!(s instanceof d._b7))throw t;o=i.type.toLowerCase();if(r.indexOf(o)===-1)throw t;this._a2.push(s[o](i.data))}var f=this._a2[this._a2.length-1];f.c8=e.callback,f.c9=e.context,this._b8=!1,this._e6(),this._a4.length&&this._e7(this._a4.shift())},destroy:function(t,n){(t||d._pp.a).call(n||e,!1)}},d._b7.c4={_e8:function(){var e=this._b2,t,n,r=this._a9,i=r._b1,s=this._b1,o=[],u=this._b5,a,f={},l,c,h={};for(n in e)t=e[n],a=[],u===n?a.push("PRIMARY KEY"):(l=t.index,c=t.unique,l&&c?f[n]=!0:l&&(f[n]=!1)),this._x(n),h[n]={type:t.type,index:t.index,unique:t.unique},o.push(n+" "+e[n].mm+(a.length?" "+a.join(" "):""));this._i2='CREATE TABLE "'+s+'" ( '+o.join(", ")+" )",this._c1=h,this._j5=f,this._i4=[],r._d5(this)},_e9:function(){var e=this._a9,t=e._b1,n=this._b1,r,i,s;this._d1?(r="DROP TABLE IF EXISTS "+n,e._e3({h6:r,j2:this,j1:this._f4,i9:!0})):(s={fields:this._c1,primaryKey:this._b5},i=e._h2[n],i?this._f3(i,s):(e._h2[n]=s,this._a9._d8(this._f4,this)))},_f1:function(e,t,n){return"CREATE UNIQUE INDEX "+this._g9(e,t)+" ON "+(n||e)+" ( "+t+" )"},_f2:function(e,t,n){return"CREATE INDEX "+this._g9(e,t)+" ON "+(n||e)+" ( "+t+" )"},_g9:function(e,t){return e+"_"+t},_f3:function(e,t){var n=this._a9,r=n._b1,i=this._b1,s=!1,o=e.fields,u=t.fields,a,f,l;for(l in o){a=o[l],f=u[l];if(!f||a.type!==f.type||a.unique!==f.unique){s=!0;break}}var c=e.primaryKey,h=t.primaryKey;!s&&(c&&(!h||c!==h)||!c&&h)&&(s=!0);if(s)n._h2[i]=t,this._a9._d8(this._f5,this);else{var p=[],d=this._b3,v=this._j5;for(l in o)a=o[l],a.index&&(d.indexOf(l)===-1?p.push(l):delete v[l]);p.length||Object.keys(v).length?(this._i4=p,n._h2[i]=t,this._a9._d8(this._g8,this)):this._d2?this._g7():this._g3()}},_f4:function(){var e=this._a9,t=this._b1,n=e._b1,r=this._b5,i,s;i="CREATE TRIGGER IF NOT EXISTS update_last_id_on_"+t+" AFTER INSERT ON "+t+" BEGIN "+" UPDATE"+p+"SET last_id = ( "+" SELECT CASE "+" WHEN ( SELECT 1 WHERE NEW.rowid >= ( SELECT last_id FROM"+p+'WHERE table_name = "'+t+'" ) )'+" THEN NEW.rowid "+" WHEN ( SELECT 1 WHERE NEW.rowid < ( SELECT last_id FROM"+p+'WHERE table_name = "'+t+'" ) )'+" THEN ( SELECT last_id - 1 FROM"+p+'WHERE table_name = "'+t+'" ) '+" ELSE "+" ( SELECT last_id FROM"+p+'WHERE table_name = "'+t+'" ) '+" END "+' ) + 1 WHERE table_name = "'+t+'" ; '+" END ",s="REPLACE INTO"+p+'VALUES( null, "'+t+'", 1 )',e._e3({h6:[this._i2,i,s],j2:this,j1:this._g8,i9:!0})},_f5:function(){var e=this._a9,t=this._i2,n=this._b1,r=n+ +(new Date),i=t.replace('CREATE TABLE "'+n+'"','CREATE TABLE "'+r+'"');this._i5=0,this._i6=r,e._e3({h6:i,j2:this,j1:this._f6,i9:!0})},_f6:function(){var e=this._a9,t=e._b1,n=this._b1,r=this._i6,i=[],s=this._j5,o;for(o in s)i.push("DROP INDEX IF EXISTS "+this._g9(n,o)),s[o]?i.push(this._f1(n,o,r)):i.push(this._f2(n,o,r));i.length?e._e3({h6:i,j2:this,j1:this._f7,i9:!0}):this._f7()},_f7:function(){var e=this._a9,t=this._b1,n=this._i6,r=this._i5,i;this._d2?(this._j4=!0,this._g3()):this._d1?this._g2():this._f8()},_f8:function(){var e=this._a9,t=this._b1,n=this._i6,r="SELECT * FROM "+t+" LIMIT "+this._i5+", 500";e._e3({h6:r,j2:this,j1:this._f9,i9:!0})},_f9:function(e){var t=this._a9,n=this._b2,r=this._b1,i=this._i6,s=e.rows,o,u,a,f=[],l,c=[],h=[],p=[],d=[],v,m,g,y;if(!s.length)this._g1();else{o=s.item(0);for(u in o)n[u]&&f.push(u);for(u in n)a=n[u],f.indexOf(u)===-1&&(f.push(u),h.push(a.hh),c.push("?"));for(m=0,g=s.length;m<g;m++){v=[],l=[],o=s.item(m);for(u in o)a=n[u],a&&(l.push("?"),a.nn?v.push(o[u]):v.push(a.ii(o[u],a.hh)));p.push("INSERT INTO "+i+" ( "+f.join(", ")+" ) VALUES ( "+l.concat(c).join(", ")+" )"),d.push(v.concat(h))}y={h6:p,h7:d,j2:this,i9:!0},g===500?(this._i5+=500,y.j1=this._f8):y.j1=this._g1,t._e3(y)}},_g1:function(){var e=this._a9,t=this._b1,n="DROP TABLE "+t,r=this._i6,i="ALTER TABLE "+r+" RENAME TO "+t;e._e3({h6:[n,i],j2:this,j1:this._g2,i9:!0})},_g2:function(){var e=this._a9;this._d2&&!this._j4?this._g7():this._g3()},_g3:function(){delete this._i2,delete this._j5,delete this._j4,delete this._i6,delete this._i5,delete this._i4,delete this._d1,delete this._d2,this._a7.call(this._a8,!0),delete this._a7,delete this._a8,this._a9._d6()},_g7:function(){var e=this._a9,t=e._b1,n=this._b1,r="DELETE FROM "+n;e._e3({h6:[r],j2:this,j1:this._g3,i9:!0})},_g8:function(){var e=this._a9,t=this._b1,n=[],r=this._i4,i=this._j5,s;while(r.length)n.push("DROP INDEX "+this._g9(t,r.shift()));for(s in i)i[s]?n.push(this._f1(t,s)):n.push(this._f2(t,s));n.length?e._e3({h6:n,j2:this,j1:this._g2,i9:!0}):this._g2()},get:function(e,n,r){var i=this._a9,s=this._b2,o,u=i._b1,a=this._b1,f,l=[],c=[];if(!e)throw t;for(o in s)l.push(o+" = ?"),c.push(this._w(o,e));f="SELECT * FROM "+a+" WHERE "+l.join(" OR "),i._e3({h6:f,h7:[c],j1:this._g5,j2:this,c8:n,c9:r})},getByCallback:function(e,n,r){var i=this._a9,s=this._b2,o,u=this._b1,a;if(typeof e!="function")throw t;a="SELECT * FROM "+u,i._e3({h6:a,j2:this,j1:this._g4,c8:n,c9:r,c7:e})},_g4:function(e,t){var n=this._b2,r=e.rows,i=0,s=r.length,o,u,a=t.c7,f,l=[];for(;i<s;i++){o=r.item(i),f={};for(u in o)f[u]=n[u].jj(o[u]);a(f)&&l.push(f)}t.c8.call(t.c9,l)},getByIndex:function(e,n,r,i){var s=this._a9,o=s._b1,u=this._b1,a,f=[],l=[],c,h,p,d;if(this._b5!==e&&this._b3.indexOf(e)===-1)throw t;if(!n)throw t;Array.isArray(n)||(n=[n]);for(p=0,d=n.length;p<d;p++)c=n[p],h=this._w(e,c),f.push(e+" = ?"),l.push(h);a="SELECT * FROM "+u+(f.length?" WHERE "+f.join(" OR "):""),s._e3({h6:a,h7:[l],j2:this,j1:this._g5,c8:r,c9:i})},getByIndexWithRange:function(e,n,r,i){var s=this._a9,o=s._b1,u=this._b1,a=this._b2,f=/^(?:>|<|>=|<=|=)$/,l,c=[],h,p,d=[],v;if(this._b5!==e&&this._b3.indexOf(e)===-1)throw t;for(l in n){if(!f.test(l))throw t;h=n[l],p=this._w(e,h);if(!p&&p!==a[e].hh)throw t;c.push(e+" "+l+" ?"),d.push(p)}if(!c.length)throw t;v="SELECT * FROM "+u+" WHERE "+c.join(" AND "),s._e3({h6:v,h7:[d],j2:this,j1:this._g5,c8:r,c9:i})},getAll:function(e,t){var n=this._a9,r=this._b1,i="SELECT * FROM "+r;n._e3({h6:i,j2:this,j1:this._g5,c8:e,c9:t})},getWithLike:function(e,n,r,i){var s=this._a9,o=s._b1,u=this._b2,a=this._b1,f,l,c,h,p,d=[],v,m=[];if(typeof n!="object")throw t;h=Object.keys(n)[0],p=n[h];if(!h||!p)throw t;h==="both"?p="%"+p+"%":h==="start"?p+="%":h==="end"&&(p="%"+p),Array.isArray(e)||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw t;m.push(c+" LIKE ?"),d.push(p)}v="SELECT * FROM "+a+" WHERE "+m.join(" OR "),s._e3({h6:v,h7:[d],j2:this,j1:this._g5,c8:r,c9:i})},_g5:function(e,t){var n=this._b2,r=e.rows,i=0,s=r.length,o,u,a,f=[];for(;i<s;i++){o=r.item(i),a={};for(u in o)a[u]=n[u].jj(o[u]);f.push(a)}t.c8.call(t.c9,f)},put:function(e,t,n){var r=this._a9,i=r._b1,s=this._b6,o,u,a=this._b1,f=this._b5,l,c=[],h,d,v=[],m,g,y,b,w=s.length,E;!Array.isArray(e)&&typeof e=="object"&&(e=[e]);for(g=0,y=e.length;g<y;g++){m=e[g],l=[],h=[],d=[];for(b=0;b<w;b++)o=s[b],l.push(o),u=this._w(o,m[o]),o===f&&(!u||u<=0)?d.push("( SELECT last_id FROM"+p+'WHERE table_name = "'+a+'" )'):(h.push(u),d.push("?"));c.push(h),v.push("INSERT OR ROLLBACK INTO "+a+" ( "+l.join(", ")+" ) "+"VALUES ( "+d.join(" , ")+" )")}E={h6:v,h7:c,c8:t,c9:n,i1:!0};if(r._b8)return E;r._e3(E)},set:function(e,n,r){var i=this._a9,s=this._b1,o=i._b1,u=this._b2,a,f,l,c,h,p,d,v,m,g=[],y,b=[],w,E,S;if(!e||typeof e!="object")throw t;Array.isArray(e)||(e=[e]);for(w=0,E=e.length;w<E;w++){f=e[w],y=[],m=[],v=[];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw t;if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw t}else f.target=[];h=f.data;for(p in h){d=h[p],l=this._w(p,d);if(!l&&l!==u[p].hh)throw t;m.push(p+" = ?"),y.push(l)}c=f.target;for(p in c){d=c[p],l=this._w(p,d);if(!l&&l!==u[p].hh)throw t;v.push(p+" = ?"),y.push(l)}b.push("UPDATE OR ROLLBACK "+s+" SET "+m.join(", ")+(v.length?" WHERE "+v.join(" AND "):"")),g.push(y)}S={h6:b,h7:g,h8:!0,c8:n,c9:r};if(i._b8)return S;i._e3(S)},del:function(e,n,r){var i=this._a9,s=i._b1,o=this._b5,u=this._b1,a,f,l,c=[],h,p,d;if(!o)throw t;if(!e)throw t;Array.isArray(e)||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this._w(o,a);if(!f)throw t;c.push(o+" = "+f)}l="DELETE FROM "+u+(c.length?" WHERE "+c.join(" OR "):""),d={h6:l,h9:!0,c8:n,c9:r};if(i._b8)return d;i._e3(d)},destroy:function(e,t){var n=this._a9,r=this._b1,i="DROP TABLE "+r;n._e3({j1:this._g6,j2:this,h6:i,c8:e,c9:t})},_g6:function(e,t){var n=this._a9;e&&n._e1(this,t)},empty:function(e,t){var n=this._a9,r=this._b1,i="DELETE FROM "+r;n._e3({h6:i,h9:!0,c8:e,c9:t})}},e.MSQTA=d})(window);