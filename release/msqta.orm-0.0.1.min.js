(function(e){var t="MSQTA-ORM!",n="__msqta__",r="databases",i="name",s="dump",o="onsuccess",u="onerror",a="onupgradeneeded",f=f||{};f._yy=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,f._zz=e.IDBTransaction||e.webkitIDBTransaction||e.msIDBTransaction,f._zz&&(!f._zz.READ_WRITE||!f._zz.READ_ONLY)&&(f._zz={READ_WRITE:"readwrite",READ_ONLY:"readonly"}),f._a1=e.IDBKeyRange||e.webkitIDBKeyRange||e.msIDBKeyRange,f._pp={a:function(){},b:function(){},ss:2097152,c:function(e){return e==="object"||e==="array"?this.d:e==="datetime"?this.h:e==="date"?this.e:e==="time"?this.g:e==="boolean"?this.n:this.o},d:function(e){return JSON.parse(e)},e:function(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2],0,0,0,0)},g:function(e){var t=new Date,n=e.split(":");return t.setHours(n[0]),t.setMinutes(n[1]),t.setSeconds(n[2]),t},h:function(e){var t=e.split(" "),n=t[0].split("-"),r=t[1].split(":");return new Date(n[0],n[1]-1,n[2],r[0],r[1],r[2],0)},n:function(e){return!!e},o:function(e){return e},xx:["batch","destroy"],ww:["del","destroy","empty","get","getAll","getWithLike","getByCallback","getByIndex","getByIndexWithRange","put","set"],p:function(e){var t=this.ww,n=this.a,r,i;for(r=0,i=t.length;r<i;r++)e[t[r]]=n},r:function(e){var t=this.xx,n=this.ww,r,i,s,o=this.a,u,a;for(u=0,a=t.length;u<a;u++)e[t[u]]=o;s=e._a3;for(r in s){i=s[r];for(u=0,a=n.length;u<a;u++)i[n[u]]=o}},s:function(t){t=t.toLowerCase();if(t==="websql"){if(e.openDatabase)return f._a9.c4}else if(t==="indexeddb"&&f._yy)return f._a9.c3;if(e.openDatabase)return f._a9.c4;if(f._yy)return f._a9.c3},t:function(n,r,i,s,o){var u={},a;if(!n)throw t;return typeof o[1]=="function"?(u.callback=o[1],u.context=o[2]||e):typeof o[1]=="object"&&(u=o[1]),f._b7.prototype=r,a=new f._b7(n,i,u),a._x=f._pp.v,a._w=f._pp.u,a._c2=s,a._e8(),a},u:function(e,n){var r=this._b2,i=this._b1,s=r[e];if(!s)throw t;return s.ii(n,s.hh)},tt:{string:"TEXT",integer:"INTEGER",object:"TEXT",array:"TEXT",date:"DATE",time:"TIME",datetime:"DATETIME","float":"REAL","boolean":"INTEGER"},uu:{string:"",integer:0,object:"{}",array:"[]",date:"0000-00-00",time:"00:00:00",datetime:"0000-00-00 00:00:00","float":0,"boolean":0},vv:{string:"","int":0,integer:0,text:"",object:{},array:[],date:new Date(0,0,0),time:new Date(0,0,0),datetime:new Date(0,0,0),"float":0,"boolean":!1},v:function(e){var n=this._c2,r=f._pp.tt,i=n==="webSQL"?f._pp.uu:f._pp.vv,s=this._b1,o=this._a9._b1,u=this._b2[e],a,l=u.type,c=r[l],h=u.allowNull;if(!c)throw t;a=this._b2[e],a.hh=h?n==="webSQL"?null:null:i[l],a.ii=n==="webSQL"?f._pp.qq.y(l):f._pp.rr.y(l),a.jj=f._pp.c(l),a.kk=l==="date"||l==="time"||l==="datetime",n==="webSQL"&&(a.ll=l,a.mm=c+(h?" NULL":""),a.nn=l==="object"||l==="array")}},f._pp.qq={y:function(e){if(e==="string"||e==="text")return this.z;if(e==="int"||e==="integer"||e==="float")return this.aa;if(e==="object"||e==="array")return this.ee;if(e==="date")return this.bb;if(e==="time")return this.cc;if(e==="datetime")return this.dd;if(e==="boolean")return this.ff},z:function(e,t){return e||t},aa:function(e,t){return e-=0,e?e:t},bb:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:(n=e.getMonth()+1,r=e.getDate(),e.getFullYear()+"-"+(n<10?"0"+n:n)+"-"+(r<10?"0"+r:r)):(n=/^(\d{4}-\d{2}-\d{2})/.exec(e),n?n[1]:t)},cc:function(e,t){if(e instanceof Date)return isNaN(e-0)?t:e.toTimeString().substring(0,8);var n=/^(?:\d{4}-\d{2}-\d{2}(?: |T))?(\d{2}:\d{2})(:\d{2})[^Z]+Z|(:\d{2})?$/.exec(e);return n?n[1]+(n[2]||n[3]||":00"):t},dd:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:(n=e.getMonth()+1,r=e.getDate(),e.getFullYear()+"-"+(n<10?"0"+n:n)+"-"+(r<10?"0"+r:r)+" "+e.toTimeString().substring(0,8)):(n=/^(\d{4}-\d{2}-\d{2})(?: |T)(\d{2}:\d{2})(?:(:\d{2})[^Z]+Z|(:\d{2}))?$/.exec(e),n?n[1]+" "+n[2]+(n[3]||n[4]||":00"):t)},ee:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object")return e?typeof e=="string"?"'"+e+"'":e:t;try{return JSON.stringify(e)}catch(n){return t}},ff:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?1:e==="false"||e==="0"?0:t):e===1?1:e===0?0:t},gg:function(e){return e}},f._pp.rr={oo:function(e){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(e)?new Date(e):!1},y:function(e){if(e==="string"||e==="text")return this.z;if(e==="int"||e==="integer"||e==="float")return this.aa;if(e==="object"||e==="array")return this.ee;if(e==="date")return this.bb;if(e==="time")return this.cc;if(e==="datetime")return this.dd;if(e==="boolean")return this.ff},z:function(e,t){return e?e+"":t},aa:function(e,t){return e-=0,e?e:t},bb:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:e:(r=f._pp.rr.oo(e))?r:(n=/^(\d{4}-\d{2}-\d{2})/.exec(e),n?(n=n[1].split("-"),new Date(n[0],n[1]-1,n[2],0,0,0,0)):t)},cc:function(e,t){var n,r;if(e instanceof Date)return isNaN(e-0)?t:e;if(r=f._pp.rr.oo(e))return r;n=/^(\d{4}-\d{2}-\d{2} )?(\d{2}:\d{2})(:\d{2})?$/.exec(e);if(!n)return t;var i,s,o;return n[1]?(i=n[1].split("-"),i[1]=i[1]-1):(i=new Date,i=[i.getFullYear(),i.getMonth(),i.getDate()]),s=n[2].split(":"),o=n[3]||0,new Date(i[0],i[1],i[2],s[0],s[1],o,0)},dd:function(e,t){var n,r;if(e instanceof Date)return isNaN(e-0)?e:t;if(r=f._pp.rr.oo(e))return r;n=/^(\d{4}-\d{2}-\d{2})(?: |T)(\d{2}:\d{2})(?::(\d{2})[^Z]+Z|:(\d{2}))?$/.exec(e);if(!n)return t;var i,s,o;return i=n[1].split("-"),s=n[2].split(":"),o=n[3]||n[4]||0,new Date(i[0],i[1]-1,i[2],s[0],s[1],o,0)},ee:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object"){if(!e)return t;if(typeof e=="string")try{return JSON.parse('"'+e+'"')}catch(n){return t}return e}return e},ff:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?!0:e==="false"||e==="0"?!1:t):e===1?!0:e===0?!1:t},gg:function(e){return e}},f.ORM=function(n,r,i){typeof n=="string"&&(n={name:n});if(!n.name)throw t;return n.callback=r||f._pp.b,n.context=i||e,f._a9.prototype=f._pp.s(n.prefered||""),new f._a9(n)},f._a9=function(e){var t=this._b1=e.name;this._a2=[],this._a3={},this._a4=[],this.Schema._a9=this,this._a5=!0,this._a6=[],this._a7=e.callback,this._a8=e.context,e.forceDestroy?this._d9(this._d3,this):this._d3()},f._b7=function(n,r,i){var s=n._b1,o=r.name;if(n._a3[o]&&!i.forceDestroy)throw t;var u=r.fields;if(typeof u!="object"||!Object.keys(u).length)throw t;var a=r.primaryKey;if(!a||a&&!u[a])throw t;if(u[a].type!=="integer")throw t;u[a].allowNull=!0;var l,c,h=[],p=[];for(l in u){c=u[l];if(c.index){if(!/^(integer|float|string|date|time|datetime|boolean)$/.test(c.type))throw t;h.push(l),c.index=!0}else c.index=!1;c.unique?(h.indexOf(l)===-1&&(h.push(l),c.index=!0),p.push(l),c.unique=!0):c.unique=!1}n._a3[o]=this,this._a9=n,this._b1=o,this._b2=u,this._b3=h,this._b4=p,this._b5=a,this._b6=Object.keys(u),this._d1=i.forceDestroy,this._d2=this._d1?!1:i.forceEmpty,this._a7=i.callback||f._pp.b,this._a8=i.context||e},f._a9.c3={Schema:function(e){return f._pp.t(this.constructor._a9,f._b7.c3,e,"indexedDB",arguments)},_m6:{l6:function(e){var t=e.ORM,n=t._o4,r=n._b1;this.ORM=t,this.n4=0,this.n3=!1,this.n5=null,this.n6=null,this.m7=e.m7,this.m8=e.m8,this.m9=e.m9,this.n2=e.n2,e.n7?(this.n9=this.l4,this.o1=s,this.o2=this.l3,this.n8=r):(this.n9=this.l3,this.o1=r,this.o2=this.l4,this.n8=s),this.l5()},l4:function(){return this.ORM._m2()},l3:function(){return this.ORM._k5()},l5:function(){var e=this,t=e.ORM,n=e.o1,r=e.n9();r[o]=function(t){e.n6=this.result;var r=e.n6.transaction([n],f._zz.READ_ONLY),i=r.objectStore(n),s=i.openCursor();s._n1=e,s[o]=e.l7},r[u]=t._j9},l7:function(e){var t=this._n1,n=t.n6,r=this.result;r?t.n3?(t.n3=!1,n.close(),t.l8(r.value)):t.n4===0?(t.n4++,n.close(),t.l8(r.value)):(t.n3=!0,r.advance(t.n4),t.n4++):(n.close(),t.m1())},l8:function(e){var t=this,n=t.ORM,r=t.n8,i=t.o2();i[o]=function(n){t.n5=this.result;var i=t.n5.transaction([r],f._zz.READ_WRITE),s=i.objectStore(r),a=t.n2(s,e,t.n4);a._n1=t,a[o]=t.l9,a[u]=t.l9},i[u]=n._j9},l9:function(e){var t=this._n1;t.n5.close(),t.l5()},m1:function(){this.m7.call(this.m8,this.m9)}},_d3:function(){var e=this,t=this._b1,n=this._m2();n[a]=function(e){var t=this.result,n;n=t.createObjectStore(r,{keyPath:"id",autoIncrement:!0}),n.createIndex(i,i,{unique:!0}),t.createObjectStore(s)},n[o]=function(n){var s=this.result,u=s.transaction([r],f._zz.READ_WRITE),a=u.objectStore(r);a.index(i).get(t)[o]=function(n){var r=this.result;if(!r)e._o5=0,a.add({name:t,branch:0,schemas:{}})[o]=function(t){s.close(),e._e8()};else{s.close();var i=r.branch;e._o5=i,e._e8()}}},n[u]=function(e){this._a7.call(this._a8,null)}},_e8:function(){this._a7.call(this._a8,!0),this._d6()},_d9:function(t,n){var s=this,a=this._b1,l=f._yy.deleteDatabase(a);l[o]=function(u){l=s._m2(),l[o]=function(u){var l=this.result,c=l.transaction([r],f._zz.READ_WRITE),h=c.objectStore(r);h.index(i).get(a)[o]=function(r){var i=this.result;h.delete(i.id)[o]=function(r){l.close(),f._pp.r(s),t.call(n||e,!0)}}}},l[u]=function(r){t.call(n||e,!1)}},_d5:function(e){this._a6.push(e),this._a5||this._d6()},_d6:function(){var e=this,t=this._b1,n;this._a6.length?(n=this._m2(),n[o]=function(n){var s=this.result,u=s.transaction([r],f._zz.READ_WRITE),a=u.objectStore(r);a.index(i).get(t)[o]=function(t){var n=this.result;e._j7(s,a,n)}},n[u]=this._j9):this._d7()},_j7:function(e,t,n){var r=this,i=this._b1,s=this._a6.shift(),o=s._b1,u=n.schemas[o],a={fields:s._b2,primaryKey:s._b5};this._o4=s,u?s._d1?this._f7(this._g1):(e.close(),this._f3(u,a)?s._d2?this._f7(this._g1,this):this._f5():s._d2?this._g2():this._k2()):(this._j8(t,n),e.close(),this._f4())},_f3:function(e,t){var n=!1,r=e.fields,i=t.fields,s,o;for(fieldName in r){s=r[fieldName],o=i[fieldName];if(!o||s.type!==o.type||s.index!==o.index||s.unique!==o.unique){n=!0;break}}var u=e.primaryKey,a=t.primaryKey;return!n&&(u&&(!a||u!==a)||!u&&a)&&(n=!0),n},_j8:function(e,t){var n=this._o4,r=n._b1,i=n._b5,s=n._c1;return t.schemas[r]={fields:s,primaryKey:i},req=e.put(t),req},_f4:function(){var e=this,t=this._o4,n=this._b1,r=t._b1,i=this._k4();i[a]=function(t){var n=this.result;e._k1(n)},i[o]=function(t){var n=this.result;n.close(),e._k3(e._k2,e)},i[u]=this._j9},_f5:function(){var e=this,t=this._m2();t[o]=function(t){var n=this.result,r=n.transaction([s],f._zz.READ_WRITE),i=r.objectStore(s);i.clear()[o]=function(t){n.close(),e._f6()}},t[u]=this._j9},_f6:function(){var e=this,t=this._o4,n=t._b1,r=function(e,t,n){return e.add(t,n)};this._m6.l6({ORM:this,n7:!1,m7:this._f7,m8:this,m9:this._f8,n2:r})},_f7:function(e){var t=this,n=this._o4,r=n._b1,i=this._b1,s=this._k4();s[a]=function(e){var n=this.result;n.deleteObjectStore(r),t._k1(n)},s[o]=function(n){var r=this.result;r.close(),t._k3(e,t)},s[u]=this._j9},_f8:function(){var e=this,t=this._o4,n=t._b1,r=t._b2,i=function(e,t){var n,i;for(i in t)n=r[i],n?t[i]=n.ii(t[i],n.hh):delete t[i];return e.put(t)};this._m6.l6({ORM:this,n7:!0,m7:this._f9,m8:this,n2:i})},_f9:function(){var e=this,t=this._b1,n;n=this._m2(),n[o]=function(t){var n=this.result,r=n.transaction([s],f._zz.READ_WRITE),i=r.objectStore(s);i.clear()[o]=function(t){n.close(),e._g1()}},n[u]=this._j9},_g1:function(){var e=this,t=this._b1,n=this._o4,s=n._b1,a;a=this._m2(),a[o]=function(n){var s=this.result,u=s.transaction([r],f._zz.READ_WRITE),a=u.objectStore(r);a.index(i).get(t)[o]=function(t){var n=this.result,r;r=e._j8(a,n),r[o]=function(t){s.close(),e._g3()}}},a[u]=this._j9},_g2:function(){var e=this,t=this._b1,n=this._o4,r=n._b1,i;i=this._k5(),i[o]=function(t){var n=this.result,i=n.transaction([r],f._zz.READ_WRITE),s=i.objectStore(r);s.clear()[o]=function(t){e._g3()}},i[u]=this._j9},_g3:function(){this._k2()},_j9:function(){this._k2(!1)},_k1:function(e){var t=this._o4,n=t._b2,r=t._b1,i=t._b5,s,o,u,a;a=e.createObjectStore(r,{keyPath:i,autoIncrement:!0});for(s in n)o=n[s],o.index&&(u=o.unique,a.createIndex(s,s,u?{unique:!0}:{}))},_k2:function(e){var t=this._o4,n=t._a7,r=t._a8;n.call(r,typeof e=="undefined"?!0:e),delete t._a7,delete t._a8,delete t._d1,delete t._d2,delete this._o4,this._d6()},_d7:function(){this._a5=!1},_k3:function(t,n){var s=this,u=this._b1,a=this._o5,l;l=this._m2(),l[o]=function(s){var l=this.result,c=l.transaction([r],f._zz.READ_WRITE),h=c.objectStore(r);h.index(i).get(u)[o]=function(r){var i=this.result;i.branch=a,h.put(i),l.close(),t&&t.call(n||e)}}},_k4:function(){var e=this._b1,t=this._o5+1;return this._o5=t,f._yy.open(e,t)},_k5:function(){var e=this._b1,t=this._o5;return f._yy.open(e,t)},_m2:function(){return f._yy.open(n,1)},_k6:function(t){typeof t.c8!="function"&&(t.c8=f._pp.b),t.c9||(t.c9=e),this._a2.push(t);if(this._b9)return;this._b9=!0,this._k7()},_k7:function(){var e=this._a2.shift();e.type==="destroy"?this._g6(e):this._m3(e,this._exec2,this)},_exec2:function(e){var t=e.schema,n=e.type;this["_"+n](e)},_m3:function(e,t,n){var r=e.schema,i=this._k5();i[o]=function(i){var s=this.result,o=e.type,u=s.transaction([r],f._zz.READ_WRITE);objectStore=u.objectStore(r),e.o8=objectStore,e.o9=s,t.call(n,e)}},_e6:function(){this._b9=!1,this._a2.length&&this._k7()},_k8:function(e,t){e.o9.close(),e.c8.call(e.c9,t),this._e6()},_put:function(e){var t=this,n=e.o8,r=e.data,i=0,s=r.length,a=function(n){i===s?t._k8(e,n):(l(),i++)},f=function(){t._k8(e,!1)},l=function(){var e=r[i],t=n.add(e);t[o]=function(e){a(this.result)},t[u]=function(e){f()}};a()},_set:function(e){var t=this,n=e.o8,r=e.data,i=e.o7,s=e.primaryKey,a=0,f=0,l=r.length,c=function(){f===l?t._k8(e,a):(p(),f++)},h=function(){t._k8(e,!1)},p=function(){var e=r[f],t=e.data,i=e.target,l=i[s],p,d=Object.keys(i).length;l?n.get(l)[o]=function(e){var r=this.result,i;if(r){for(p in t)r[p]=t[p];i=n.put(r),i[o]=function(e){this.result&&a++,c()},i[u]=function(e){h()}}else c()}:n.openCursor()[o]=function(e){var n=this.result;if(n){var r=n.value,s=0,f;for(p in i)r[p]===i[p]&&s++;if(s===d){for(p in t)r[p]=t[p];f=n.update(r),f[o]=function(e){this.result&&a++,n.continue()},f[u]=function(e){h()}}else n.continue()}else c()}};c()},_del:function(e){var t=this,n=e.o8;n.count()[o]=function(n){e.o6=this.result,t._m4(e)}},_m4:function(e){var t=this,n=e.data,r=e.primaryKey,i=0,s=n.length,u=function(){i===s?t._m5(e):(a(),i++)},a=function(){var e=n[i];objectStore.delete(e[r])[o]=function(e){u()}};u()},_m5:function(e){var t=this,n=e.o8;n.count()[o]=function(n){t._k8(e,e.o6-this.result)}},_empty:function(e){var t=this,n,r=e.o8;r.count()[o]=function(i){n=this.result,r.clear()[o]=function(r){t._k8(e,n)}}},_g6:function(e){var t=this,n=e.schema,r=this._k4();r[a]=function(e){var t=this.result;t.deleteObjectStore(n)},r[o]=function(n){var r=this.result;r.close(),t._k9(e)}},_k9:function(e){var t=this,n=this._b1,s=e.schema,u=this._a3[s],a=this._m2();a[o]=function(a){var l=this.result,c=l.transaction([r],f._zz.READ_WRITE),h=c.objectStore(r);h.index(i).get(n)[o]=function(n){var r=this.result;delete r.schemas[s],h.put(r)[o]=function(n){t._k3(function(){e.o9=l,delete t._a3[s],f._pp.p(u),this._k8(e,!0)},t)}}}},batch:function(n,r,i){var s=this._b1,o;if(!(n instanceof Array)||!n.length)throw t;typeof r!="function"&&(r=f._pp.b),typeof i!="object"&&(i=e),o={data:n,c8:r,c9:i};if(this._b8){this._a4.push(o);return}this._b8=!0,this._e7(o)},_e7:function(n){var r=n.data,i=["set","put","del"],s=0,o=r.length,u,a,l,c;for(;s<o;s++){a=r[s],l=a.schema;if(!(l instanceof f._b7))throw t;c=a.type.toLowerCase();if(i.indexOf(c)===-1)throw t;u=l[c](a.data),u.c8=f._pp.b,u.c9=e,this._a2.push(u)}u=this._a2[this._a2.length-1],u.c8=n.c8,u.c9=n.c9,this._b8=!1,this._b9||this._e6()},destroy:function(e,t){typeof e!="function"&&(e=f._pp.a),this._d9(e,t)}},f._b7.c3={_e8:function(){var e=this._a9,t=this._b2,n,r,i={};for(n in t)r=t[n],this._x(n),i[n]={type:r.type,index:r.index,unique:r.unique};this._c1=i,e._d5(this)},get:function(e,n,r){var i=this._a9,s=i._b1,o=this._b2,u,a={},f=this._b1;if(!e)throw t;for(u in o)a[u]=this._w(u,e);var l=function(e,t,n){for(var r in e)if(e[r]===n[r])return!0;return!1};this._l1({callback:l,comparator:a,fields:null},n,r)},getAll:function(e,t){var n=this._a9,r=n._b1,i=this._b1,s=function(){return!0};this._l1({callback:s,comparator:null,fields:null},e,t)},getWithLike:function(e,n,r,i){var s=this._a9,o=s._b1,u=this._b2,a=this._b1,f,l,c,h,p;if(typeof n!="object")throw t;h=Object.keys(n)[0],p=n[h];if(!h||!p)throw t;h==="both"?p=new RegExp(p,"i"):h==="start"?p=new RegExp("^"+p,"i"):h==="end"&&(p=new RegExp(p+"$","i")),e instanceof Array||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw t}var d=function(e,t,n){var r,i=0,s=t.length;for(;i<s;i++){r=t[i];if(n.test(e[r]))return!0}return!1};this._l1({callback:d,comparator:p,fields:e},r,i)},getByCallback:function(e,n,r){var i=this._a9,s=i._b1,o=this._b1;if(typeof e!="function")throw t;this._l1({callback:e,comparator:null,fields:null},n,r)},_l1:function(t,n,r){var i={filterData:t,c8:n||f._pp.b,c9:r||e,self:this};(function(e){var t=e.self,n=t._a9,r=n._k5(),i,s=n._b1,u=t._b1,a=e.filterData,l=a.callback,c=a.comparator,h=a.fields,p=[];r[o]=function(t){var n=this.result,r=n.transaction([u],f._zz.READ_ONLY);objectStore=r.objectStore(u),i=n,objectStore.openCursor()[o]=function(t){var n=this.result,r;n?(r=n.value,l(r,h,c)&&p.push(r),n.continue()):(i.close(),e.c8.call(e.c9,p))}}})(i)},getByIndex:function(e,n,r,i){var s=this._a9,o=s._b1,u=this._b1,a={},l=[],c,h,p,d,v;if(this._b5!==e&&this._b3.indexOf(e)===-1)throw t;this._b5===e?a.pk=e:a.index=e;if(!n)throw t;n instanceof Array||(n=[n]);if(n.length===1)a.keyRange=f._a1.only(this._w(e,n[0])),this._l2(a,r,i);else{for(d=0,v=n.length;d<v;d++)h=n[d],p=this._w(e,h),l.push(p);c=function(e,t,n){for(var r=0,i=t.length;r<i;r++)if(t[r]===e[n])return!0;return!1},this._l1({callback:c,comparator:a.pk||a.index,fields:l},r,i)}},getByIndexWithRange:function(e,n,r,i){var s=this._a9,o=s._b1,u=this._b1,a=this._b2,l=/^(?:>|<|>=|<=|=)$/,c,h={},p={},d,v,m=a[e],g,y;if(this._b5!==e&&this._b3.indexOf(e)===-1)throw t;this._b5===e?h.pk=e:h.index=e,g=n["="],g&&m.kk&&(n={">=":g,"<=":g});for(c in n){if(!l.test(c))throw t;g=n[c],y=this._w(e,g);if(!y&&y!==m.hh)throw t;p[c]=y}d=Object.keys(p).length;if(d===2)try{p[">"]&&p["<"]?v=f._a1.bound(p[">"],p["<"],!0,!0):p[">="]&&p["<="]?v=f._a1.bound(p[">="],p["<="]):p[">"]&&p["<="]?v=f._a1.bound(p[">"],p["<="],!0,!1):v=f._a1.bound(p[">="],p["<"],!1,!0)}catch(b){throw t}else d===1&&(p[">"]?v=f._a1.lowerBound(p[">"],!0):p[">="]?v=f._a1.lowerBound(p[">="]):p["<"]?v=f._a1.upperBound(p["<"],!0):p["<="]?v=f._a1.upperBound(p["<="]):v=f._a1.only(p["="]));if(!v)throw t;h.keyRange=v,this._l2(h,r,i)},_l2:function(t,n,r){var i={range:t,c8:n||f._pp.b,c9:r||e,self:this};(function(e){var t=e.self,n=t._a9,r=e.range,i=r.pk,s=r.index,u=r.keyRange,a=n._k5(),l,c=n._b1,h=t._b1,p=[],d=function(t){var n=this.result;n?(p.push(n.value),n.continue()):(l.close(),e.c8.call(e.c9,p))};a[o]=function(e){var t=this.result,n=t.transaction([h],f._zz.READ_ONLY);objectStore=n.objectStore(h),l=t,i?objectStore.openCursor(u)[o]=d:objectStore.index(s).openCursor(u)[o]=d}})(i)},put:function(e,t,n){var r=this._a9,i=r._b1,s=this._b6,o,u=this._b5,a=this._b1,f,l,c,h,p=s.length,d;!(e instanceof Array)&&typeof e=="object"&&(e=[e]);for(l=0,c=e.length;l<c;l++){f=e[l];for(h=0;h<p;h++)o=s[h],f[o]=this._w(o,f[o]);f[u]<=0&&delete f[u]}d={type:"put",schema:a,primaryKey:u,data:e,c8:t,c9:n};if(r._b8)return d;r._k6(d)},set:function(e,n,r){var i=this._a9,s=this._b1,o=this._b2,u=i._b1,a,f,l,c,h,p,d,v={},m={},g=[],y,b,w;if(!e||typeof e!="object")throw t;e instanceof Array||(e=[e]);for(y=0,b=e.length;y<b;y++){f=e[y];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw t;if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw t}else f.target=[];c=f.target;for(p in c){d=c[p],l=this._w(p,d);if(!l&&l!==o[p].hh)throw t;v[p]=l}h=f.data;for(p in h){d=h[p],l=this._w(p,d);if(!l&&l!==o[p].hh)throw t;m[p]=l}g.push({data:m,target:v}),m={},v={}}w={type:"set",schema:s,o7:this._b3,primaryKey:this._b5,data:g,c8:n,c9:r};if(i._b8)return w;i._k6(w)},del:function(e,n,r){var i=this._a9,s=i._b1,o=this._b5,u=this._b1,a,f,l,c=[],h,p,d;if(!o)throw t;if(!e)throw t;e instanceof Array||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this._w(o,a);if(!f)throw t;l={},l[o]=f,c.push(l)}d={type:"del",schema:u,primaryKey:o,data:c,c8:n,c9:r};if(i._b8)return d;i._k6(d)},destroy:function(e,t){var n=this._a9,r=n._b1,i=this._b1;n._k6({type:"destroy",schema:i,c8:e,c9:t})},empty:function(e,t){var n=this._a9,r=n._b1,i=this._b1;n._k6({type:"empty",schema:i,c8:e,c9:t})}},f._a9.c4={Schema:function(e){return f._pp.t(this.constructor._a9,f._b7.c4,e,"webSQL",arguments)},_d3:function(){(function(t){t._h2=e.openDatabase(n,1,"",f._pp.ss),t._h2.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS databases( id INTEGER PRIMARY KEY, name TEXT UNIQUE, schemas TEXT )"),e.executeSql('SELECT * FROM databases WHERE name = "'+t._b1+'"',[],function(e,n){t._d4(n)})})})(this)},_d4:function(t){var n=t.rows;this._h3=n.length?JSON.parse(n.item(0).schemas):{},this._h4=[],this._h5=e.openDatabase(this._b1,1,"",f._pp.ss),this._a7.call(this.initContext,!0),this._d6()},_d5:function(e){this._a6.push(e),this._a5||(this._a5=!0,this._d6())},_d6:function(){var e=this,t=this._b1;this._a6.length?this._a6.shift()._e9():this._d7()},_d7:function(){this._a5=!1},_d8:function(e,t,n){var r=this,i=this._b1,s=this._h3;this._h2.transaction(function(r){r.executeSql('REPLACE INTO databases( name, schemas ) VALUES( "'+i+'", '+"'"+JSON.stringify(s)+"'"+")",[],function(){e.call(t,n)})})},_d9:function(e,t){this.destroy(e,t)},_e1:function(e,t){var n=e._b1;delete this._a3[n],delete this._h3[n],f._pp.p(e),this._d8(t.c8,t.c9,!0)},_e2:function(e){},_e3:function(n){var r=n.c8,i=n.c9;if(r&&typeof r!="function")throw t;r||(n.c8=f._pp.b);if(i&&typeof i!="object")throw t;i||(n.c9=e);if(this._b9){n.j1?this._h4.push(n):this._a2.push(n);return}this._b9=!0,this._e4(n)},_e4:function(e){this._h6=e;var t=this,n=0,r=e.h7;r instanceof Array||(r=[r]);var i=e.h9?function(e,t){n+=t.rowsAffected}:f._pp.a,s=function(r,i){e.h9?e.j4=i.rowsAffected+n:e.i2?e.j4=i.insertId:e.i1&&(e.j4=i.rowsAffected),t._e5(i)},o=function(e){t._e2(e),t._e5(!1)};this._h5.transaction(function(t){var n,o=r.length;while(o--)n=r.shift(),t.executeSql(n,e.h8?e.h8.shift():[],o?i:s)},o)},_e5:function(e){queryData=this._h6,this._b9=!1,e||(queryData.j4=!1),queryData.j2?queryData.j2.call(queryData.j3,e,queryData):queryData.c8.call(queryData.c9,queryData.j4),this._e6()},_e6:function(){this._b9||(this._h4.length?this._e3(this._h4.shift()):this._a2.length&&!this._a5&&this._e3(this._a2.shift()))},batch:function(n,r,i){var s=this._b1,o;if(!(n instanceof Array)||!n.length)throw t;typeof r!="function"&&(r=f._pp.b),typeof i!="object"&&(i=e),o={data:n,callback:r,context:i};if(this._b8){this._a4.push(o);return}this._b8=!0,this._e7(o)},_e7:function(e){var n=e.data,r=["set","put","del"],i,s,o,u=0,a=n.length;for(;u<a;u++){i=n[u],s=i.schema;if(!(s instanceof f._b7))throw t;o=i.type.toLowerCase();if(r.indexOf(o)===-1)throw t;this._a2.push(s[o](i.data))}var l=this._a2[this._a2.length-1];l.c8=e.callback,l.c9=e.context,this._b8=!1,this._e6(),this._a4.length&&this._e7(this._a4.shift())},destroy:function(t,n){(t||f._pp.a).call(n||e,!1)}},f._b7.c4={_e8:function(){var e=this._b2,t,n,r=this._a9,i=r._b1,s=this._b1,o=[],u=this._b5,a,f={},l,c,h={};for(n in e)t=e[n],a=[],u===n?a.push("PRIMARY KEY"):(l=t.index,c=t.unique,l&&c?f[n]=!0:l&&(f[n]=!1)),this._x(n),h[n]={type:t.type,index:t.index,unique:t.unique},o.push(n+" "+e[n].mm+(a.length?" "+a.join(" "):""));this._i3='CREATE TABLE "'+s+'" ( '+o.join(", ")+" )",this._c1=h,this._j6=f,this._i5=[],r._d5(this)},_e9:function(){var e=this._a9,t=e._b1,n=this._b1,r=this._i3,i,s,o;this._d1?(i="DROP TABLE IF EXISTS "+n,e._e3({h7:[i,r],j3:this,j2:this._f6,j1:!0})):(o={fields:this._c1,primaryKey:this._b5},s=e._h3[n],s?this._f3(s,o):(e._h3[n]=o,this._a9._d8(this._f4,this)))},_f1:function(e,t,n){return"CREATE UNIQUE INDEX "+this._h1(e,t)+" ON "+(n||e)+" ( "+t+" )"},_f2:function(e,t,n){return"CREATE INDEX "+this._h1(e,t)+" ON "+(n||e)+" ( "+t+" )"},_h1:function(e,t){return e+"_"+t},_f3:function(e,t){var n=this._a9,r=n._b1,i=this._b1,s=!1,o=e.fields,u=t.fields,a,f,l;for(l in o){a=o[l],f=u[l];if(!f||a.type!==f.type||a.unique!==f.unique){s=!0;break}}var c=e.primaryKey,h=t.primaryKey;!s&&(c&&(!h||c!==h)||!c&&h)&&(s=!0);if(s)n._h3[i]=t,this._a9._d8(this._f5,this);else{var p=[],d=this._b3,v=this._j6;for(l in o)a=o[l],a.index&&(d.indexOf(l)===-1?p.push(l):delete v[l]);p.length||Object.keys(v).length?(this._i5=p,n._h3[i]=t,this._a9._d8(this._g9,this)):this._d2?this._g8():this._g7()}},_f4:function(){var e=this._a9,t=this._b1,n=e._b1,r=this._i3;e._e3({h7:r,j3:this,j2:this._g3,j1:!0})},_f5:function(){var e=this._a9,t=this._i3,n=this._b1,r=n+ +(new Date),i=t.replace('CREATE TABLE "'+n+'"','CREATE TABLE "'+r+'"');this._i6=0,this._i7=r,e._e3({h7:i,j3:this,j2:this._f6,j1:!0})},_f6:function(){var e=this._a9,t=e._b1,n=this._b1,r=this._i7,i=[],s=this._j6;for(fieldName in s)i.push("DROP INDEX IF EXISTS "+this._h1(n,fieldName)),s[fieldName]?i.push(this._f1(n,fieldName,r)):i.push(this._f2(n,fieldName,r));i.length?e._e3({h7:i,j3:this,j2:this._f7,j1:!0}):this._f7()},_f7:function(){var e=this._a9,t=this._b1,n=this._i7,r=this._i6,i;this._d2?(this._j5=!0,this._g7()):this._d1?this._g3():this._f8()},_f8:function(){var e=this._a9,t=this._b1,n=this._i7,r="SELECT * FROM "+t+" LIMIT "+this._i6+", 500";e._e3({h7:r,j3:this,j2:this._f9,j1:!0})},_f9:function(e){var t=this._a9,n=this._b2,r=this._b1,i=this._i7,s=e.rows,o,u,a,f=[],l,c=[],h=[],p=[],d=[],v,m,g,y;if(!s.length)this._g1();else{o=s.item(0);for(u in o)n[u]&&f.push(u);for(u in n)a=n[u],f.indexOf(u)===-1&&(f.push(u),h.push(a.hh),c.push("?"));for(m=0,g=s.length;m<g;m++){v=[],l=[],o=s.item(m);for(u in o)a=n[u],a&&(l.push("?"),a.nn?v.push(o[u]):v.push(a.ii(o[u],a.hh)));p.push("INSERT INTO "+i+" ( "+f.join(", ")+" ) VALUES ( "+l.concat(c).join(", ")+" )"),d.push(v.concat(h))}y={h7:p,h8:d,j3:this,j1:!0},g===500?(this._i6+=500,y.j2=this._f8):y.j2=this._g1,t._e3(y)}},_g1:function(){var e=this._a9,t=this._b1,n="DROP TABLE "+t,r=this._i7,i="ALTER TABLE "+r+" RENAME TO "+t;e._e3({h7:[n,i],j3:this,j2:this._g2,j1:!0})},_g2:function(){var e=this._a9;this._g3()},_g3:function(){var e=this._a9;this._d2&&!this._j5?this._g8():this._g7()},_g7:function(){delete this._i3,delete this._j6,delete this._j5,delete this._i7,delete this._i6,delete this._i5,delete this._d1,delete this._d2,this._a7.call(this._a8,!0),delete this._a7,delete this._a8,this._a9._d6()},_g8:function(){var e=this._a9,t=e._b1,n=this._b1,r="DELETE FROM "+n;e._e3({h7:[r],j3:this,j2:this._g7,j1:!0})},_g9:function(){var e=this._a9,t=this._b1,n=[],r=this._i5,i,s=this._j6;while(r.length)n.push("DROP INDEX "+this._h1(t,r.shift()));for(i in s)s[i]?n.push(this._f1(t,i)):n.push(this._f2(t,i));e._e3({h7:n,j3:this,j2:this._g3,j1:!0})},get:function(e,n,r){var i=this._a9,s=this._b2,o,u=i._b1,a=this._b1,f,l=[],c=[];if(!e)throw t;for(o in s)l.push(o+" = ?"),c.push(this._w(o,e));f="SELECT * FROM "+a+" WHERE "+l.join(" OR "),i._e3({h7:f,h8:[c],j2:this._g5,j3:this,c8:n,c9:r})},getByCallback:function(e,n,r){var i=this._a9,s=this._b2,o,u=this._b1,a;if(typeof e!="function")throw t;a="SELECT * FROM "+u,i._e3({h7:a,j3:this,j2:this._g4,c8:n,c9:r,c7:e})},_g4:function(e,t){var n=this._b2,r=e.rows,i=0,s=r.length,o,u,a=t.c7,f,l=[];for(;i<s;i++){o=r.item(i),f={};for(u in o)f[u]=n[u].jj(o[u]);a(f)&&l.push(f)}t.c8.call(t.c9,l)},getByIndex:function(e,n,r,i){var s=this._a9,o=s._b1,u=this._b1,a,f=[],l=[],c,h,p,d;if(this._b5!==e&&this._b3.indexOf(e)===-1)throw t;if(!n)throw t;n instanceof Array||(n=[n]);for(p=0,d=n.length;p<d;p++)c=n[p],h=this._w(e,c),f.push(e+" = ?"),l.push(h);a="SELECT * FROM "+u+(f.length?" WHERE "+f.join(" OR "):""),s._e3({h7:a,h8:[l],j3:this,j2:this._g5,c8:r,c9:i})},getByIndexWithRange:function(e,n,r,i){var s=this._a9,o=s._b1,u=this._b1,a=this._b2,f=/^(?:>|<|>=|<=|=)$/,l,c=[],h,p,d=[],v;if(this._b5!==e&&this._b3.indexOf(e)===-1)throw t;for(l in n){if(!f.test(l))throw t;h=n[l],p=this._w(e,h);if(!p&&p!==a[e].hh)throw t;c.push(e+" "+l+" ?"),d.push(p)}if(!c.length)throw t;v="SELECT * FROM "+u+" WHERE "+c.join(" AND "),s._e3({h7:v,h8:[d],j3:this,j2:this._g5,c8:r,c9:i})},getAll:function(e,t){var n=this._a9,r=this._b1,i="SELECT * FROM "+r;n._e3({h7:i,j3:this,j2:this._g5,c8:e,c9:t})},getWithLike:function(e,n,r,i){var s=this._a9,o=s._b1,u=this._b2,a=this._b1,f,l,c,h,p,d=[],v,m=[];if(typeof n!="object")throw t;h=Object.keys(n)[0],p=n[h];if(!h||!p)throw t;h==="both"?p="%"+p+"%":h==="start"?p+="%":h==="end"&&(p="%"+p),e instanceof Array||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw t;m.push(c+" LIKE ?"),d.push(p)}v="SELECT * FROM "+a+" WHERE "+m.join(" OR "),s._e3({h7:v,h8:[d],j3:this,j2:this._g5,c8:r,c9:i})},_g5:function(e,t){var n=this._b2,r=e.rows,i=0,s=r.length,o,u,a,f=[];for(;i<s;i++){o=r.item(i),a={};for(u in o)a[u]=n[u].jj(o[u]);f.push(a)}t.c8.call(t.c9,f)},put:function(e,t,n){var r=this._a9,i=r._b1,s=this._b6,o,u=this._b1,a,f=[],l,c,h=[],p,d,v,m,g=s.length,y;!(e instanceof Array)&&typeof e=="object"&&(e=[e]);for(d=0,v=e.length;d<v;d++){p=e[d],a=[],l=[],c=[];for(m=0;m<g;m++)o=s[m],a.push(o),l.push(this._w(o,p[o])),c.push("?");f.push(l),h.push("INSERT OR ROLLBACK INTO "+u+" ( "+a.join(", ")+" ) "+"VALUES ( "+c.join(" , ")+" )")}y={h7:h,h8:f,c8:t,c9:n,i2:!0};if(r._b8)return y;r._e3(y)},set:function(e,n,r){var i=this._a9,s=this._b1,o=i._b1,u=this._b2,a,f,l,c,h,p,d,v,m,g=[],y,b=[],w,S,x;if(!e||typeof e!="object")throw t;e instanceof Array||(e=[e]);for(w=0,S=e.length;w<S;w++){f=e[w],y=[],m=[],v=[];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw t;if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw t}else f.target=[];h=f.data;for(p in h){d=h[p],l=this._w(p,d);if(!l&&l!==u[p].hh)throw t;m.push(p+" = ?"),y.push(l)}c=f.target;for(p in c){d=c[p],l=this._w(p,d);if(!l&&l!==u[p].hh)throw t;v.push(p+" = ?"),y.push(l)}b.push("UPDATE OR ROLLBACK "+s+" SET "+m.join(", ")+(v.length?" WHERE "+v.join(" AND "):"")),g.push(y)}x={h7:b,h8:g,h9:!0,c8:n,c9:r};if(i._b8)return x;i._e3(x)},del:function(e,n,r){var i=this._a9,s=i._b1,o=this._b5,u=this._b1,a,f,l,c=[],h,p,d;if(!o)throw t;if(!e)throw t;e instanceof Array||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this._w(o,a);if(!f)throw t;c.push(o+" = "+f)}l="DELETE FROM "+u+(c.length?" WHERE "+c.join(" OR "):""),d={h7:l,i1:!0,c8:n,c9:r};if(i._b8)return d;i._e3(d)},destroy:function(e,t){var n=this._a9,r=this._b1,i="DROP TABLE "+r;n._e3({j2:this._g6,j3:this,h7:i,c8:e,c9:t})},_g6:function(e,t){var n=this._a9;e&&n._e1(this,t)},empty:function(e,t){var n=this._a9,r=this._b1,i="DELETE FROM "+r;n._e3({h7:i,i1:!0,c8:e,c9:t})}},e.MSQTA=f})(window);