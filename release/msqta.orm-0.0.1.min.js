(function(e){var t="MSQTA-ORM!",n="transaction",r="continue",i="result",s="__msqta__",o="databases",u="name",a="dump",f="onsuccess",l="onerror",c="onupgradeneeded",h="executeSql",p=" __currents_ids__ ",d=d||{};d._a4=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,d._a5=e.IDBTransaction||e.webkitIDBTransaction||e.msIDBTransaction,d._a5&&(!d._a5.READ_WRITE||!d._a5.READ_ONLY)&&(d._a5={READ_WRITE:"readwrite",READ_ONLY:"readonly"}),d._a6=e.IDBKeyRange||e.webkitIDBKeyRange||e.msIDBKeyRange,d._Messages={"app is working":"The application is currently manipulating the database, please wait a moment, leaving the application right now will be cause that your database may get broken!"},d._uu={a:function(){},b:function(){},mm:function(){e.addEventListener("beforeunload",this.oo)},nn:function(){e.removeEventListener("beforeunload",this.oo)},oo:function(e){return e.returnValue=d._Messages["app is working"]},xx:2097152,c:function(e){return e==="object"||e==="array"?this.d:e==="datetime"||e==="date"||e==="time"?this.e:e==="boolean"?this.f:this.g},d:function(e){return JSON.parse(e)},e:function(e){var t=new Date(e);return t.setMinutes(t.getMinutes()+t.getTimezoneOffset()),t},f:function(e){return!!e},g:function(e){return e},a3:["batch","destroy"],a2:["del","destroy","empty","get","getAll","getWithLike","getByCallback","getByIndex","getByIndexWithRange","put","set"],h:function(e){var t=this.a2,n=this.a,r,i;for(r=0,i=t.length;r<i;r++)e[t[r]]=n},n:function(e){var t=this.a3,n=this.a2,r,i,s,o=this.a,u,a;for(u=0,a=t.length;u<a;u++)e[t[u]]=o;s=e._a8;for(r in s){i=s[r];for(u=0,a=n.length;u<a;u++)i[n[u]]=o}},o:function(t){t=t.toLowerCase();if(t==="websql"){if(e.openDatabase)return d._b5.c9}else if(t==="indexeddb"&&d._a4)return d._b5.c8;if(e.openDatabase)return d._b5.c9;if(d._a4)return d._b5.c8},p:function(n,r,i,s,o){var u={},a;if(!n)throw t;return typeof o[1]=="function"?(u.callback=o[1],u.context=o[2]||e):typeof o[1]=="object"&&(u=o[1]),d._c3.prototype=r,a=new d._c3(n,i,u),a._u=d._uu.s,a._t=d._uu.r,a._c7=s,a._f4(),a},r:function(e,n){var r=this._b7,i=this._b6,s=r[e];if(!s)throw t;return s.ff(n,s.ee)},yy:{string:"TEXT",integer:"INTEGER",object:"TEXT",array:"TEXT",date:"INTEGER",time:"INTEGER",datetime:"INTEGER","float":"REAL","boolean":"INTEGER"},zz:{string:"",integer:0,object:"{}",array:"[]",date:-22090752e5,time:-22090752e5,datetime:-22090752e5,"float":0,"boolean":0},a1:{string:"","int":0,integer:0,text:"",object:{},array:[],date:-22090752e5,time:-22090752e5,datetime:-22090752e5,"float":0,"boolean":!1},s:function(e){var n=this._c7,r=d._uu.yy,i=n==="webSQL"?d._uu.zz:d._uu.a1,s=this._b6,o=this._b5._b6,u=this._b7[e],a,f=u.type,l=r[f],c=u.allowNull;if(!l)throw t;a=this._b7[e],a.ee=c?null:i[f],a.ff=n==="webSQL"?d._uu.vv.v(f):d._uu.ww.v(f),a.hh=f==="date"||f==="time"||f==="datetime",n==="webSQL"&&(a.ii=f,a.jj=l+(c?" NULL":""),a.kk=f==="object"||f==="array",a.gg=d._uu.c(f))},ll:function(e){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(e)?new Date(e):!1},pp:function(e){var t;return e-=0,e?(t=new Date(e),isNaN(t-0)?!1:t):!1},qq:function(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)},rr:function(e){e.setFullYear(0),e.setDate(0),e.setMonth(0)},ss:function(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0)},tt:function(e){return JSON.parse(JSON.stringify(e))}},d._uu.vv={v:function(e){if(e==="string"||e==="text")return this.w;if(e==="int"||e==="integer"||e==="float")return this.x;if(e==="object"||e==="array")return this.bb;if(e==="date")return d._uu.ww.y;if(e==="time")return d._uu.ww.z;if(e==="datetime")return d._uu.ww.aa;if(e==="boolean")return this.cc},w:function(e,t){return e||t},x:function(e,t){return e-=0,e?e:t},bb:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object")return e?e:t;try{return JSON.stringify(e)}catch(n){return t}},cc:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?1:e==="false"||e==="0"?0:t):e===1?1:e===0?0:t},dd:function(e){return e}},d._uu.ww={v:function(e){if(e==="string"||e==="text")return this.w;if(e==="int"||e==="integer"||e==="float")return this.x;if(e==="object"||e==="array")return this.bb;if(e==="date")return this.y;if(e==="time")return this.z;if(e==="datetime")return this.aa;if(e==="boolean")return this.cc},w:function(e,t){return e?e+"":t},x:function(e,t){return e-=0,e?e:t},y:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:(d._uu.qq(e),d._uu.ss(e)):(r=d._uu.pp(e))?(d._uu.qq(r),d._uu.ss(r)):(r=d._uu.ll(e))?(d._uu.qq(r),d._uu.ss(r)):(n=/^(\d{4}-\d{2}-\d{2})/.exec(e),n?(n=n[1].split("-"),Date.UTC(n[0],n[1]-1,n[2],0,0,0,0)):t)},z:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:(d._uu.rr(e),d._uu.ss(e)):(r=d._uu.pp(e))?(d._uu.rr(r),d._uu.ss(r)):(r=d._uu.ll(e))?(d._uu.rr(r),d._uu.ss(r)):(n=/^(?:\d{4}-\d{2}-\d{2} )?(\d{2}):(\d{2})(?::(\d{2}))?$/.exec(e),n?Date.UTC(0,0,0,n[1],n[2],n[3]||0,0):t)},aa:function(e,t){var n,r;return e instanceof Date?isNaN(e-0)?t:(d._uu.rr(e),d._uu.ss(e)):(r=d._uu.pp(e))?d._uu.ss(r):(r=d._uu.ll(e))?d._uu.ss(r):(n=/^(\d{4})-(\d{2})-(\d{2})(?:\s(\d{2}):(\d{2})(?::(\d{2}))?)?$/.exec(e),n?Date.UTC(n[1],n[2]-1,n[3],n[4]||0,n[5]||0,n[6]||0,0):t)},bb:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object"){if(!e)return t;if(typeof e=="string")try{return JSON.parse(e)}catch(n){return t}return e}return e},cc:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?!0:e==="false"||e==="0"?!1:t):e===1?!0:e===0?!1:t},dd:function(e){return e}},d.ORM=function(n,r,i){typeof n=="string"&&(n={name:n});var o=n.name;if(!o)throw t;if(o===s)throw t;if(!/^[\w][-.\w\d]+$/i.test(o))throw t;return n.callback=n.callback||r||d._uu.b,n.context=n.context||i||e,d._b5.prototype=d._uu.o(n.preferred||n.prefered||""),new d._b5(n)},d._b5=function(e){var t=this._b6=e.name;this._a7=[],this._a8={},this._a9=[],this.Schema._b5=this,this._b1=!0,this._b2=[],this._b3=e.callback,this._b4=e.context,e.forceDestroy?this._e5(this._d8,this):this._d8()},d._c3=function(n,r,i){var s=n._b6,o=r.name;if(o==="__currents_ids__")throw t;if(!/^[\w][-\w\d]+$/i.test(o))throw t;if(n._a8[o]&&!i.forceDestroy)throw t;var u=r.fields;if(typeof u!="object"||!Object.keys(u).length)throw t;var a=r.primaryKey;if(!a||a&&!u[a])throw t;if(u[a].type!=="integer")throw t;u[a].allowNull=!0;var f,l,c=[],h=[];for(f in u){l=u[f];if(l.index){if(!/^(integer|float|string|date|time|datetime|boolean)$/.test(l.type))throw t;c.push(f),l.index=!0}else l.index=!1;l.unique?(c.indexOf(f)===-1&&(c.push(f),l.index=!0),h.push(f),l.unique=!0):l.unique=!1}n._a8[o]=this,this._b5=n,this._b6=o,this._b7=u,this._b8=c,this._b9=h,this._c1=a,this._c2=Object.keys(u),this._d6=i.forceDestroy,this._d7=this._d6?!1:i.forceEmpty,this._b3=i.callback||d._uu.b,this._b4=i.context||e},d._b5.c8={Schema:function(e){return d._uu.p(this.constructor._b5,d._c3.c8,e,"indexedDB",arguments)},_m9:{l8:function(e){var t=e.ORM,n=t._o7,r=n._b6;this.ORM=t,this.n7=0,this.n6=!1,this.n8=null,this.n9=null,this.n1=e.n1,this.n2=e.n2,this.n3=e.n3,this.n5=e.n5,e.o1?(this.o3=this.l6,this.o4=a,this.o5=this.l5,this.o2=r):(this.o3=this.l5,this.o4=r,this.o5=this.l6,this.o2=a),this.l7()},l6:function(){return this.ORM._m4()},l5:function(){return this.ORM._k9()},l7:function(){var e=this,t=e.ORM,r=e.o4,s=e.o3();s[f]=function(t){e.n9=this[i];var s=e.n9[n]([r],d._a5.READ_ONLY),o=s.objectStore(r),u=o.openCursor();u._n4=e,u[f]=e.l9},s[l]=t._k4},l9:function(e){var t=this._n4,n=t.n9,r=this[i];r?t.n6?(t.n6=!1,n.close(),t.m1(r.value)):t.n7===0?(t.n7++,n.close(),t.m1(r.value)):(t.n6=!0,r.advance(t.n7),t.n7++):(n.close(),t.m3())},m1:function(e){var t=this,r=t.ORM,s=t.o2,o=t.o5();o[f]=function(r){t.n8=this[i];var o=t.n8[n]([s],d._a5.READ_WRITE),u=o.objectStore(s),a=t.n5(u,e,t.n7);a._n4=t,a[f]=t.m2,a[l]=t.m2},o[l]=r._k4},m2:function(e){var t=this._n4;t.n8.close(),t.l7()},m3:function(){this.n1.call(this.n2,this.n3)}},_d8:function(){d._uu.mm();var e=this,t=this._b6,r=this._m4();r[c]=function(e){var t=this[i],n;n=t.createObjectStore(o,{keyPath:"id",autoIncrement:!0}),n.createIndex(u,u,{unique:!0}),t.createObjectStore(a)},r[f]=function(r){var s=this[i],a=s[n]([o],d._a5.READ_WRITE),l=a.objectStore(o);l.index(u).get(t)[f]=function(n){var r=this[i];if(!r)e._o8=0,l.add({name:t,branch:0,schemas:{}})[f]=function(t){s.close(),e._f4()};else{s.close();var o=r.branch;e._o8=o,e._f4()}}},r[l]=function(e){this._b3.call(this._b4,null)}},_f4:function(){d._uu.nn(),this._b3.call(this._b4,!0),this._e2()},_e5:function(t,r){var s=this,a=this._b6,c=d._a4.deleteDatabase(a);d._uu.mm(),c[f]=function(l){c=s._m4(),c[f]=function(l){var c=this[i],h=c[n]([o],d._a5.READ_WRITE),p=h.objectStore(o);p.index(u).get(a)[f]=function(n){var o=this[i];p.delete(o.id)[f]=function(n){c.close(),d._uu.n(s),d._uu.nn(),t.call(r||e,!0)}}}},c[l]=function(n){d._uu.nn(),t.call(r||e,!1)}},_e1:function(e){this._b2.push(e),this._b1||this._e2()},_e2:function(){var e=this,t=this._b6,r;this._b2.length?(d._uu.mm(),r=this._m4(),r[f]=function(r){var s=this[i],a=s[n]([o],d._a5.READ_WRITE),l=a.objectStore(o);l.index(u).get(t)[f]=function(t){var n=this[i];e._k2(s,l,n)}},r[l]=this._k4):this._e3()},_k2:function(e,t,n){var r=this,i=this._b6,s=this._b2.shift(),o=s._b6,u=n.schemas[o],a={fields:s._b7,primaryKey:s._c1};this._o7=s,u?s._d6?this._g3(this._g6):(e.close(),this._f8(u,a)?s._d7?this._g3(this._g6,this):this._g1():s._d7?this._g7():this._k6()):(this._k3(t,n),e.close(),this._f9())},_f8:function(e,t){var n=!1,r,i=e.fields,s=t.fields,o,u;for(r in i){o=i[r],u=s[r];if(!u||o.type!==u.type||o.index!==u.index||o.unique!==u.unique){n=!0;break}}var a=e.primaryKey,f=t.primaryKey;return!n&&(a&&(!f||a!==f)||!a&&f)&&(n=!0),n},_k3:function(e,t){var n=this._o7,r=n._b6,i=n._c1,s=n._c6;return t.schemas[r]={fields:s,primaryKey:i},req=e.put(t),req},_f9:function(){var e=this,t=this._o7,n=this._b6,r=t._b6,s=this._k8();s[c]=function(t){var n=this[i];e._k5(n)},s[f]=function(t){var n=this[i];n.close(),e._k7(e._k6,e)},s[l]=this._k4},_g1:function(){var e=this,t=this._m4();t[f]=function(t){var r=this[i],s=r[n]([a],d._a5.READ_WRITE),o=s.objectStore(a);o.clear()[f]=function(t){r.close(),e._g2()}},t[l]=this._k4},_g2:function(){var e=this,t=this._o7,n=t._b6,r=function(e,t,n){return e.add(t,n)};this._m9.l8({ORM:this,o1:!1,n1:this._g3,n2:this,n3:this._g4,n5:r})},_g3:function(e){var t=this,n=this._o7,r=n._b6,s=this._b6,o=this._k8();o[c]=function(e){var n=this[i];n.deleteObjectStore(r),t._k5(n)},o[f]=function(n){var r=this[i];r.close(),t._k7(e,t)},o[l]=this._k4},_g4:function(){var e=this,t=this._o7,n=t._b6,r=t._b7,i=function(e,t){var n,i;for(i in t)n=r[i],n?t[i]=n.ff(t[i],n.ee):delete t[i];return e.put(t)};this._m9.l8({ORM:this,o1:!0,n1:this._g5,n2:this,n5:i})},_g5:function(){var e=this,t=this._b6,r;r=this._m4(),r[f]=function(t){var r=this[i],s=r[n]([a],d._a5.READ_WRITE),o=s.objectStore(a);o.clear()[f]=function(t){r.close(),e._g6()}},r[l]=this._k4},_g6:function(){var e=this,t=this._b6,r=this._o7,s=r._b6,a;a=this._m4(),a[f]=function(r){var s=this[i],a=s[n]([o],d._a5.READ_WRITE),l=a.objectStore(o);l.index(u).get(t)[f]=function(t){var n=this[i],r;r=e._k3(l,n),r[f]=function(t){s.close(),e._g8()}}},a[l]=this._k4},_g7:function(){var e=this,t=this._b6,r=this._o7,s=r._b6,o;o=this._k9(),o[f]=function(t){var r=this[i],o=r[n]([s],d._a5.READ_WRITE),u=o.objectStore(s);u.clear()[f]=function(t){e._g8()}},o[l]=this._k4},_g8:function(){this._k6()},_k4:function(){this._k6(!1)},_k5:function(e){var t=this._o7,n=t._b7,r=t._b6,i=t._c1,s,o,u,a;a=e.createObjectStore(r,{keyPath:i,autoIncrement:!0});for(s in n)o=n[s],o.index&&(u=o.unique,a.createIndex(s,s,u?{unique:!0}:{}))},_k6:function(e){var t=this._o7,n=t._b3,r=t._b4;n.call(r,typeof e=="undefined"?!0:e),delete t._b3,delete t._b4,delete t._d6,delete t._d7,delete this._o7,d._uu.nn(),this._e2()},_e3:function(){this._b1=!1},_k7:function(t,r){var s=this,a=this._b6,l=this._o8,c;c=this._m4(),c[f]=function(s){var c=this[i],h=c[n]([o],d._a5.READ_WRITE),p=h.objectStore(o);p.index(u).get(a)[f]=function(n){var s=this[i];s.branch=l,p.put(s),c.close(),t&&t.call(r||e)}}},_k8:function(){var e=this._b6,t=this._o8+1;return this._o8=t,d._a4.open(e,t)},_k9:function(){var e=this._b6,t=this._o8;return d._a4.open(e,t)},_m4:function(){return d._a4.open(s,1)},_l1:function(t){t.d4||(t.d4=d._uu.b),t.d5||(t.d5=e),this._a7.push(t);if(this._c5)return;this._c5=!0,d._uu.mm(),this._l2()},_l2:function(){var e=this._a7.shift();e.type==="destroy"?this._h2(e):this._m5(e,this._exec2,this)},_exec2:function(e){var t=e.schema,n=e.type;this["_"+n](e)},_m5:function(e,t,r){var s=e.schema,o=this._k9();o[f]=function(o){var u=this[i],a=u[n]([s],d._a5[e.p4?"READ_ONLY":"READ_WRITE"]),f=a.objectStore(s);e.p2=f,e.p3=u,t.call(r,e)}},_f2:function(){this._c5=!1,this._a7.length&&this._l2()},_l3:function(e,t,n){d._uu.nn(),e.p3.close(),e.d4.call(e.d5,t,n),this._f2()},_put:function(e){var t=this,n=e.p2,r=e.data,s=0,o=[],u=r.length,a=function(n){n&&o.push(n),s===u?t._l3(e,n,o):(h(),s++)},c=function(){t._l3(e,!1)},h=function(){var e=r[s],t=n.add(e);t[f]=function(e){a(this[i])},t[l]=function(e){c()}};a()},_set:function(e){var t=this,n=e.p2,s=e.data,o=e.p1,u=e.primaryKey,a=0,c=0,h=s.length,p=function(){c===h?t._l3(e,a):(v(),c++)},d=function(){t._l3(e,!1)},v=function(){var e=s[c],t=e.data,o=e.target,h=o[u],v,m=Object.keys(o).length;h?n.get(h)[f]=function(e){var r=this[i],s;if(r){for(v in t)r[v]=t[v];s=n.put(r),s[f]=function(e){this[i]&&a++,p()},s[l]=function(e){d()}}else p()}:n.openCursor()[f]=function(e){var n=this[i];if(n){var s=n.value,u=0,c;for(v in o)s[v]===o[v]&&u++;if(u===m){for(v in t)s[v]=t[v];c=n.update(s),c[f]=function(e){this[i]&&a++,n[r]()},c[l]=function(e){d()}}else n[r]()}else p()}};p()},_del:function(e){var t=this,n=e.p2;n.count()[f]=function(n){e.o9=this[i],t._m6(e)}},_m6:function(e){var t=this,n=e.data,r=e.primaryKey,i=e.p2,s=0,o=n.length,u=function(){s===o?t._m7(e):(a(),s++)},a=function(){var e=n[s];i.delete(e[r])[f]=function(e){u()}};u()},_m7:function(e){var t=this,n=e.p2;n.count()[f]=function(n){t._l3(e,e.o9-this[i])}},_empty:function(e){var t=this,n,r=e.p2;r.count()[f]=function(s){n=this[i],r.clear()[f]=function(r){t._l3(e,n)}}},_h2:function(e){var t=this,n=e.schema,r=this._k8();r[c]=function(e){var t=this[i];t.deleteObjectStore(n)},r[f]=function(n){var r=this[i];r.close(),t._l4(e)}},_l4:function(e){var t=this,r=this._b6,s=e.schema,a=this._a8[s],l=this._m4();l[f]=function(l){var c=this[i],h=c[n]([o],d._a5.READ_WRITE),p=h.objectStore(o);p.index(u).get(r)[f]=function(n){var r=this[i];delete r.schemas[s],p.put(r)[f]=function(n){t._k7(function(){e.p3=c,delete t._a8[s],d._uu.h(a),this._l3(e,!0)},t)}}}},_getAll:function(e){var t=this,n=e.schema,s=e.d3,o=e.undefined,u=e.p8,a=e.p2,l=[];a.openCursor()[f]=function(a){var f=this[i],c;f?(c=f.value,s(c,o,u)&&(t._m8(n,c),l.push(c)),f[r]()):t._l3(e,l)}},_getWithRange:function(e){var t=this,n=e.schema,s=e.p5,o=e.p6,u=e.p7,a=e.p2,l=[],c=function(s){var o=this[i],u;o?(u=o.value,t._m8(n,u),l.push(u),o[r]()):t._l3(e,l)};s?a.openCursor(u)[f]=c:a.index(o).openCursor(u)[f]=c},_m8:function(e,t){var n=this._a8[e],r=n._b7,i;for(i in t)r[i].hh&&(t[i]=d._uu.e(t[i]))},batch:function(n,r,i){var s=this._b6,o;if(!Array.isArray(n)||!n.length)throw t;typeof r!="function"&&(r=d._uu.b),typeof i!="object"&&(i=e),o={data:n,d4:r,d5:i};if(this._c4){this._a9.push(o);return}this._c4=!0,this._f3(o)},_f3:function(n){var r=n.data,i=["set","put","del"],s=0,o=r.length,u,a,f,l;for(;s<o;s++){a=r[s],f=a.schema;if(!(f instanceof d._c3))throw t;l=a.type.toLowerCase();if(i.indexOf(l)===-1)throw t;u=f[l](a.data),u.d4=d._uu.b,u.d5=e,this._a7.push(u)}u=this._a7[this._a7.length-1],u.d4=n.d4,u.d5=n.d5,this._c4=!1,this._c5||this._f2()},destroy:function(e,t){this._e5(e||d._uu.a,t)}},d._c3.c8={_f4:function(){var e=this._b5,t=this._b7,n,r,i={};for(n in t)r=t[n],this._u(n),i[n]={type:r.type,index:r.index,unique:r.unique};this._c6=i,e._e1(this)},get:function(e,n,r){var i=this._b5,s=i._b6,o=this._b7,u,a={},f=this._b6,l;if(!e)throw t;for(u in o)a[u]=this._t(u,e);var c=function(e,t,n){for(var r in e)if(e[r]===n[r])return!0;return!1};l={type:"getAll",p4:!0,schema:f,d3:c,p8:a,d4:n,d5:r},i._l1(l)},getAll:function(e,t){var n=this._b5,r=n._b6,i=this._b6,s,o=function(){return!0};s={type:"getAll",p4:!0,schema:i,d3:o,d4:e,d5:t},n._l1(s)},getWithLike:function(e,n,r,i){var s=this._b5,o=s._b6,u=this._b7,a=this._b6,f,l,c,h,p,d;if(typeof n!="object")throw t;h=Object.keys(n)[0],p=n[h];if(!h||!p)throw t;h==="both"?p=new RegExp(p,"i"):h==="start"?p=new RegExp("^"+p,"i"):h==="end"&&(p=new RegExp(p+"$","i")),Array.isArray(e)||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw t}var v=function(e,t,n){var r,i=0,s=t.length;for(;i<s;i++){r=t[i];if(n.test(e[r]))return!0}return!1};d={type:"getAll",p4:!0,schema:a,d3:v,p8:p,"undefined":e,d4:r,d5:i},s._l1(d)},getByCallback:function(e,n,r){var i=this._b5,s=i._b6,o=this._b6,u;if(typeof e!="function")throw t;u={type:"getAll",p4:!0,schema:o,d3:e,d4:n,d5:r},i._l1(u)},getByIndex:function(e,n,r,i){var s=this._b5,o=s._b6,u=this._b6,a={},f=[],l,c,h,p,v,m;if(this._c1!==e&&this._b8.indexOf(e)===-1)throw t;this._c1===e?a.pk=e:a.index=e;if(!n)throw t;Array.isArray(n)||(n=[n]);if(n.length===1)m={type:"getWithRange",p4:!0,schema:u,p5:a.pk,p6:a.index,p7:d._a6.only(this._t(e,n[0])),d4:r,d5:i};else{for(p=0,v=n.length;p<v;p++)c=n[p],h=this._t(e,c),f.push(h);l=function(e,t,n){for(var r=0,i=t.length;r<i;r++)if(t[r]===e[n])return!0;return!1},m={type:"getAll",p4:!0,schema:u,d3:l,p8:a.pk||a.index,"undefined":f,d4:r,d5:i}}s._l1(m)},getByIndexWithRange:function(e,n,r,i){var s=this._b5,o=s._b6,u=this._b6,a=this._b7,f=/^(?:>|<|>=|<=|=)$/,l,c={},h={},p,v,m=a[e],g,y,b;if(this._c1!==e&&this._b8.indexOf(e)===-1)throw t;this._c1===e?c.pk=e:c.index=e;for(l in n){if(!f.test(l))throw t;g=n[l],y=this._t(e,g);if(!y&&y!==m.ee)throw t;h[l]=y}p=Object.keys(h).length;if(p===2)try{h[">"]&&h["<"]?v=d._a6.bound(h[">"],h["<"],!0,!0):h[">="]&&h["<="]?v=d._a6.bound(h[">="],h["<="]):h[">"]&&h["<="]?v=d._a6.bound(h[">"],h["<="],!0,!1):v=d._a6.bound(h[">="],h["<"],!1,!0)}catch(w){throw t}else p===1&&(h[">"]?v=d._a6.lowerBound(h[">"],!0):h[">="]?v=d._a6.lowerBound(h[">="]):h["<"]?v=d._a6.upperBound(h["<"],!0):h["<="]?v=d._a6.upperBound(h["<="]):v=d._a6.only(h["="]));if(!v)throw t;c.keyRange=v,b={type:"getWithRange",p4:!0,schema:u,p5:c.pk,p6:c.index,p7:v,d4:r,d5:i},s._l1(b)},put:function(e,n,r){var i=this._b5,s=i._b6,o=this._c2,u,a,f=this._c1,l=this._b6,c,h,p,v;!Array.isArray(e)&&typeof e=="object"&&(e=[e]),e=d._uu.tt(e);for(h=0,p=e.length;h<p;h++){c=e[h];for(u in c){if(o.indexOf(u)===-1)throw t;c[u]=this._t(u,c[u])}c[f]<=0&&delete c[f]}v={type:"put",schema:l,primaryKey:f,data:e,d4:n,d5:r};if(i._c4)return v;i._l1(v)},set:function(e,n,r){var i=this._b5,s=this._b6,o=this._b7,u=i._b6,a,f,l,c,h,p,v,m={},g={},y=[],b,w,E;if(!e||typeof e!="object")throw t;Array.isArray(e)||(e=[e]),e=d._uu.tt(e);for(b=0,w=e.length;b<w;b++){f=e[b];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw t;if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw t}else f.target=[];c=f.target;for(p in c){v=c[p],l=this._t(p,v);if(!l&&l!==o[p].ee)throw t;m[p]=l}h=f.data;for(p in h){v=h[p],l=this._t(p,v);if(!l&&l!==o[p].ee)throw t;g[p]=l}y.push({data:g,target:m}),g={},m={}}E={type:"set",schema:s,p1:this._b8,primaryKey:this._c1,data:y,d4:n,d5:r};if(i._c4)return E;i._l1(E)},del:function(e,n,r){var i=this._b5,s=i._b6,o=this._c1,u=this._b6,a,f,l,c=[],h,p,d;if(!o)throw t;if(!e)throw t;Array.isArray(e)||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this._t(o,a);if(!f)throw t;l={},l[o]=f,c.push(l)}d={type:"del",schema:u,primaryKey:o,data:c,d4:n,d5:r};if(i._c4)return d;i._l1(d)},destroy:function(e,t){var n=this._b5,r=n._b6,i=this._b6;n._l1({type:"destroy",schema:i,d4:e,d5:t})},empty:function(e,t){var n=this._b5,r=n._b6,i=this._b6;n._l1({type:"empty",schema:i,d4:e,d5:t})}},d._b5.c9={Schema:function(e){return d._uu.p(this.constructor._b5,d._c3.c9,e,"webSQL",arguments)},_d8:function(){(function(t){d._uu.mm(),t._h6=e.openDatabase(s,1,"",d._uu.xx),t._h6[n](function(e){e[h]("CREATE TABLE IF NOT EXISTS databases( id INTEGER PRIMARY KEY, name TEXT UNIQUE, schemas TEXT )"),e[h]('SELECT * FROM databases WHERE name = "'+t._b6+'"',[],function(e,n){t._d9(n)})})})(this)},_d9:function(t){var r=t.rows;this._h7=r.length?JSON.parse(r.item(0).schemas):{},this._h8=[],this._h9=e.openDatabase(this._b6,1,"",d._uu.xx),function(e){e._h9[n](function(e){e[h]("CREATE TABLE IF NOT EXISTS __currents_ids__( id INTEGER PRIMARY KEY, table_name TEXT UNIQUE, last_id INTEGER )")},null,function(){d._uu.nn(),e._b3.call(e.initContext,!0),e._e2()})}(this)},_e1:function(e){this._b2.push(e),this._b1||(this._b1=!0,this._e2())},_e2:function(){var e=this,t,n=this._b6;this._b2.length?(d._uu.mm(),t=this._b2.shift(),t._f5()):(d._uu.nn(),this._e3())},_e3:function(){this._b1=!1},_e4:function(e,t,r){var i=this,s=this._b6,o=this._h7;this._h6[n](function(e){e[h]('REPLACE INTO databases( name, schemas ) VALUES( "'+s+'", '+"'"+JSON.stringify(o)+"'"+")")},null,function(){e.call(t,r)})},_e5:function(e,t){this.destroy(e,t)},_e6:function(e,t){var r=this,i=e._b6;delete this._a8[i],delete this._h7[i],d._uu.h(e),this._h9[n](function(e){e[h]("DELETE FROM"+p+'WHERE table_name = "'+i+'"')},null,function(){r._e4(t.d4,t.d5,!0)})},_e7:function(e){},_e8:function(t){var n=t.d4,r=t.d5;n||(t.d4=d._uu.b),r||(t.d5=e);if(this._c5){t.j5?this._h8.push(t):this._a7.push(t);return}this._c5=!0,d._uu.mm(),this._e9(t)},_e9:function(e){this._i1=e;var t=this,r=0,i=[],s=e.i2;Array.isArray(s)||(s=[s]);var o=e.i4?function(e,t){r+=t.rowsAffected}:e.i6?function(e,t){i.push(t.insertId)}:d._uu.a,u=function(n,s){e.i4?e.returnValue=s.rowsAffected+r:e.i6?(e.returnValue=s.insertId,i.length||i.push(s.insertId),e.k1=i):e.i5&&(e.returnValue=s.rowsAffected),t._f1(s)},a=function(e){t._e7(e),t._f1(!1)};this._h9[n](function(t){var n,r=s.length;while(r--)n=s.shift(),t[h](n,e.i3?e.i3.shift():[],r?o:u)},a)},_f1:function(e){var t=this._i1;this._c5=!1,e||(t.returnValue=!1),t.j6?t.j6.call(t.j7,e,t):t.d4.call(t.d5,t.returnValue,t.k1),this._f2()},_f2:function(){d._uu.nn(),this._c5||(this._h8.length?this._e8(this._h8.shift()):this._a7.length&&!this._b1&&this._e8(this._a7.shift()))},batch:function(n,r,i){var s=this._b6,o;if(!Array.isArray(n)||!n.length)throw t;r||(r=d._uu.b),i||(i=e),o={data:n,callback:r,context:i};if(this._c4){this._a9.push(o);return}this._c4=!0,this._f3(o)},_f3:function(e){var n=e.data,r=["set","put","del"],i,s,o,u=0,a=n.length;for(;u<a;u++){i=n[u],s=i.schema;if(!(s instanceof d._c3))throw t;o=i.type.toLowerCase();if(r.indexOf(o)===-1)throw t;this._a7.push(s[o](i.data))}var f=this._a7[this._a7.length-1];f.d4=e.callback,f.d5=e.context,this._c4=!1,this._f2(),this._a9.length&&this._f3(this._a9.shift())},destroy:function(t,n){(t||d._uu.a).call(n||e,!1)}},d._c3.c9={_f4:function(){var e=this._b7,t,n,r=this._b5,i=r._b6,s=this._b6,o=[],u=this._c1,a,f={},l,c,h={};for(n in e)t=e[n],a=[],u===n?a.push("PRIMARY KEY"):(l=t.index,c=t.unique,l&&c?f[n]=!0:l&&(f[n]=!1)),this._u(n),h[n]={type:t.type,index:t.index,unique:t.unique},o.push(n+" "+e[n].jj+(a.length?" "+a.join(" "):""));this._i7='CREATE TABLE "'+s+'" ( '+o.join(", ")+" )",this._c6=h,this._j9=f,this._i9=[],r._e1(this)},_f5:function(){var e=this._b5,t=e._b6,n=this._b6,r,i,s;this._d6?(r="DROP TABLE IF EXISTS "+n,e._e8({i2:r,j7:this,j6:this._f9,j5:!0})):(s={fields:this._c6,primaryKey:this._c1},i=e._h7[n],i?this._f8(i,s):(e._h7[n]=s,this._b5._e4(this._f9,this)))},_f6:function(e,t,n){return"CREATE UNIQUE INDEX "+this._h5(e,t)+" ON "+(n||e)+" ( "+t+" )"},_f7:function(e,t,n){return"CREATE INDEX "+this._h5(e,t)+" ON "+(n||e)+" ( "+t+" )"},_h5:function(e,t){return e+"_"+t},_f8:function(e,t){var n=this._b5,r=n._b6,i=this._b6,s=!1,o=e.fields,u=t.fields,a,f,l;for(l in o){a=o[l],f=u[l];if(!f||a.type!==f.type||a.unique!==f.unique){s=!0;break}}var c=e.primaryKey,h=t.primaryKey;!s&&(c&&(!h||c!==h)||!c&&h)&&(s=!0);if(s)n._h7[i]=t,this._b5._e4(this._g1,this);else{var p=[],d=this._b8,v=this._j9;for(l in o)a=o[l],a.index&&(d.indexOf(l)===-1?p.push(l):delete v[l]);p.length||Object.keys(v).length?(this._i9=p,n._h7[i]=t,this._b5._e4(this._h4,this)):this._d7?this._h3():this._g8()}},_f9:function(){var e=this._b5,t=this._b6,n=e._b6,r=this._c1,i,s;i="CREATE TRIGGER IF NOT EXISTS update_last_id_on_"+t+" AFTER INSERT ON "+t+" BEGIN "+" UPDATE"+p+"SET last_id = ( "+" SELECT CASE "+" WHEN ( SELECT 1 WHERE NEW.rowid >= ( SELECT last_id FROM"+p+'WHERE table_name = "'+t+'" ) )'+" THEN NEW.rowid "+" WHEN ( SELECT 1 WHERE NEW.rowid < ( SELECT last_id FROM"+p+'WHERE table_name = "'+t+'" ) )'+" THEN ( SELECT last_id - 1 FROM"+p+'WHERE table_name = "'+t+'" ) '+" ELSE "+" ( SELECT last_id FROM"+p+'WHERE table_name = "'+t+'" ) '+" END "+' ) + 1 WHERE table_name = "'+t+'" ; '+" END ",s="REPLACE INTO"+p+'VALUES( null, "'+t+'", 1 )',e._e8({i2:[this._i7,i,s],j7:this,j6:this._h4,j5:!0})},_g1:function(){var e=this._b5,t=this._i7,n=this._b6,r=n+ +(new Date),i=t.replace('CREATE TABLE "'+n+'"','CREATE TABLE "'+r+'"');this._j1=0,this._j2=r,e._e8({i2:i,j7:this,j6:this._g2,j5:!0})},_g2:function(){var e=this._b5,t=e._b6,n=this._b6,r=this._j2,i=[],s=this._j9,o;for(o in s)i.push("DROP INDEX IF EXISTS "+this._h5(n,o)),s[o]?i.push(this._f6(n,o,r)):i.push(this._f7(n,o,r));i.length?e._e8({i2:i,j7:this,j6:this._g3,j5:!0}):this._g3()},_g3:function(){var e=this._b5,t=this._b6,n=this._j2,r=this._j1,i;this._d7?(this._j8=!0,this._g8()):this._d6?this._g7():this._g4()},_g4:function(){var e=this._b5,t=this._b6,n=this._j2,r="SELECT * FROM "+t+" LIMIT "+this._j1+", 500";e._e8({i2:r,j7:this,j6:this._g5,j5:!0})},_g5:function(e){var t=this._b5,n=this._b7,r=this._b6,i=this._j2,s=e.rows,o,u,a,f=[],l,c=[],h=[],p=[],d=[],v,m,g,y;if(!s.length)this._g6();else{o=s.item(0);for(u in o)n[u]&&f.push(u);for(u in n)a=n[u],f.indexOf(u)===-1&&(f.push(u),h.push(a.ee),c.push("?"));for(m=0,g=s.length;m<g;m++){v=[],l=[],o=s.item(m);for(u in o)a=n[u],a&&(l.push("?"),a.kk?v.push(o[u]):v.push(a.ff(o[u],a.ee)));p.push("INSERT INTO "+i+" ( "+f.join(", ")+" ) VALUES ( "+l.concat(c).join(", ")+" )"),d.push(v.concat(h))}y={i2:p,i3:d,j7:this,j5:!0},g===500?(this._j1+=500,y.j6=this._g4):y.j6=this._g6,t._e8(y)}},_g6:function(){var e=this._b5,t=this._b6,n="DROP TABLE "+t,r=this._j2,i="ALTER TABLE "+r+" RENAME TO "+t;e._e8({i2:[n,i],j7:this,j6:this._g7,j5:!0})},_g7:function(){var e=this._b5;this._d7&&!this._j8?this._h3():this._g8()},_g8:function(){delete this._i7,delete this._j9,delete this._j8,delete this._j2,delete this._j1,delete this._i9,delete this._d6,delete this._d7,this._b3.call(this._b4,!0),delete this._b3,delete this._b4,this._b5._e2()},_h3:function(){var e=this._b5,t=e._b6,n=this._b6,r="DELETE FROM "+n;e._e8({i2:[r],j7:this,j6:this._g8,j5:!0})},_h4:function(){var e=this._b5,t=this._b6,n=[],r=this._i9,i=this._j9,s;while(r.length)n.push("DROP INDEX "+this._h5(t,r.shift()));for(s in i)i[s]?n.push(this._f6(t,s)):n.push(this._f7(t,s));n.length?e._e8({i2:n,j7:this,j6:this._g7,j5:!0}):this._g7()},get:function(e,n,r){var i=this._b5,s=this._b7,o,u=i._b6,a=this._b6,f,l=[],c=[];if(!e)throw t;for(o in s)l.push(o+" = ?"),c.push(this._t(o,e));f="SELECT * FROM "+a+" WHERE "+l.join(" OR "),i._e8({i2:f,i3:[c],j6:this._h1,j7:this,d4:n,d5:r})},getByCallback:function(e,n,r){var i=this._b5,s=this._b7,o,u=this._b6,a;if(typeof e!="function")throw t;a="SELECT * FROM "+u,i._e8({i2:a,j7:this,j6:this._g9,d4:n,d5:r,d3:e})},_g9:function(e,t){var n=this._b7,r=e.rows,i=0,s=r.length,o,u,a=t.d3,f,l=[];for(;i<s;i++){o=r.item(i),f={};for(u in o)f[u]=n[u].gg(o[u]);a(f)&&l.push(f)}t.d4.call(t.d5,l)},getByIndex:function(e,n,r,i){var s=this._b5,o=s._b6,u=this._b6,a,f=[],l=[],c,h,p,d;if(this._c1!==e&&this._b8.indexOf(e)===-1)throw t;if(!n)throw t;Array.isArray(n)||(n=[n]);for(p=0,d=n.length;p<d;p++)c=n[p],h=this._t(e,c),f.push(e+" = ?"),l.push(h);a="SELECT * FROM "+u+(f.length?" WHERE "+f.join(" OR "):""),s._e8({i2:a,i3:[l],j7:this,j6:this._h1,d4:r,d5:i})},getByIndexWithRange:function(e,n,r,i){var s=this._b5,o=s._b6,u=this._b6,a=this._b7,f=/^(?:>|<|>=|<=|=)$/,l,c=[],h,p,d=[],v;if(this._c1!==e&&this._b8.indexOf(e)===-1)throw t;for(l in n){if(!f.test(l))throw t;h=n[l],p=this._t(e,h);if(!p&&p!==a[e].ee)throw t;c.push(e+" "+l+" ?"),d.push(p)}if(!c.length)throw t;v="SELECT * FROM "+u+" WHERE "+c.join(" AND "),s._e8({i2:v,i3:[d],j7:this,j6:this._h1,d4:r,d5:i})},getAll:function(e,t){var n=this._b5,r=this._b6,i="SELECT * FROM "+r;n._e8({i2:i,j7:this,j6:this._h1,d4:e,d5:t})},getWithLike:function(e,n,r,i){var s=this._b5,o=s._b6,u=this._b7,a=this._b6,f,l,c,h,p,d=[],v,m=[];if(typeof n!="object")throw t;h=Object.keys(n)[0],p=n[h];if(!h||!p)throw t;h==="both"?p="%"+p+"%":h==="start"?p+="%":h==="end"&&(p="%"+p),Array.isArray(e)||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw t;m.push(c+" LIKE ?"),d.push(p)}v="SELECT * FROM "+a+" WHERE "+m.join(" OR "),s._e8({i2:v,i3:[d],j7:this,j6:this._h1,d4:r,d5:i})},_h1:function(e,t){var n=this._b7,r=e.rows,i=0,s=r.length,o,u,a,f=[];for(;i<s;i++){o=r.item(i),a={};for(u in o)a[u]=n[u].gg(o[u]);f.push(a)}t.d4.call(t.d5,f)},put:function(e,n,r){var i=this._b5,s=i._b6,o=this._c2,u,a,f=this._b6,l=this._c1,c,h=[],d,v,m=[],g,y,b,w;!Array.isArray(e)&&typeof e=="object"&&(e=[e]);for(y=0,b=e.length;y<b;y++){g=e[y],c=[],d=[],v=[];for(u in g){if(o.indexOf(u)===-1)throw t;c.push(u),a=this._t(u,g[u]),u===l&&(!a||a<=0)?v.push("( SELECT last_id FROM"+p+'WHERE table_name = "'+f+'" )'):(d.push(a),v.push("?"))}h.push(d),m.push("INSERT OR ROLLBACK INTO "+f+" ( "+c.join(", ")+" ) "+"VALUES ( "+v.join(" , ")+" )")}w={i2:m,i3:h,d4:n,d5:r,i6:!0};if(i._c4)return w;i._e8(w)},set:function(e,n,r){var i=this._b5,s=this._b6,o=i._b6,u=this._b7,a,f,l,c,h,p,d,v,m,g=[],y,b=[],w,E,S;if(!e||typeof e!="object")throw t;Array.isArray(e)||(e=[e]);for(w=0,E=e.length;w<E;w++){f=e[w],y=[],m=[],v=[];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw t;if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw t}else f.target=[];h=f.data;for(p in h){d=h[p],l=this._t(p,d);if(!l&&l!==u[p].ee)throw t;m.push(p+" = ?"),y.push(l)}c=f.target;for(p in c){d=c[p],l=this._t(p,d);if(!l&&l!==u[p].ee)throw t;v.push(p+" = ?"),y.push(l)}b.push("UPDATE OR ROLLBACK "+s+" SET "+m.join(", ")+(v.length?" WHERE "+v.join(" AND "):"")),g.push(y)}S={i2:b,i3:g,i4:!0,d4:n,d5:r};if(i._c4)return S;i._e8(S)},del:function(e,n,r){var i=this._b5,s=i._b6,o=this._c1,u=this._b6,a,f,l,c=[],h,p,d;if(!o)throw t;if(!e)throw t;Array.isArray(e)||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this._t(o,a);if(!f)throw t;c.push(o+" = "+f)}l="DELETE FROM "+u+(c.length?" WHERE "+c.join(" OR "):""),d={i2:l,i5:!0,d4:n,d5:r};if(i._c4)return d;i._e8(d)},destroy:function(e,t){var n=this._b5,r=this._b6,i="DROP TABLE "+r;n._e8({j6:this._h2,j7:this,i2:i,d4:e,d5:t})},_h2:function(e,t){var n=this._b5;e&&n._e6(this,t)},empty:function(e,t){var n=this._b5,r=this._b6,i="DELETE FROM "+r;n._e8({i2:i,i5:!0,d4:e,d5:t})}},e.MSQTA=d})(window);