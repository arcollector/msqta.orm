(function(e){var t="MSQTA-ORM!",n="__msqta__",r="databases",i="name",s="dump",o=o||{};o.xx=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,o.yy=e.IDBTransaction||e.webkitIDBTransaction||e.msIDBTransaction,o.yy&&(!o.yy.READ_WRITE||!o.yy.READ_ONLY)&&(o.yy={READ_WRITE:"readwrite",READ_ONLY:"readonly"}),o.zz=e.IDBKeyRange||e.webkitIDBKeyRange||e.msIDBKeyRange,o.oo={a:function(){},b:function(){},rr:2097152,c:function(e){return e==="object"||e==="array"?this.d:e==="datetime"?this.h:e==="date"?this.e:e==="time"?this.g:e==="boolean"?this.n:this.o},d:function(e){return JSON.parse(e)},e:function(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2],0,0,0,0)},g:function(e){var t=new Date,n=e.split(":");return t.setHours(n[0]),t.setMinutes(n[1]),t.setSeconds(n[2]),t},h:function(e){var t=e.split(" "),n=t[0].split("-"),r=t[1].split(":");return new Date(n[0],n[1]-1,n[2],r[0],r[1],r[2],0)},n:function(e){return!!e},o:function(e){return e},ww:["batch","destroy"],vv:["del","destroy","empty","get","getAll","getWithLike","getByCallback","getByIndex","getByIndexWithRange","put","set"],p:function(e){var t=this.vv,n=this.a,r,i;for(r=0,i=t.length;r<i;r++)e[t[r]]=n},r:function(e){var t=this.ww,n=this.vv,r,i,s,o=this.a,u,a;for(u=0,a=t.length;u<a;u++)e[t[u]]=o;s=e.a2;for(r in s){i=s[r];for(u=0,a=n.length;u<a;u++)i[n[u]]=o}},s:function(t){t=t.toLowerCase();if(t==="websql"){if(e.openDatabase)return o.a8.c3}else if(t==="indexeddb"&&o.xx)return o.a8.c2;if(e.openDatabase)return o.a8.c3;if(o.xx)return o.a8.c2},t:function(n){var r=n.ORM,i=n.c4,s=n.implementation,u=n.schemaDefinition,a=n.c5,f={},l;if(!r)throw Error(t);return typeof a[1]=="function"?(f.callback=a[1],f.context=a[2]||e):typeof a[1]=="object"&&(f=a[1]),o.b6.prototype=i,l=new o.b6(r,u,f),l.x=o.oo.v,l.w=o.oo.u,l.c1=s,l.e7(),l},u:function(e,n){var r=this.b1,i=this.a9,s=r[e];if(!s)throw Error(t);return s.ii(n,s.hh)},ss:{string:"TEXT",integer:"INTEGER",object:"TEXT",array:"TEXT",date:"DATE",time:"TIME",datetime:"DATETIME","float":"REAL","boolean":"INTEGER"},tt:{string:"",integer:0,object:"{}",array:"[]",date:"0000-00-00",time:"00:00:00",datetime:"0000-00-00 00:00:00","float":0,"boolean":0},uu:{string:"","int":0,integer:0,text:"",object:{},array:[],date:new Date(0,0,0),time:new Date(0,0,0),datetime:new Date(0,0,0),"float":0,"boolean":!1},v:function(e){var n=this.c1,r=o.oo.ss,i=n==="webSQL"?o.oo.tt:o.oo.uu,s=this.a9,u=this.a8.a9,a=this.b1[e],f,l=a.type,c=r[l],h=a.allowNull;if(!c)throw Error(t);f=this.b1[e],f.hh=h?n==="webSQL"?null:null:i[l],f.ii=n==="webSQL"?o.oo.pp.y(l):o.oo.qq.y(l),f.jj=o.oo.c(l),f.kk=l==="date"||l==="time"||l==="datetime",n==="webSQL"&&(f.ll=l,f.mm=c+(h?" NULL":""),f.nn=l==="object"||l==="array")}},o.oo.pp={y:function(e){if(e==="string"||e==="text")return this.z;if(e==="int"||e==="integer"||e==="float")return this.aa;if(e==="object"||e==="array")return this.ee;if(e==="date")return this.bb;if(e==="time")return this.cc;if(e==="datetime")return this.dd;if(e==="boolean")return this.ff},z:function(e,t){return e||t},aa:function(e,t){return e-=0,e?e:t},bb:function(e,t){var n,r;return e instanceof Date&&+e>=0?(n=e.getMonth()+1,r=e.getDate(),e.getFullYear()+"-"+(n<10?"0"+n:n)+"-"+(r<10?"0"+r:r)):(n=/^(\d{4}-\d{2}-\d{2})(?: \d{2}:\d{2}(?::\d{2}))?$/.exec(e),n?n[1]:t)},cc:function(e,t){if(e instanceof Date&&+e>=0)return e.toTimeString().substring(0,8);var n=/^(?:\d{4}-\d{2}-\d{2} )?(\d{2}:\d{2})(:\d{2})?$/.exec(e);return n?n[1]+(n[2]||":00"):t},dd:function(e,t){var n,r;return e instanceof Date&&+e>=0?(n=e.getMonth()+1,r=e.getDate(),e.getFullYear()+"-"+(n<10?"0"+n:n)+"-"+(r<10?"0"+r:r)+" "+e.toTimeString().substring(0,8)):(n=/^(\d{4}-\d{2}-\d{2})(?: |T)(\d{2}:\d{2})(?:(:\d{2})[^Z]+Z|(:\d{2}))?$/.exec(e),n?n[1]+" "+n[2]+(n[3]||n[4]||":00"):t)},ee:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object")return e?typeof e=="string"?"'"+e+"'":e:t;try{return JSON.stringify(e)}catch(n){return t}},ff:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?1:e==="false"||e==="0"?0:t):e===1?1:e===0?0:t},gg:function(e){return e}},o.oo.qq={y:function(e){if(e==="string"||e==="text")return this.z;if(e==="int"||e==="integer"||e==="float")return this.aa;if(e==="object"||e==="array")return this.ee;if(e==="date")return this.bb;if(e==="time")return this.cc;if(e==="datetime")return this.dd;if(e==="boolean")return this.ff},z:function(e,t){return e?e+"":t},aa:function(e,t){return e-=0,e?e:t},bb:function(e,t){var n,r;return e instanceof Date&&!isNaN(e-0)?(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e):(n=/^(\d{4}-\d{2}-\d{2})(?: \d{2}:\d{2}(?::\d{2}))?$/.exec(e),n?(n=n[1].split("-"),new Date(n[0],n[1]-1,n[2],0,0,0,0)):t)},cc:function(e,t){if(e instanceof Date&&!isNaN(e-0))return e;var n=/^(\d{4}-\d{2}-\d{2} )?(\d{2}:\d{2})(:\d{2})?$/.exec(e);if(!n)return t;var r,i,s;return n[1]?(r=n[1].split("-"),r[1]=r[1]-1):(r=new Date,r=[r.getFullYear(),r.getMonth(),r.getDate()]),i=n[2].split(":"),s=n[3]||0,new Date(r[0],r[1],r[2],i[0],i[1],s,0)},dd:function(e,t){var n,r;if(e instanceof Date&&!isNaN(e-0))return e;n=/^(\d{4}-\d{2}-\d{2})(?: |T)(\d{2}:\d{2})(?::(\d{2})[^Z]+Z|:(\d{2}))?$/.exec(e);if(!n)return t;var i,s,o;return i=n[1].split("-"),s=n[2].split(":"),o=n[3]||n[4]||0,new Date(i[0],i[1]-1,i[2],s[0],s[1],o,0)},ee:function(e,t){return typeof e=="undefined"?t:typeof e!="object"?e?typeof e=="string"?"'"+e+"'":e:t:e},ff:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?!0:e==="false"||e==="0"?!1:t):e===1?!0:e===0?!1:t},gg:function(e){return e}},o.ORM=function(n,r,i){typeof n=="string"&&(n={name:n});if(!n.name)throw Error(t);return n.callback=typeof r=="function"?r:o.oo.b,n.context=i||e,o.a8.prototype=o.oo.s(n.prefered||""),new o.a8(n)},o.a8=function(e){var t=this.a9=e.name;this.forceDestroy=e.forceDestroy,this.a1=[],this.a2={},this.a3=[],this.Schema.a8=this,this.a4=!0,this.a5=[],this.a6=e.callback,this.a7=e.context,this.forceDestroy?this.d8(this.d2,this):this.d2()},o.b6=function(n,r,i){var s=n.a9,u=r.name;if(n.a2[u]&&!i.forceDestroy)throw Error(t);var a=r.fields;if(typeof a!="object"||!Object.keys(a).length)throw Error(t);var f=r.primaryKey;if(!f||f&&!a[f])throw Error(t);if(a[f].type!=="integer")throw Error(t);a[f].allowNull=!0;var l,c,h=[],p=[];for(l in a){c=a[l];if(c.index){if(!/^(integer|float|string|date|time|datetime|boolean)$/.test(c.type))throw Error(t);h.push(l),c.index=!0}else c.index=!1;c.unique?(p.push(l),c.unique=!0):c.unique=!1}n.a2[u]=this,this.a8=n,this.a9=u,this.b1=a,this.b2=h,this.b3=p,this.b4=f,this.b5=Object.keys(a),this.forceDestroy=i.forceDestroy,this.forceEmpty=this.forceDestroy?!1:i.forceEmpty,this.a6=typeof i.callback=="function"?i.callback:o.oo.b,this.a7=i.context||e},o.a8.c2={Schema:function(e){return o.oo.t({ORM:this.constructor.a8,c4:o.b6.c2,schemaDefinition:e,implementation:"indexedDB",c5:arguments})},m5:{l5:function(e){var t=e.ORM,n=t.o3,r=n.a9;this.ORM=t,this.n3=0,this.n2=!1,this.n4=null,this.n5=null,this.m6=e.m6,this.m7=e.m7,this.m8=e.m8,this.n1=e.n1,e.n6?(this.n8=this.l3,this.n9=s,this.o1=this.l2,this.n7=r):(this.n8=this.l2,this.n9=r,this.o1=this.l3,this.n7=s),this.l4()},l3:function(){return this.ORM.m1()},l2:function(){return this.ORM.k4()},l4:function(){var e=this,t=e.ORM,n=e.n9,r=e.n8();r.onsuccess=function(t){e.n5=this.result;var r=e.n5.transaction([n],o.yy.READ_ONLY),i=r.objectStore(n),s=i.openCursor();s.m9=e,s.onsuccess=e.l6},r.onerror=t.j8},l6:function(e){var t=this.m9,n=t.n5,r=this.result;r?t.n2?(t.n2=!1,n.close(),t.l7(r.value)):t.n3===0?(t.n3++,n.close(),t.l7(r.value)):(t.n2=!0,r.advance(t.n3),t.n3++):(n.close(),t.l9())},l7:function(e){var t=this,n=t.ORM,r=t.n7,i=t.o1();i.onsuccess=function(n){t.n4=this.result;var i=t.n4.transaction([r],o.yy.READ_WRITE),s=i.objectStore(r),u=t.n1(s,e,t.n3);u.m9=t,u.onsuccess=t.l8,u.onerror=t.l8},i.onerror=n.j8},l8:function(e){var t=this.m9;t.n4.close(),t.l4()},l9:function(){this.m6.call(this.m7,this.m8)}},d2:function(){var e=this,t=this.a9,n=this.m1();n.onupgradeneeded=function(e){var t=this.result,n;n=t.createObjectStore(r,{keyPath:"id",autoIncrement:!0}),n.createIndex(i,i,{unique:!0}),t.createObjectStore(s)},n.onsuccess=function(n){var s=this.result,u=s.transaction([r],o.yy.READ_WRITE),a=u.objectStore(r);a.index(i).get(t).onsuccess=function(n){var r=this.result;if(!r)e.o4=0,a.add({name:t,branch:0,schemas:{}}).onsuccess=function(t){s.close(),e.e7()};else{s.close();var i=r.branch;e.o4=i,e.e7()}}},n.onerror=function(e){this.a6.call(this.a7,null)}},e7:function(){this.a6.call(this.a7,!0),this.d5()},d8:function(t,s){var u=this,a=this.a9,f=o.xx.deleteDatabase(a);f.onsuccess=function(l){f=o.xx.open(n),f.onsuccess=function(n){var f=this.result,l=f.transaction([r],o.yy.READ_WRITE),c=l.objectStore(r);c.index(i).get(a).onsuccess=function(n){var r=this.result;c.delete(r.id).onsuccess=function(n){f.close(),o.oo.r(u),t.call(s||e,!0)}}}},f.onerror=function(n){t.call(s||e,!1)}},d4:function(e){this.a5.push(e),this.a4||this.d5()},d5:function(){var e=this,t=this.a9,n;this.a5.length?(n=this.m1(),n.onsuccess=function(n){var s=this.result,u=s.transaction([r],o.yy.READ_WRITE),a=u.objectStore(r);a.index(i).get(t).onsuccess=function(t){var n=this.result;e.j6(s,a,n)}},n.onerror=this.j8):this.d6()},j6:function(e,t,n){var r=this,i=this.a9,s=this.a5.shift(),o=s.a9,u=n.schemas[o],a={fields:s.b1,primaryKey:s.b4};this.o3=s,u?s.forceDestroy?this.f6(this.f9):(e.close(),this.f2(u,a)?s.forceEmpty?this.f6(this.f9,this):this.f4():s.forceEmpty?this.g1():this.k1()):(this.j7(t,n),e.close(),this.f3())},f2:function(e,t){var n=!1,r=e.fields,i=t.fields,s,o;for(fieldName in r){s=r[fieldName],o=i[fieldName];if(!o||s.type!==o.type||s.index!==o.index||s.unique!==o.unique){n=!0;break}}var u=e.primaryKey,a=t.primaryKey;return!n&&(u&&(!a||u!==a)||!u&&a)&&(n=!0),n},j7:function(e,t){var n=this.o3,r=n.a9,i=n.b4,s=n.b9;return t.schemas[r]={fields:s,primaryKey:i},req=e.put(t),req},f3:function(){var e=this,t=this.o3,n=this.a9,r=t.a9,i=this.k3();i.onupgradeneeded=function(t){var n=this.result;e.j9(n)},i.onsuccess=function(t){var n=this.result;n.close(),e.k2(e.k1,e)},i.onerror=this.j8},f4:function(){var e=this,t=this.m1();t.onsuccess=function(t){var n=this.result,r=n.transaction([s],o.yy.READ_WRITE),i=r.objectStore(s);i.clear().onsuccess=function(t){n.close(),e.f5()}},t.onerror=this.j8},f5:function(){var e=this,t=this.o3,n=t.a9,r=function(e,t,n){return e.add(t,n)};this.m5.l5({ORM:this,n6:!1,m6:this.f6,m7:this,m8:this.f7,n1:r})},f6:function(e){var t=this,n=this.o3,r=n.a9,i=this.a9,s=this.k3();s.onupgradeneeded=function(e){var n=this.result;n.deleteObjectStore(r),t.j9(n)},s.onsuccess=function(n){var r=this.result;r.close(),t.k2(e,t)},s.onerror=this.j8},f7:function(){var e=this,t=this.o3,n=t.a9,r=t.b1,i=function(e,t){var n,i;for(i in t)n=r[i],n?t[i]=n.ii(t[i],n.hh):delete t[i];return e.put(t)};this.m5.l5({ORM:this,n6:!0,m6:this.f8,m7:this,n1:i})},f8:function(){var e=this,t=this.a9,n;n=this.m1(),n.onsuccess=function(t){var n=this.result,r=n.transaction([s],o.yy.READ_WRITE),i=r.objectStore(s);i.clear().onsuccess=function(t){n.close(),e.f9()}},n.onerror=this.j8},f9:function(){var e=this,t=this.a9,n=this.o3,s=n.a9,u;u=this.m1(),u.onsuccess=function(n){var s=this.result,u=s.transaction([r],o.yy.READ_WRITE),a=u.objectStore(r);a.index(i).get(t).onsuccess=function(t){var n=this.result,r;r=e.j7(a,n),r.onsuccess=function(t){s.close(),e.g2()}}},u.onerror=this.j8},g1:function(){var e=this,t=this.a9,n=this.o3,r=n.a9,i;i=this.k4(),i.onsuccess=function(t){var n=this.result,i=n.transaction([r],o.yy.READ_WRITE),s=i.objectStore(r);s.clear().onsuccess=function(t){e.g2()}},i.onerror=this.j8},g2:function(){this.k1()},j8:function(){this.k1(!1)},j9:function(e){var t=this.o3,n=t.b1,r=t.a9,i=t.b4,s,o,u,a;a=e.createObjectStore(r,{keyPath:i,autoIncrement:!0});for(s in n)o=n[s],o.index&&(u=o.unique,a.createIndex(s,s,u?{unique:!0}:{}))},k1:function(e){var t=this.o3,n=t.a6,r=t.a7;n.call(r,typeof e=="undefined"?!0:e),delete t.a6,delete t.a7,delete this.o3,this.d5()},d6:function(){this.a4=!1},k2:function(t,n){var s=this,u=this.a9,a=this.o4,f;f=this.m1(),f.onsuccess=function(s){var f=this.result,l=f.transaction([r],o.yy.READ_WRITE),c=l.objectStore(r);c.index(i).get(u).onsuccess=function(r){var i=this.result;i.branch=a,c.put(i),f.close(),t&&t.call(n||e)}}},k3:function(){var e=this.a9,t=this.o4+1;return this.o4=t,o.xx.open(e,t)},k4:function(){var e=this.a9,t=this.o4;return o.xx.open(e,t)},m1:function(){return o.xx.open(n,1)},k5:function(t){typeof t.c7!="function"&&(t.c7=o.oo.b),t.c8||(t.c8=e),this.a1.push(t);if(this.b8)return;this.b8=!0,this.k6()},k6:function(){var e=this.a1.shift();e.type==="destroy"?this.g5(e):this.m2(e,this._exec2,this)},_exec2:function(e){var t=e.schema,n=e.type;this["_"+n](e)},m2:function(e,t,n){var r=e.schema,i=this.k4();i.onsuccess=function(i){var s=this.result,u=e.type,a=s.transaction([r],o.yy.READ_WRITE);objectStore=a.objectStore(r),e.c9=objectStore,e.d1=s,t.call(n,e)}},e5:function(){this.b8=!1,this.a1.length&&this.k6()},k7:function(e,t){e.d1.close(),e.c7.call(e.c8,t),this.e5()},_put:function(e){var t=this,n=e.c9,r=e.data,i=0,s=r.length,o=function(n){i===s?t.k7(e,n):(u(),i++)},u=function(){var u=r[i],a=n.add(u);a.onsuccess=function(e){o(this.result)},a.onerror=function(r){i!==s?(e.d1.close(),t.m2(e,function(){n=e.c9,o(!1)},t)):o(!1)}};o()},_set:function(e){var t=this,n=e.c9,r=e.data,i=e.o6,s=e.primaryKey,o=0,u=0,a=r.length,f=function(){u===a?t.k7(e,o):(l(),u++)},l=function(){var e=r[u],t=e.data,i=e.target,a=i[s],l,c=Object.keys(i).length;a?n.get(a).onsuccess=function(e){var r=this.result,i;if(r){for(l in t)r[l]=t[l];i=n.put(r),i.onsuccess=function(e){this.result&&o++,f()},i.onerror=function(e){f(!1)}}else f()}:n.openCursor().onsuccess=function(e){var n=this.result;if(n){var r=n.value,s=0,u;for(l in i)r[l]===i[l]&&s++;if(s===c){for(l in t)r[l]=t[l];u=n.update(r),u.onsuccess=function(e){this.result&&o++,n.continue()},u.onerror=function(e){n.continue()}}else n.continue()}else f()}};f()},_del:function(e){var t=this,n=e.c9;n.count().onsuccess=function(n){e.o5=this.result,t.m3(e)}},m3:function(e){var t=this,n=e.data,r=e.primaryKey,i=0,s=n.length,o=function(){i===s?t.m4(e):(u(),i++)},u=function(){var e=n[i];objectStore.delete(e[r]).onsuccess=function(e){o()}};o()},m4:function(e){var t=this,n=e.c9;n.count().onsuccess=function(n){t.k7(e,e.o5-this.result)}},_empty:function(e){var t=this,n,r=e.c9;r.count().onsuccess=function(i){n=this.result,r.clear().onsuccess=function(r){t.k7(e,n)}}},g5:function(e){var t=this,n=e.schema,r=this.k3();r.onupgradeneeded=function(e){var t=this.result;t.deleteObjectStore(n)},r.onsuccess=function(n){var r=this.result;r.close(),t.k8(e)}},k8:function(e){var t=this,n=this.a9,s=e.schema,u=this.a2[s],a=this.m1();a.onsuccess=function(a){var f=this.result,l=f.transaction([r],o.yy.READ_WRITE),c=l.objectStore(r);c.index(i).get(n).onsuccess=function(n){var r=this.result;delete r.schemas[s],c.put(r).onsuccess=function(n){t.k2(function(){e.d1=f,delete t.a2[s],o.oo.p(u),this.k7(e,!0)},t)}}}},batch:function(n,r,i){var s=this.a9,u;if(!(n instanceof Array)||!n.length)throw Error(t);typeof r!="function"&&(r=o.oo.b),typeof i!="object"&&(i=e),u={data:n,c7:r,c8:i};if(this.b7){this.a3.push(u);return}this.b7=!0,this.e6(u)},e6:function(n){var r=n.data,i=["set","put","del"],s=0,u=r.length,a,f,l,c;for(;s<u;s++){f=r[s],l=f.schema;if(!(l instanceof o.b6))throw Error(t);c=f.type.toLowerCase();if(i.indexOf(c)===-1)throw Error(t);a=l[c](f.data),a.c7=o.oo.b,a.c8=e,this.a1.push(a)}a=this.a1[this.a1.length-1],a.c7=n.c7,a.c8=n.c8,this.b7=!1,this.b8||this.e5()},destroy:function(e,t){typeof e!="function"&&(e=o.oo.a),this.d8(e,t)}},o.b6.c2={e7:function(){var e=this.a8,t=this.b1,n,r,i={};for(n in t)r=t[n],this.x(n),i[n]={type:r.type,index:r.index,unique:r.unique};this.b9=i,e.d4(this)},get:function(e,n,r){var i=this.a8,s=i.a9,o=this.b1,u,a={},f=this.a9;if(!e)throw Error(t);for(u in o)a[u]=this.w(u,e);var l=function(e,t,n){for(var r in e)if(e[r]===n[r])return!0;return!1};this.k9({callback:l,comparator:a,fields:null},n,r)},getAll:function(e,t){var n=this.a8,r=n.a9,i=this.a9,s=function(){return!0};this.k9({callback:s,comparator:null,fields:null},e,t)},getWithLike:function(e,n,r,i){var s=this.a8,o=s.a9,u=this.b1,a=this.a9,f,l,c,h,p;if(typeof n!="object")throw Error(t);h=Object.keys(n)[0],p=n[h];if(!h||!p)throw Error(t);h==="both"?p=new RegExp(p,"i"):h==="start"?p=new RegExp("^"+p,"i"):h==="end"&&(p=new RegExp(p+"$","i")),e instanceof Array||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw Error(t)}var d=function(e,t,n){var r,i=0,s=t.length;for(;i<s;i++){r=t[i];if(n.test(e[r]))return!0}return!1};this.k9({callback:d,comparator:p,fields:e},r,i)},getByCallback:function(e,n,r){var i=this.a8,s=i.a9,o=this.a9;if(typeof e!="function")throw Error(t);this.k9({callback:e,comparator:null,fields:null},n,r)},k9:function(t,n,r){var i={filterData:t,c7:n||o.oo.b,c8:r||e,self:this};(function(e){var t=e.self,n=t.a8,r=n.k4(),i,s=n.a9,u=t.a9,a=e.filterData,f=a.callback,l=a.comparator,c=a.fields,h=[];r.onsuccess=function(t){var n=this.result,r=n.transaction([u],o.yy.READ_ONLY);objectStore=r.objectStore(u),i=n,objectStore.openCursor().onsuccess=function(t){var n=this.result,r;n?(r=n.value,f(r,c,l)&&h.push(r),n.continue()):(i.close(),e.c7.call(e.c8,h))}}})(i)},getByIndex:function(e,n,r,i){var s=this.a8,u=s.a9,a=this.a9,f={},l=[],c,h,p,d,v;if(this.b4!==e&&this.b2.indexOf(e)===-1)throw Error(t);this.b4===e?f.pk=e:f.index=e;if(!n)throw Error(t);n instanceof Array||(n=[n]);if(n.length===1)f.keyRange=o.zz.only(this.w(e,n[0])),this.l1(f,r,i);else{for(d=0,v=n.length;d<v;d++)h=n[d],p=this.w(e,h),l.push(p);c=function(e,t,n){for(var r=0,i=t.length;r<i;r++)if(t[r]===e[n])return!0;return!1},this.k9({callback:c,comparator:f.pk||f.index,fields:l},r,i)}},getByIndexWithRange:function(e,n,r,i){var s=this.a8,u=s.a9,a=this.a9,f=this.b1,l=/^(?:>|<|>=|<=|=)$/,c,h={},p={},d,v,m=f[e],g,y;if(this.b4!==e&&this.b2.indexOf(e)===-1)throw Error(t);this.b4===e?h.pk=e:h.index=e,g=n["="],g&&m.kk&&(n={">=":g,"<=":g});for(c in n){if(!l.test(c))throw Error(t);g=n[c],y=this.w(e,g);if(!y&&y!==m.hh)throw Error(t);p[c]=y}d=Object.keys(p).length;if(d===2)try{p[">"]&&p["<"]?v=o.zz.bound(p[">"],p["<"],!0,!0):p[">="]&&p["<="]?v=o.zz.bound(p[">="],p["<="]):p[">"]&&p["<="]?v=o.zz.bound(p[">"],p["<="],!0,!1):v=o.zz.bound(p[">="],p["<"],!1,!0)}catch(b){throw Error(t)}else d===1&&(p[">"]?v=o.zz.lowerBound(p[">"],!0):p[">="]?v=o.zz.lowerBound(p[">="]):p["<"]?v=o.zz.upperBound(p["<"],!0):p["<="]?v=o.zz.upperBound(p["<="]):v=o.zz.only(p["="]));if(!v)throw Error(t);h.keyRange=v,this.l1(h,r,i)},l1:function(t,n,r){var i={range:t,c7:n||o.oo.b,c8:r||e,self:this};(function(e){var t=e.self,n=t.a8,r=e.range,i=r.pk,s=r.index,u=r.keyRange,a=n.k4(),f,l=n.a9,c=t.a9,h=[],p=function(t){var n=this.result;n?(h.push(n.value),n.continue()):(f.close(),e.c7.call(e.c8,h))};a.onsuccess=function(e){var t=this.result,n=t.transaction([c],o.yy.READ_ONLY);objectStore=n.objectStore(c),f=t,i?objectStore.openCursor(u).onsuccess=p:objectStore.index(s).openCursor(u).onsuccess=p}})(i)},put:function(e,t,n){var r=this.a8,i=r.a9,s=this.b5,o,u=this.b4,a=this.a9,f,l,c,h,p=s.length,d;!(e instanceof Array)&&typeof e=="object"&&(e=[e]);for(l=0,c=e.length;l<c;l++){f=e[l];for(h=0;h<p;h++)o=s[h],f[o]=this.w(o,f[o]);f[u]<=0&&delete f[u]}d={type:"put",schema:a,primaryKey:u,data:e,c7:t,c8:n};if(r.b7)return d;r.k5(d)},set:function(e,n,r){var i=this.a8,s=this.a9,o=this.b1,u=i.a9,a,f,l,c,h,p,d,v={},m={},g=[],y,b,w;if(!e||typeof e!="object")throw Error(t);e instanceof Array||(e=[e]);for(y=0,b=e.length;y<b;y++){f=e[y];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw Error(t);if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw Error(t)}else f.target=[];c=f.target;for(p in c){d=c[p],l=this.w(p,d);if(!l&&l!==o[p].hh)throw Error(t);v[p]=l}h=f.data;for(p in h){d=h[p],l=this.w(p,d);if(!l&&l!==o[p].hh)throw Error(t);m[p]=l}g.push({data:m,target:v}),m={},v={}}w={type:"set",schema:s,o6:this.b2,primaryKey:this.b4,data:g,c7:n,c8:r};if(i.b7)return w;i.k5(w)},del:function(e,n,r){var i=this.a8,s=i.a9,o=this.b4,u=this.a9,a,f,l,c=[],h,p,d;if(!o)throw Error(t);if(!e)throw Error(t);e instanceof Array||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this.w(o,a);if(!f)throw Error(t);l={},l[o]=f,c.push(l)}d={type:"del",schema:u,primaryKey:o,data:c,c7:n,c8:r};if(i.b7)return d;i.k5(d)},destroy:function(e,t){var n=this.a8,r=n.a9,i=this.a9;n.k5({type:"destroy",schema:i,c7:e,c8:t})},empty:function(e,t){var n=this.a8,r=n.a9,i=this.a9;n.k5({type:"empty",schema:i,c7:e,c8:t})}},o.a8.c3={Schema:function(e){return o.oo.t({ORM:this.constructor.a8,c4:o.b6.c3,schemaDefinition:e,implementation:"webSQL",c5:arguments})},d2:function(){(function(t){t.h1=e.openDatabase(n,1,"",o.oo.rr),t.h1.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS databases( id INTEGER PRIMARY KEY, name TEXT UNIQUE, schemas TEXT )"),e.executeSql('SELECT * FROM databases WHERE name = "'+t.a9+'"',[],function(e,n){t.d3(n)})})})(this)},d3:function(t){var n=t.rows;this.h2=n.length?JSON.parse(n.item(0).schemas):{},this.h3=[],this.h4=e.openDatabase(this.a9,1,"",o.oo.rr),this.a6.call(this.initContext,!0),this.d5()},d4:function(e){this.a5.push(e),this.a4||(this.a4=!0,this.d5())},d5:function(){var e=this,t=this.a9;this.a5.length?this.a5.shift().e8():this.d6()},d6:function(){this.a4=!1},d7:function(e,t,n){var r=this,i=this.a9,s=this.h2;this.h1.transaction(function(r){r.executeSql('REPLACE INTO databases( name, schemas ) VALUES( "'+i+'", '+"'"+JSON.stringify(s)+"'"+")",[],function(){e.call(t,n)})})},d8:function(e,t){this.destroy(e,t)},d9:function(e,t){var n=e.a9;delete this.a2[n],delete this.h2[n],o.oo.p(e),this.d7(t.c7,t.c8,!0)},e1:function(e){},e2:function(n){var r=n.c7,i=n.c8;if(r&&typeof r!="function")throw Error(t);r||(n.c7=o.oo.b);if(i&&typeof i!="object")throw Error(t);i||(n.c8=e);if(this.b8){n.i9?this.h3.push(n):this.a1.push(n);return}this.b8=!0,this.e3(n)},e3:function(e){this.h5=e;var t=this,n=0,r=e.h6;r instanceof Array||(r=[r]);var i=e.h8?function(e,t){n+=t.rowsAffected}:o.oo.a,s=function(r,i){e.h8?e.j3=i.rowsAffected+n:e.i1?e.j3=i.insertId:e.h9&&(e.j3=i.rowsAffected),t.e4(i)},u=function(e,n){t.e1(n)},a=function(e,n){t.e1(n),t.e4(!1)};this.h4.transaction(function(t){var n,o=r.length;while(o--)n=r.shift(),t.executeSql(n,e.h7?e.h7.shift():[],o?i:s,o?u:a)})},e4:function(e){queryData=this.h5,this.b8=!1,e||(queryData.j3=!1),queryData.j1?queryData.j1.call(queryData.j2,e,queryData):queryData.c7.call(queryData.c8,queryData.j3),this.e5()},e5:function(){this.b8||(this.h3.length?this.e2(this.h3.shift()):this.a1.length&&!this.a4&&this.e2(this.a1.shift()))},batch:function(n,r,i){var s=this.a9,u;if(!(n instanceof Array)||!n.length)throw Error(t);typeof r!="function"&&(r=o.oo.b),typeof i!="object"&&(i=e),u={data:n,callback:r,context:i};if(this.b7){this.a3.push(u);return}this.b7=!0,this.e6(u)},e6:function(e){var n=e.data,r=["set","put","del"],i,s,u,a=0,f=n.length;for(;a<f;a++){i=n[a],s=i.schema;if(!(s instanceof o.b6))throw Error(t);u=i.type.toLowerCase();if(r.indexOf(u)===-1)throw Error(t);this.a1.push(s[u](i.data))}var l=this.a1[this.a1.length-1];l.c7=e.callback,l.c8=e.context,this.b7=!1,this.e5(),this.a3.length&&this.e6(this.a3.shift())},destroy:function(t,n){typeof t!="function"&&(t=o.oo.a),t.call(n||e,!1)}},o.b6.c3={e7:function(){var e=this.b1,t,n,r=this.a8,i=r.a9,s=this.a9,o=[],u=this.b4,a,f={},l,c,h={};for(n in e)t=e[n],a=[],u===n?a.push("PRIMARY KEY"):(l=t.index,c=t.unique,l&&c?f[n]=!0:c?a.push("UNIQUE"):l&&(f[n]=!1)),this.x(n),h[n]={type:t.type,index:t.index,unique:t.unique},o.push(n+" "+e[n].mm+(a.length?" "+a.join(" "):""));this.i2='CREATE TABLE "'+s+'" ( '+o.join(", ")+" )",this.b9=h,this.j5=f,this.i4=[],r.d4(this)},e8:function(){var e=this.a8,t=e.a9,n=this.a9,r=this.i2,i,s,o;this.forceDestroy?(i="DROP TABLE IF EXISTS "+n,e.e2({h6:[i,r],j2:this,j1:this.f5,i9:!0})):(o={fields:this.b9,primaryKey:this.b4},s=e.h2[n],s?this.f2(s,o):(e.h2[n]=o,this.a8.d7(this.f3,this)))},e9:function(e,t,n){return"CREATE UNIQUE INDEX "+this.g9(e,t)+" ON "+(n||e)+" ( "+t+" )"},f1:function(e,t,n){return"CREATE INDEX "+this.g9(e,t)+" ON "+(n||e)+" ( "+t+" )"},g9:function(e,t){return e+"_"+t},f2:function(e,t){var n=this.a8,r=n.a9,i=this.a9,s=!1,o=e.fields,u=t.fields,a,f,l;for(l in o){a=o[l],f=u[l];if(!f||a.type!==f.type||a.unique!==f.unique){s=!0;break}}var c=e.primaryKey,h=t.primaryKey;!s&&(c&&(!h||c!==h)||!c&&h)&&(s=!0);if(s)n.h2[i]=t,this.a8.d7(this.f4,this);else{var p=[],d=this.b2,v=this.j5;for(l in o)a=o[l],a.index&&(d.indexOf(l)===-1?p.push(l):delete v[l]);p.length||Object.keys(v).length?(this.i4=p,n.h2[i]=t,this.a8.d7(this.g8,this)):this.forceEmpty?this.g7():this.g6()}},f3:function(){var e=this.a8,t=this.a9,n=e.a9,r=this.i2;e.e2({h6:r,j2:this,j1:this.g2,i9:!0})},f4:function(){var e=this.a8,t=this.i2,n=this.a9,r=n+ +(new Date),i=t.replace('CREATE TABLE "'+n+'"','CREATE TABLE "'+r+'"');this.i5=0,this.i6=r,e.e2({h6:i,j2:this,j1:this.f5,i9:!0})},f5:function(){var e=this.a8,t=e.a9,n=this.a9,r=this.i6,i=[],s=this.j5;for(fieldName in s)i.push("DROP INDEX IF EXISTS "+this.g9(n,fieldName)),s[fieldName]?i.push(this.e9(n,fieldName,r)):i.push(this.f1(n,fieldName,r));i.length?e.e2({h6:i,j2:this,j1:this.f6,i9:!0}):this.f6()},f6:function(){var e=this.a8,t=this.a9,n=this.i6,r=this.i5,i;this.forceEmpty?(this.j4=!0,this.g6()):this.forceDestroy?this.g2():this.f7()},f7:function(){var e=this.a8,t=this.a9,n=this.i6,r="SELECT * FROM "+t+" LIMIT "+this.i5+", 500";e.e2({h6:r,j2:this,j1:this.f8,i9:!0})},f8:function(e){var t=this.a8,n=this.b1,r=this.a9,i=this.i6,s=e.rows,o,u,a,f=[],l,c=[],h=[],p=[],d=[],v,m,g,y;if(!s.length)this.f9();else{o=s.item(0);for(u in o)n[u]&&f.push(u);for(u in n)a=n[u],f.indexOf(u)===-1&&(f.push(u),h.push(a.hh),c.push("?"));for(m=0,g=s.length;m<g;m++){v=[],l=[],o=s.item(m);for(u in o)a=n[u],a&&(l.push("?"),a.nn?v.push(o[u]):v.push(a.ii(o[u],a.hh)));p.push("INSERT INTO "+i+" ( "+f.join(", ")+" ) VALUES ( "+l.concat(c).join(", ")+" )"),d.push(v.concat(h))}y={h6:p,h7:d,j2:this,i9:!0},g===500?(this.i5+=500,y.j1=this.f7):y.j1=this.f9,t.e2(y)}},f9:function(){var e=this.a8,t=this.a9,n="DROP TABLE "+t,r=this.i6,i="ALTER TABLE "+r+" RENAME TO "+t;e.e2({h6:[n,i],j2:this,j1:this.g1,i9:!0})},g1:function(){var e=this.a8;this.g2()},g2:function(){var e=this.a8;this.forceEmpty&&!this.j4?this.g7():this.g6()},g6:function(){delete this.i2,delete this.j5,delete this.j4,delete this.i6,delete this.i5,delete this.i4,this.a6.call(this.a7,!0),delete this.a6,delete this.a7,this.a8.d5()},g7:function(){var e=this.a8,t=e.a9,n=this.a9,r="DELETE FROM "+n;e.e2({h6:[r],j2:this,j1:this.g6,i9:!0})},g8:function(){var e=this.a8,t=this.a9,n=[],r=this.i4,i,s=this.j5;while(r.length)n.push("DROP INDEX "+this.g9(t,r.shift()));for(i in s)s[i]?n.push(this.e9(t,i)):n.push(this.f1(t,i));e.e2({h6:n,j2:this,j1:this.g2,i9:!0})},get:function(e,n,r){var i=this.a8,s=this.b1,o,u=i.a9,a=this.a9,f,l=[],c=[];if(!e)throw Error(t);for(o in s)l.push(o+" = ?"),c.push(this.w(o,e));f="SELECT * FROM "+a+" WHERE "+l.join(" OR "),i.e2({h6:f,h7:[c],j1:this.g4,j2:this,c7:n,c8:r})},getByCallback:function(e,n,r){var i=this.a8,s=this.b1,o,u=this.a9,a;if(typeof e!="function")throw Error(t);a="SELECT * FROM "+u,i.e2({h6:a,j2:this,j1:this.g3,c7:n,c8:r,c6:e})},g3:function(e,t){var n=this.b1,r=e.rows,i=0,s=r.length,o,u,a=t.c6,f,l=[];for(;i<s;i++){o=r.item(i),f={};for(u in o)f[u]=n[u].jj(o[u]);a(f)&&l.push(f)}t.c7.call(t.c8,l)},getByIndex:function(e,n,r,i){var s=this.a8,o=s.a9,u=this.a9,a,f=[],l=[],c,h,p,d;if(this.b4!==e&&this.b2.indexOf(e)===-1)throw Error(t);if(!n)throw Error(t);n instanceof Array||(n=[n]);for(p=0,d=n.length;p<d;p++)c=n[p],h=this.w(e,c),f.push(e+" = ?"),l.push(h);a="SELECT * FROM "+u+(f.length?" WHERE "+f.join(" OR "):""),s.e2({h6:a,h7:[l],j2:this,j1:this.g4,c7:r,c8:i})},getByIndexWithRange:function(e,n,r,i){var s=this.a8,o=s.a9,u=this.a9,a=this.b1,f=/^(?:>|<|>=|<=|=)$/,l,c=[],h,p,d=[],v;if(this.b4!==e&&this.b2.indexOf(e)===-1)throw Error(t);for(l in n){if(!f.test(l))throw Error(t);h=n[l],p=this.w(e,h);if(!p&&p!==a[e].hh)throw Error(t);c.push(e+" "+l+" ?"),d.push(p)}if(!c.length)throw Error(t);v="SELECT * FROM "+u+" WHERE "+c.join(" AND "),s.e2({h6:v,h7:[d],j2:this,j1:this.g4,c7:r,c8:i})},getAll:function(e,t){var n=this.a8,r=this.a9,i="SELECT * FROM "+r;n.e2({h6:i,j2:this,j1:this.g4,c7:e,c8:t})},getWithLike:function(e,n,r,i){var s=this.a8,o=s.a9,u=this.b1,a=this.a9,f,l,c,h,p,d=[],v,m=[];if(typeof n!="object")throw Error(t);h=Object.keys(n)[0],p=n[h];if(!h||!p)throw Error(t);h==="both"?p="%"+p+"%":h==="start"?p+="%":h==="end"&&(p="%"+p),e instanceof Array||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw Error(t);m.push(c+" LIKE ?"),d.push(p)}v="SELECT * FROM "+a+" WHERE "+m.join(" OR "),s.e2({h6:v,h7:[d],j2:this,j1:this.g4,c7:r,c8:i})},g4:function(e,t){var n=this.b1,r=e.rows,i=0,s=r.length,o,u,a,f=[];for(;i<s;i++){o=r.item(i),a={};for(u in o)a[u]=n[u].jj(o[u]);f.push(a)}t.c7.call(t.c8,f)},put:function(e,t,n){var r=this.a8,i=r.a9,s=this.b5,o,u=this.a9,a,f=[],l,c,h=[],p,d,v,m,g=s.length,y;!(e instanceof Array)&&typeof e=="object"&&(e=[e]);for(d=0,v=e.length;d<v;d++){p=e[d],a=[],l=[],c=[];for(m=0;m<g;m++)o=s[m],a.push(o),l.push(this.w(o,p[o])),c.push("?");f.push(l),h.push("INSERT INTO "+u+" ( "+a.join(", ")+" ) "+"VALUES ( "+c.join(" , ")+" )")}y={h6:h,h7:f,c7:t,c8:n,i1:!0};if(r.b7)return y;r.e2(y)},set:function(e,n,r){var i=this.a8,s=this.a9,o=i.a9,u=this.b1,a,f,l,c,h,p,d,v,m,g=[],y,b=[],w,S,x;if(!e||typeof e!="object")throw Error(t);e instanceof Array||(e=[e]);for(w=0,S=e.length;w<S;w++){f=e[w],y=[],m=[],v=[];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw Error(t);if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw Error(t)}else f.target=[];h=f.data;for(p in h){d=h[p],l=this.w(p,d);if(!l&&l!==u[p].hh)throw Error(t);m.push(p+" = ?"),y.push(l)}c=f.target;for(p in c){d=c[p],l=this.w(p,d);if(!l&&l!==u[p].hh)throw Error(t);v.push(p+" = ?"),y.push(l)}b.push("UPDATE "+s+" SET "+m.join(", ")+(v.length?" WHERE "+v.join(" AND "):"")),g.push(y)}x={h6:b,h7:g,h8:!0,c7:n,c8:r};if(i.b7)return x;i.e2(x)},del:function(e,n,r){var i=this.a8,s=i.a9,o=this.b4,u=this.a9,a,f,l,c=[],h,p,d;if(!o)throw Error(t);if(!e)throw Error(t);e instanceof Array||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this.w(o,a);if(!f)throw Error(t);c.push(o+" = "+f)}l="DELETE FROM "+u+(c.length?" WHERE "+c.join(" OR "):""),d={h6:l,h9:!0,c7:n,c8:r};if(i.b7)return d;i.e2(d)},destroy:function(e,t){var n=this.a8,r=this.a9,i="DROP TABLE "+r;n.e2({j1:this.g5,j2:this,h6:i,c7:e,c8:t})},g5:function(e,t){var n=this.a8;e&&n.d9(this,t)},empty:function(e,t){var n=this.a8,r=this.a9,i="DELETE FROM "+r;n.e2({h6:i,h9:!0,c7:e,c8:t})}},e.MSQTA=o})(window);