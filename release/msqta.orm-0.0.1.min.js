(function(e){var t="MSQTA-ORM!",n="__msqta__",r="databases",i="name",s="dump",o=o||{};o._xx=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,o._yy=e.IDBTransaction||e.webkitIDBTransaction||e.msIDBTransaction,o._yy&&(!o._yy.READ_WRITE||!o._yy.READ_ONLY)&&(o._yy={READ_WRITE:"readwrite",READ_ONLY:"readonly"}),o._zz=e.IDBKeyRange||e.webkitIDBKeyRange||e.msIDBKeyRange,o._oo={a:function(){},b:function(){},rr:2097152,c:function(e){return e==="object"||e==="array"?this.d:e==="datetime"?this.h:e==="date"?this.e:e==="time"?this.g:e==="boolean"?this.n:this.o},d:function(e){return JSON.parse(e)},e:function(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2],0,0,0,0)},g:function(e){var t=new Date,n=e.split(":");return t.setHours(n[0]),t.setMinutes(n[1]),t.setSeconds(n[2]),t},h:function(e){var t=e.split(" "),n=t[0].split("-"),r=t[1].split(":");return new Date(n[0],n[1]-1,n[2],r[0],r[1],r[2],0)},n:function(e){return!!e},o:function(e){return e},ww:["batch","destroy"],vv:["del","destroy","empty","get","getAll","getWithLike","getByCallback","getByIndex","getByIndexWithRange","put","set"],p:function(e){var t=this.vv,n=this.a,r,i;for(r=0,i=t.length;r<i;r++)e[t[r]]=n},r:function(e){var t=this.ww,n=this.vv,r,i,s,o=this.a,u,a;for(u=0,a=t.length;u<a;u++)e[t[u]]=o;s=e._a2;for(r in s){i=s[r];for(u=0,a=n.length;u<a;u++)i[n[u]]=o}},s:function(t){t=t.toLowerCase();if(t==="websql"){if(e.openDatabase)return o._a8.c3}else if(t==="indexeddb"&&o._xx)return o._a8.c2;if(e.openDatabase)return o._a8.c3;if(o._xx)return o._a8.c2},t:function(n){var r=n.ORM,i=n.c4,s=n.implementation,u=n.schemaDefinition,a=n.c5,f={},l;if(!r)throw t;return typeof a[1]=="function"?(f.callback=a[1],f.context=a[2]||e):typeof a[1]=="object"&&(f=a[1]),o._b6.prototype=i,l=new o._b6(r,u,f),l._x=o._oo.v,l._w=o._oo.u,l._c1=s,l._e7(),l},u:function(e,n){var r=this._b1,i=this._a9,s=r[e];if(!s)throw t;return s.ii(n,s.hh)},ss:{string:"TEXT",integer:"INTEGER",object:"TEXT",array:"TEXT",date:"DATE",time:"TIME",datetime:"DATETIME","float":"REAL","boolean":"INTEGER"},tt:{string:"",integer:0,object:"{}",array:"[]",date:"0000-00-00",time:"00:00:00",datetime:"0000-00-00 00:00:00","float":0,"boolean":0},uu:{string:"","int":0,integer:0,text:"",object:{},array:[],date:new Date(0,0,0),time:new Date(0,0,0),datetime:new Date(0,0,0),"float":0,"boolean":!1},v:function(e){var n=this._c1,r=o._oo.ss,i=n==="webSQL"?o._oo.tt:o._oo.uu,s=this._a9,u=this._a8._a9,a=this._b1[e],f,l=a.type,c=r[l],h=a.allowNull;if(!c)throw t;f=this._b1[e],f.hh=h?n==="webSQL"?null:null:i[l],f.ii=n==="webSQL"?o._oo.pp.y(l):o._oo.qq.y(l),f.jj=o._oo.c(l),f.kk=l==="date"||l==="time"||l==="datetime",n==="webSQL"&&(f.ll=l,f.mm=c+(h?" NULL":""),f.nn=l==="object"||l==="array")}},o._oo.pp={y:function(e){if(e==="string"||e==="text")return this.z;if(e==="int"||e==="integer"||e==="float")return this.aa;if(e==="object"||e==="array")return this.ee;if(e==="date")return this.bb;if(e==="time")return this.cc;if(e==="datetime")return this.dd;if(e==="boolean")return this.ff},z:function(e,t){return e||t},aa:function(e,t){return e-=0,e?e:t},bb:function(e,t){var n,r;return e instanceof Date&&+e>=0?(n=e.getMonth()+1,r=e.getDate(),e.getFullYear()+"-"+(n<10?"0"+n:n)+"-"+(r<10?"0"+r:r)):(n=/^(\d{4}-\d{2}-\d{2})/.exec(e),n?n[1]:t)},cc:function(e,t){if(e instanceof Date&&+e>=0)return e.toTimeString().substring(0,8);var n=/^(?:\d{4}-\d{2}-\d{2} )?(\d{2}:\d{2})(:\d{2})?$/.exec(e);return n?n[1]+(n[2]||":00"):t},dd:function(e,t){var n,r;return e instanceof Date&&+e>=0?(n=e.getMonth()+1,r=e.getDate(),e.getFullYear()+"-"+(n<10?"0"+n:n)+"-"+(r<10?"0"+r:r)+" "+e.toTimeString().substring(0,8)):(n=/^(\d{4}-\d{2}-\d{2})(?: |T)(\d{2}:\d{2})(?:(:\d{2})[^Z]+Z|(:\d{2}))?$/.exec(e),n?n[1]+" "+n[2]+(n[3]||n[4]||":00"):t)},ee:function(e,t){if(typeof e=="undefined")return t;if(typeof e!="object")return e?typeof e=="string"?"'"+e+"'":e:t;try{return JSON.stringify(e)}catch(n){return t}},ff:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?1:e==="false"||e==="0"?0:t):e===1?1:e===0?0:t},gg:function(e){return e}},o._oo.qq={y:function(e){if(e==="string"||e==="text")return this.z;if(e==="int"||e==="integer"||e==="float")return this.aa;if(e==="object"||e==="array")return this.ee;if(e==="date")return this.bb;if(e==="time")return this.cc;if(e==="datetime")return this.dd;if(e==="boolean")return this.ff},z:function(e,t){return e?e+"":t},aa:function(e,t){return e-=0,e?e:t},bb:function(e,t){var n,r;return e instanceof Date&&!isNaN(e-0)?(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e):(n=/^(\d{4}-\d{2}-\d{2})(?: \d{2}:\d{2}(?::\d{2}))?$/.exec(e),n?(n=n[1].split("-"),new Date(n[0],n[1]-1,n[2],0,0,0,0)):t)},cc:function(e,t){if(e instanceof Date&&!isNaN(e-0))return e;var n=/^(\d{4}-\d{2}-\d{2} )?(\d{2}:\d{2})(:\d{2})?$/.exec(e);if(!n)return t;var r,i,s;return n[1]?(r=n[1].split("-"),r[1]=r[1]-1):(r=new Date,r=[r.getFullYear(),r.getMonth(),r.getDate()]),i=n[2].split(":"),s=n[3]||0,new Date(r[0],r[1],r[2],i[0],i[1],s,0)},dd:function(e,t){var n,r;if(e instanceof Date&&!isNaN(e-0))return e;n=/^(\d{4}-\d{2}-\d{2})(?: |T)(\d{2}:\d{2})(?::(\d{2})[^Z]+Z|:(\d{2}))?$/.exec(e);if(!n)return t;var i,s,o;return i=n[1].split("-"),s=n[2].split(":"),o=n[3]||n[4]||0,new Date(i[0],i[1]-1,i[2],s[0],s[1],o,0)},ee:function(e,t){return typeof e=="undefined"?t:typeof e!="object"?e?typeof e=="string"?"'"+e+"'":e:t:e},ff:function(e,t){return typeof e=="string"?(e=e.toLowerCase(),e==="true"||e==="1"?!0:e==="false"||e==="0"?!1:t):e===1?!0:e===0?!1:t},gg:function(e){return e}},o.ORM=function(n,r,i){typeof n=="string"&&(n={name:n});if(!n.name)throw t;return n.callback=r||o._oo.b,n.context=i||e,o._a8.prototype=o._oo.s(n.prefered||""),new o._a8(n)},o._a8=function(e){var t=this._a9=e.name;this._a1=[],this._a2={},this._a3=[],this.Schema._a8=this,this._a4=!0,this._a5=[],this._a6=e.callback,this._a7=e.context,e.forceDestroy?this._d8(this._d2,this):this._d2()},o._b6=function(n,r,i){var s=n._a9,u=r.name;if(n._a2[u]&&!i.forceDestroy)throw t;var a=r.fields;if(typeof a!="object"||!Object.keys(a).length)throw t;var f=r.primaryKey;if(!f||f&&!a[f])throw t;if(a[f].type!=="integer")throw t;a[f].allowNull=!0;var l,c,h=[],p=[];for(l in a){c=a[l];if(c.index){if(!/^(integer|float|string|date|time|datetime|boolean)$/.test(c.type))throw t;h.push(l),c.index=!0}else c.index=!1;c.unique?(h.indexOf(l)===-1&&(h.push(l),c.index=!0),p.push(l),c.unique=!0):c.unique=!1}n._a2[u]=this,this._a8=n,this._a9=u,this._b1=a,this._b2=h,this._b3=p,this._b4=f,this._b5=Object.keys(a),this._c9=i.forceDestroy,this._d1=this._c9?!1:i.forceEmpty,this._a6=i.callback||o._oo.b,this._a7=i.context||e},o._a8.c2={Schema:function(e){return o._oo.t({ORM:this.constructor._a8,c4:o._b6.c2,schemaDefinition:e,implementation:"indexedDB",c5:arguments})},_m5:{l5:function(e){var t=e.ORM,n=t._o3,r=n._a9;this.ORM=t,this.n3=0,this.n2=!1,this.n4=null,this.n5=null,this.m6=e.m6,this.m7=e.m7,this.m8=e.m8,this.n1=e.n1,e.n6?(this.n8=this.l3,this.n9=s,this.o1=this.l2,this.n7=r):(this.n8=this.l2,this.n9=r,this.o1=this.l3,this.n7=s),this.l4()},l3:function(){return this.ORM._m1()},l2:function(){return this.ORM._k4()},l4:function(){var e=this,t=e.ORM,n=e.n9,r=e.n8();r.onsuccess=function(t){e.n5=this.result;var r=e.n5.transaction([n],o._yy.READ_ONLY),i=r.objectStore(n),s=i.openCursor();s._m9=e,s.onsuccess=e.l6},r.onerror=t._j8},l6:function(e){var t=this._m9,n=t.n5,r=this.result;r?t.n2?(t.n2=!1,n.close(),t.l7(r.value)):t.n3===0?(t.n3++,n.close(),t.l7(r.value)):(t.n2=!0,r.advance(t.n3),t.n3++):(n.close(),t.l9())},l7:function(e){var t=this,n=t.ORM,r=t.n7,i=t.o1();i.onsuccess=function(n){t.n4=this.result;var i=t.n4.transaction([r],o._yy.READ_WRITE),s=i.objectStore(r),u=t.n1(s,e,t.n3);u._m9=t,u.onsuccess=t.l8,u.onerror=t.l8},i.onerror=n._j8},l8:function(e){var t=this._m9;t.n4.close(),t.l4()},l9:function(){this.m6.call(this.m7,this.m8)}},_d2:function(){var e=this,t=this._a9,n=this._m1();n.onupgradeneeded=function(e){var t=this.result,n;n=t.createObjectStore(r,{keyPath:"id",autoIncrement:!0}),n.createIndex(i,i,{unique:!0}),t.createObjectStore(s)},n.onsuccess=function(n){var s=this.result,u=s.transaction([r],o._yy.READ_WRITE),a=u.objectStore(r);a.index(i).get(t).onsuccess=function(n){var r=this.result;if(!r)e._o4=0,a.add({name:t,branch:0,schemas:{}}).onsuccess=function(t){s.close(),e._e7()};else{s.close();var i=r.branch;e._o4=i,e._e7()}}},n.onerror=function(e){this._a6.call(this._a7,null)}},_e7:function(){this._a6.call(this._a7,!0),this._d5()},_d8:function(t,n){var s=this,u=this._a9,a=o._xx.deleteDatabase(u);a.onsuccess=function(f){a=s._m1(),a.onsuccess=function(a){var f=this.result,l=f.transaction([r],o._yy.READ_WRITE),c=l.objectStore(r);c.index(i).get(u).onsuccess=function(r){var i=this.result;c.delete(i.id).onsuccess=function(r){f.close(),o._oo.r(s),t.call(n||e,!0)}}}},a.onerror=function(r){t.call(n||e,!1)}},_d4:function(e){this._a5.push(e),this._a4||this._d5()},_d5:function(){var e=this,t=this._a9,n;this._a5.length?(n=this._m1(),n.onsuccess=function(n){var s=this.result,u=s.transaction([r],o._yy.READ_WRITE),a=u.objectStore(r);a.index(i).get(t).onsuccess=function(t){var n=this.result;e._j6(s,a,n)}},n.onerror=this._j8):this._d6()},_j6:function(e,t,n){var r=this,i=this._a9,s=this._a5.shift(),o=s._a9,u=n.schemas[o],a={fields:s._b1,primaryKey:s._b4};this._o3=s,u?s._c9?this._f6(this._f9):(e.close(),this._f2(u,a)?s._d1?this._f6(this._f9,this):this._f4():s._d1?this._g1():this._k1()):(this._j7(t,n),e.close(),this._f3())},_f2:function(e,t){var n=!1,r=e.fields,i=t.fields,s,o;for(fieldName in r){s=r[fieldName],o=i[fieldName];if(!o||s.type!==o.type||s.index!==o.index||s.unique!==o.unique){n=!0;break}}var u=e.primaryKey,a=t.primaryKey;return!n&&(u&&(!a||u!==a)||!u&&a)&&(n=!0),n},_j7:function(e,t){var n=this._o3,r=n._a9,i=n._b4,s=n._b9;return t.schemas[r]={fields:s,primaryKey:i},req=e.put(t),req},_f3:function(){var e=this,t=this._o3,n=this._a9,r=t._a9,i=this._k3();i.onupgradeneeded=function(t){var n=this.result;e._j9(n)},i.onsuccess=function(t){var n=this.result;n.close(),e._k2(e._k1,e)},i.onerror=this._j8},_f4:function(){var e=this,t=this._m1();t.onsuccess=function(t){var n=this.result,r=n.transaction([s],o._yy.READ_WRITE),i=r.objectStore(s);i.clear().onsuccess=function(t){n.close(),e._f5()}},t.onerror=this._j8},_f5:function(){var e=this,t=this._o3,n=t._a9,r=function(e,t,n){return e.add(t,n)};this._m5.l5({ORM:this,n6:!1,m6:this._f6,m7:this,m8:this._f7,n1:r})},_f6:function(e){var t=this,n=this._o3,r=n._a9,i=this._a9,s=this._k3();s.onupgradeneeded=function(e){var n=this.result;n.deleteObjectStore(r),t._j9(n)},s.onsuccess=function(n){var r=this.result;r.close(),t._k2(e,t)},s.onerror=this._j8},_f7:function(){var e=this,t=this._o3,n=t._a9,r=t._b1,i=function(e,t){var n,i;for(i in t)n=r[i],n?t[i]=n.ii(t[i],n.hh):delete t[i];return e.put(t)};this._m5.l5({ORM:this,n6:!0,m6:this._f8,m7:this,n1:i})},_f8:function(){var e=this,t=this._a9,n;n=this._m1(),n.onsuccess=function(t){var n=this.result,r=n.transaction([s],o._yy.READ_WRITE),i=r.objectStore(s);i.clear().onsuccess=function(t){n.close(),e._f9()}},n.onerror=this._j8},_f9:function(){var e=this,t=this._a9,n=this._o3,s=n._a9,u;u=this._m1(),u.onsuccess=function(n){var s=this.result,u=s.transaction([r],o._yy.READ_WRITE),a=u.objectStore(r);a.index(i).get(t).onsuccess=function(t){var n=this.result,r;r=e._j7(a,n),r.onsuccess=function(t){s.close(),e._g2()}}},u.onerror=this._j8},_g1:function(){var e=this,t=this._a9,n=this._o3,r=n._a9,i;i=this._k4(),i.onsuccess=function(t){var n=this.result,i=n.transaction([r],o._yy.READ_WRITE),s=i.objectStore(r);s.clear().onsuccess=function(t){e._g2()}},i.onerror=this._j8},_g2:function(){this._k1()},_j8:function(){this._k1(!1)},_j9:function(e){var t=this._o3,n=t._b1,r=t._a9,i=t._b4,s,o,u,a;a=e.createObjectStore(r,{keyPath:i,autoIncrement:!0});for(s in n)o=n[s],o.index&&(u=o.unique,a.createIndex(s,s,u?{unique:!0}:{}))},_k1:function(e){var t=this._o3,n=t._a6,r=t._a7;n.call(r,typeof e=="undefined"?!0:e),delete t._a6,delete t._a7,delete t._c9,delete t._d1,delete this._o3,this._d5()},_d6:function(){this._a4=!1},_k2:function(t,n){var s=this,u=this._a9,a=this._o4,f;f=this._m1(),f.onsuccess=function(s){var f=this.result,l=f.transaction([r],o._yy.READ_WRITE),c=l.objectStore(r);c.index(i).get(u).onsuccess=function(r){var i=this.result;i.branch=a,c.put(i),f.close(),t&&t.call(n||e)}}},_k3:function(){var e=this._a9,t=this._o4+1;return this._o4=t,o._xx.open(e,t)},_k4:function(){var e=this._a9,t=this._o4;return o._xx.open(e,t)},_m1:function(){return o._xx.open(n,1)},_k5:function(t){typeof t.c7!="function"&&(t.c7=o._oo.b),t.c8||(t.c8=e),this._a1.push(t);if(this._b8)return;this._b8=!0,this._k6()},_k6:function(){var e=this._a1.shift();e.type==="destroy"?this._g5(e):this._m2(e,this._exec2,this)},_exec2:function(e){var t=e.schema,n=e.type;this["_"+n](e)},_m2:function(e,t,n){var r=e.schema,i=this._k4();i.onsuccess=function(i){var s=this.result,u=e.type,a=s.transaction([r],o._yy.READ_WRITE);objectStore=a.objectStore(r),e.o7=objectStore,e.o8=s,t.call(n,e)}},_e5:function(){this._b8=!1,this._a1.length&&this._k6()},_k7:function(e,t){e.o8.close(),e.c7.call(e.c8,t),this._e5()},_put:function(e){var t=this,n=e.o7,r=e.data,i=0,s=r.length,o=function(n){i===s?t._k7(e,n):(a(),i++)},u=function(){t._k7(e,!1)},a=function(){var e=r[i],t=n.add(e);t.onsuccess=function(e){o(this.result)},t.onerror=function(e){u()}};o()},_set:function(e){var t=this,n=e.o7,r=e.data,i=e.o6,s=e.primaryKey,o=0,u=0,a=r.length,f=function(){u===a?t._k7(e,o):(c(),u++)},l=function(){t._k7(e,!1)},c=function(){var e=r[u],t=e.data,i=e.target,a=i[s],c,h=Object.keys(i).length;a?n.get(a).onsuccess=function(e){var r=this.result,i;if(r){for(c in t)r[c]=t[c];i=n.put(r),i.onsuccess=function(e){this.result&&o++,f()},i.onerror=function(e){l()}}else f()}:n.openCursor().onsuccess=function(e){var n=this.result;if(n){var r=n.value,s=0,u;for(c in i)r[c]===i[c]&&s++;if(s===h){for(c in t)r[c]=t[c];u=n.update(r),u.onsuccess=function(e){this.result&&o++,n.continue()},u.onerror=function(e){l()}}else n.continue()}else f()}};f()},_del:function(e){var t=this,n=e.o7;n.count().onsuccess=function(n){e.o5=this.result,t._m3(e)}},_m3:function(e){var t=this,n=e.data,r=e.primaryKey,i=0,s=n.length,o=function(){i===s?t._m4(e):(u(),i++)},u=function(){var e=n[i];objectStore.delete(e[r]).onsuccess=function(e){o()}};o()},_m4:function(e){var t=this,n=e.o7;n.count().onsuccess=function(n){t._k7(e,e.o5-this.result)}},_empty:function(e){var t=this,n,r=e.o7;r.count().onsuccess=function(i){n=this.result,r.clear().onsuccess=function(r){t._k7(e,n)}}},_g5:function(e){var t=this,n=e.schema,r=this._k3();r.onupgradeneeded=function(e){var t=this.result;t.deleteObjectStore(n)},r.onsuccess=function(n){var r=this.result;r.close(),t._k8(e)}},_k8:function(e){var t=this,n=this._a9,s=e.schema,u=this._a2[s],a=this._m1();a.onsuccess=function(a){var f=this.result,l=f.transaction([r],o._yy.READ_WRITE),c=l.objectStore(r);c.index(i).get(n).onsuccess=function(n){var r=this.result;delete r.schemas[s],c.put(r).onsuccess=function(n){t._k2(function(){e.o8=f,delete t._a2[s],o._oo.p(u),this._k7(e,!0)},t)}}}},batch:function(n,r,i){var s=this._a9,u;if(!(n instanceof Array)||!n.length)throw t;typeof r!="function"&&(r=o._oo.b),typeof i!="object"&&(i=e),u={data:n,c7:r,c8:i};if(this._b7){this._a3.push(u);return}this._b7=!0,this._e6(u)},_e6:function(n){var r=n.data,i=["set","put","del"],s=0,u=r.length,a,f,l,c;for(;s<u;s++){f=r[s],l=f.schema;if(!(l instanceof o._b6))throw t;c=f.type.toLowerCase();if(i.indexOf(c)===-1)throw t;a=l[c](f.data),a.c7=o._oo.b,a.c8=e,this._a1.push(a)}a=this._a1[this._a1.length-1],a.c7=n.c7,a.c8=n.c8,this._b7=!1,this._b8||this._e5()},destroy:function(e,t){typeof e!="function"&&(e=o._oo.a),this._d8(e,t)}},o._b6.c2={_e7:function(){var e=this._a8,t=this._b1,n,r,i={};for(n in t)r=t[n],this._x(n),i[n]={type:r.type,index:r.index,unique:r.unique};this._b9=i,e._d4(this)},get:function(e,n,r){var i=this._a8,s=i._a9,o=this._b1,u,a={},f=this._a9;if(!e)throw t;for(u in o)a[u]=this._w(u,e);var l=function(e,t,n){for(var r in e)if(e[r]===n[r])return!0;return!1};this._k9({callback:l,comparator:a,fields:null},n,r)},getAll:function(e,t){var n=this._a8,r=n._a9,i=this._a9,s=function(){return!0};this._k9({callback:s,comparator:null,fields:null},e,t)},getWithLike:function(e,n,r,i){var s=this._a8,o=s._a9,u=this._b1,a=this._a9,f,l,c,h,p;if(typeof n!="object")throw t;h=Object.keys(n)[0],p=n[h];if(!h||!p)throw t;h==="both"?p=new RegExp(p,"i"):h==="start"?p=new RegExp("^"+p,"i"):h==="end"&&(p=new RegExp(p+"$","i")),e instanceof Array||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw t}var d=function(e,t,n){var r,i=0,s=t.length;for(;i<s;i++){r=t[i];if(n.test(e[r]))return!0}return!1};this._k9({callback:d,comparator:p,fields:e},r,i)},getByCallback:function(e,n,r){var i=this._a8,s=i._a9,o=this._a9;if(typeof e!="function")throw t;this._k9({callback:e,comparator:null,fields:null},n,r)},_k9:function(t,n,r){var i={filterData:t,c7:n||o._oo.b,c8:r||e,self:this};(function(e){var t=e.self,n=t._a8,r=n._k4(),i,s=n._a9,u=t._a9,a=e.filterData,f=a.callback,l=a.comparator,c=a.fields,h=[];r.onsuccess=function(t){var n=this.result,r=n.transaction([u],o._yy.READ_ONLY);objectStore=r.objectStore(u),i=n,objectStore.openCursor().onsuccess=function(t){var n=this.result,r;n?(r=n.value,f(r,c,l)&&h.push(r),n.continue()):(i.close(),e.c7.call(e.c8,h))}}})(i)},getByIndex:function(e,n,r,i){var s=this._a8,u=s._a9,a=this._a9,f={},l=[],c,h,p,d,v;if(this._b4!==e&&this._b2.indexOf(e)===-1)throw t;this._b4===e?f.pk=e:f.index=e;if(!n)throw t;n instanceof Array||(n=[n]);if(n.length===1)f.keyRange=o._zz.only(this._w(e,n[0])),this._l1(f,r,i);else{for(d=0,v=n.length;d<v;d++)h=n[d],p=this._w(e,h),l.push(p);c=function(e,t,n){for(var r=0,i=t.length;r<i;r++)if(t[r]===e[n])return!0;return!1},this._k9({callback:c,comparator:f.pk||f.index,fields:l},r,i)}},getByIndexWithRange:function(e,n,r,i){var s=this._a8,u=s._a9,a=this._a9,f=this._b1,l=/^(?:>|<|>=|<=|=)$/,c,h={},p={},d,v,m=f[e],g,y;if(this._b4!==e&&this._b2.indexOf(e)===-1)throw t;this._b4===e?h.pk=e:h.index=e,g=n["="],g&&m.kk&&(n={">=":g,"<=":g});for(c in n){if(!l.test(c))throw t;g=n[c],y=this._w(e,g);if(!y&&y!==m.hh)throw t;p[c]=y}d=Object.keys(p).length;if(d===2)try{p[">"]&&p["<"]?v=o._zz.bound(p[">"],p["<"],!0,!0):p[">="]&&p["<="]?v=o._zz.bound(p[">="],p["<="]):p[">"]&&p["<="]?v=o._zz.bound(p[">"],p["<="],!0,!1):v=o._zz.bound(p[">="],p["<"],!1,!0)}catch(b){throw t}else d===1&&(p[">"]?v=o._zz.lowerBound(p[">"],!0):p[">="]?v=o._zz.lowerBound(p[">="]):p["<"]?v=o._zz.upperBound(p["<"],!0):p["<="]?v=o._zz.upperBound(p["<="]):v=o._zz.only(p["="]));if(!v)throw t;h.keyRange=v,this._l1(h,r,i)},_l1:function(t,n,r){var i={range:t,c7:n||o._oo.b,c8:r||e,self:this};(function(e){var t=e.self,n=t._a8,r=e.range,i=r.pk,s=r.index,u=r.keyRange,a=n._k4(),f,l=n._a9,c=t._a9,h=[],p=function(t){var n=this.result;n?(h.push(n.value),n.continue()):(f.close(),e.c7.call(e.c8,h))};a.onsuccess=function(e){var t=this.result,n=t.transaction([c],o._yy.READ_ONLY);objectStore=n.objectStore(c),f=t,i?objectStore.openCursor(u).onsuccess=p:objectStore.index(s).openCursor(u).onsuccess=p}})(i)},put:function(e,t,n){var r=this._a8,i=r._a9,s=this._b5,o,u=this._b4,a=this._a9,f,l,c,h,p=s.length,d;!(e instanceof Array)&&typeof e=="object"&&(e=[e]);for(l=0,c=e.length;l<c;l++){f=e[l];for(h=0;h<p;h++)o=s[h],f[o]=this._w(o,f[o]);f[u]<=0&&delete f[u]}d={type:"put",schema:a,primaryKey:u,data:e,c7:t,c8:n};if(r._b7)return d;r._k5(d)},set:function(e,n,r){var i=this._a8,s=this._a9,o=this._b1,u=i._a9,a,f,l,c,h,p,d,v={},m={},g=[],y,b,w;if(!e||typeof e!="object")throw t;e instanceof Array||(e=[e]);for(y=0,b=e.length;y<b;y++){f=e[y];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw t;if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw t}else f.target=[];c=f.target;for(p in c){d=c[p],l=this._w(p,d);if(!l&&l!==o[p].hh)throw t;v[p]=l}h=f.data;for(p in h){d=h[p],l=this._w(p,d);if(!l&&l!==o[p].hh)throw t;m[p]=l}g.push({data:m,target:v}),m={},v={}}w={type:"set",schema:s,o6:this._b2,primaryKey:this._b4,data:g,c7:n,c8:r};if(i._b7)return w;i._k5(w)},del:function(e,n,r){var i=this._a8,s=i._a9,o=this._b4,u=this._a9,a,f,l,c=[],h,p,d;if(!o)throw t;if(!e)throw t;e instanceof Array||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this._w(o,a);if(!f)throw t;l={},l[o]=f,c.push(l)}d={type:"del",schema:u,primaryKey:o,data:c,c7:n,c8:r};if(i._b7)return d;i._k5(d)},destroy:function(e,t){var n=this._a8,r=n._a9,i=this._a9;n._k5({type:"destroy",schema:i,c7:e,c8:t})},empty:function(e,t){var n=this._a8,r=n._a9,i=this._a9;n._k5({type:"empty",schema:i,c7:e,c8:t})}},o._a8.c3={Schema:function(e){return o._oo.t({ORM:this.constructor._a8,c4:o._b6.c3,schemaDefinition:e,implementation:"webSQL",c5:arguments})},_d2:function(){(function(t){t._h1=e.openDatabase(n,1,"",o._oo.rr),t._h1.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS databases( id INTEGER PRIMARY KEY, name TEXT UNIQUE, schemas TEXT )"),e.executeSql('SELECT * FROM databases WHERE name = "'+t._a9+'"',[],function(e,n){t._d3(n)})})})(this)},_d3:function(t){var n=t.rows;this._h2=n.length?JSON.parse(n.item(0).schemas):{},this._h3=[],this._h4=e.openDatabase(this._a9,1,"",o._oo.rr),this._a6.call(this.initContext,!0),this._d5()},_d4:function(e){this._a5.push(e),this._a4||(this._a4=!0,this._d5())},_d5:function(){var e=this,t=this._a9;this._a5.length?this._a5.shift()._e8():this._d6()},_d6:function(){this._a4=!1},_d7:function(e,t,n){var r=this,i=this._a9,s=this._h2;this._h1.transaction(function(r){r.executeSql('REPLACE INTO databases( name, schemas ) VALUES( "'+i+'", '+"'"+JSON.stringify(s)+"'"+")",[],function(){e.call(t,n)})})},_d8:function(e,t){this.destroy(e,t)},_d9:function(e,t){var n=e._a9;delete this._a2[n],delete this._h2[n],o._oo.p(e),this._d7(t.c7,t.c8,!0)},_e1:function(e){},_e2:function(n){var r=n.c7,i=n.c8;if(r&&typeof r!="function")throw t;r||(n.c7=o._oo.b);if(i&&typeof i!="object")throw t;i||(n.c8=e);if(this._b8){n.i9?this._h3.push(n):this._a1.push(n);return}this._b8=!0,this._e3(n)},_e3:function(e){this._h5=e;var t=this,n=0,r=e.h6;r instanceof Array||(r=[r]);var i=e.h8?function(e,t){n+=t.rowsAffected}:o._oo.a,s=function(r,i){e.h8?e.j3=i.rowsAffected+n:e.i1?e.j3=i.insertId:e.h9&&(e.j3=i.rowsAffected),t._e4(i)},u=function(e){t._e1(e),t._e4(!1)};this._h4.transaction(function(t){var n,o=r.length;while(o--)n=r.shift(),t.executeSql(n,e.h7?e.h7.shift():[],o?i:s)},u)},_e4:function(e){queryData=this._h5,this._b8=!1,e||(queryData.j3=!1),queryData.j1?queryData.j1.call(queryData.j2,e,queryData):queryData.c7.call(queryData.c8,queryData.j3),this._e5()},_e5:function(){this._b8||(this._h3.length?this._e2(this._h3.shift()):this._a1.length&&!this._a4&&this._e2(this._a1.shift()))},batch:function(n,r,i){var s=this._a9,u;if(!(n instanceof Array)||!n.length)throw t;typeof r!="function"&&(r=o._oo.b),typeof i!="object"&&(i=e),u={data:n,callback:r,context:i};if(this._b7){this._a3.push(u);return}this._b7=!0,this._e6(u)},_e6:function(e){var n=e.data,r=["set","put","del"],i,s,u,a=0,f=n.length;for(;a<f;a++){i=n[a],s=i.schema;if(!(s instanceof o._b6))throw t;u=i.type.toLowerCase();if(r.indexOf(u)===-1)throw t;this._a1.push(s[u](i.data))}var l=this._a1[this._a1.length-1];l.c7=e.callback,l.c8=e.context,this._b7=!1,this._e5(),this._a3.length&&this._e6(this._a3.shift())},destroy:function(t,n){(t||o._oo.a).call(n||e,!1)}},o._b6.c3={_e7:function(){var e=this._b1,t,n,r=this._a8,i=r._a9,s=this._a9,o=[],u=this._b4,a,f={},l,c,h={};for(n in e)t=e[n],a=[],u===n?a.push("PRIMARY KEY"):(l=t.index,c=t.unique,l&&c?f[n]=!0:l&&(f[n]=!1)),this._x(n),h[n]={type:t.type,index:t.index,unique:t.unique},o.push(n+" "+e[n].mm+(a.length?" "+a.join(" "):""));this._i2='CREATE TABLE "'+s+'" ( '+o.join(", ")+" )",this._b9=h,this._j5=f,this._i4=[],r._d4(this)},_e8:function(){var e=this._a8,t=e._a9,n=this._a9,r=this._i2,i,s,o;this._c9?(i="DROP TABLE IF EXISTS "+n,e._e2({h6:[i,r],j2:this,j1:this._f5,i9:!0})):(o={fields:this._b9,primaryKey:this._b4},s=e._h2[n],s?this._f2(s,o):(e._h2[n]=o,this._a8._d7(this._f3,this)))},_e9:function(e,t,n){return"CREATE UNIQUE INDEX "+this._g9(e,t)+" ON "+(n||e)+" ( "+t+" )"},_f1:function(e,t,n){return"CREATE INDEX "+this._g9(e,t)+" ON "+(n||e)+" ( "+t+" )"},_g9:function(e,t){return e+"_"+t},_f2:function(e,t){var n=this._a8,r=n._a9,i=this._a9,s=!1,o=e.fields,u=t.fields,a,f,l;for(l in o){a=o[l],f=u[l];if(!f||a.type!==f.type||a.unique!==f.unique){s=!0;break}}var c=e.primaryKey,h=t.primaryKey;!s&&(c&&(!h||c!==h)||!c&&h)&&(s=!0);if(s)n._h2[i]=t,this._a8._d7(this._f4,this);else{var p=[],d=this._b2,v=this._j5;for(l in o)a=o[l],a.index&&(d.indexOf(l)===-1?p.push(l):delete v[l]);p.length||Object.keys(v).length?(this._i4=p,n._h2[i]=t,this._a8._d7(this._g8,this)):this._d1?this._g7():this._g6()}},_f3:function(){var e=this._a8,t=this._a9,n=e._a9,r=this._i2;e._e2({h6:r,j2:this,j1:this._g2,i9:!0})},_f4:function(){var e=this._a8,t=this._i2,n=this._a9,r=n+ +(new Date),i=t.replace('CREATE TABLE "'+n+'"','CREATE TABLE "'+r+'"');this._i5=0,this._i6=r,e._e2({h6:i,j2:this,j1:this._f5,i9:!0})},_f5:function(){var e=this._a8,t=e._a9,n=this._a9,r=this._i6,i=[],s=this._j5;for(fieldName in s)i.push("DROP INDEX IF EXISTS "+this._g9(n,fieldName)),s[fieldName]?i.push(this._e9(n,fieldName,r)):i.push(this._f1(n,fieldName,r));i.length?e._e2({h6:i,j2:this,j1:this._f6,i9:!0}):this._f6()},_f6:function(){var e=this._a8,t=this._a9,n=this._i6,r=this._i5,i;this._d1?(this._j4=!0,this._g6()):this._c9?this._g2():this._f7()},_f7:function(){var e=this._a8,t=this._a9,n=this._i6,r="SELECT * FROM "+t+" LIMIT "+this._i5+", 500";e._e2({h6:r,j2:this,j1:this._f8,i9:!0})},_f8:function(e){var t=this._a8,n=this._b1,r=this._a9,i=this._i6,s=e.rows,o,u,a,f=[],l,c=[],h=[],p=[],d=[],v,m,g,y;if(!s.length)this._f9();else{o=s.item(0);for(u in o)n[u]&&f.push(u);for(u in n)a=n[u],f.indexOf(u)===-1&&(f.push(u),h.push(a.hh),c.push("?"));for(m=0,g=s.length;m<g;m++){v=[],l=[],o=s.item(m);for(u in o)a=n[u],a&&(l.push("?"),a.nn?v.push(o[u]):v.push(a.ii(o[u],a.hh)));p.push("INSERT INTO "+i+" ( "+f.join(", ")+" ) VALUES ( "+l.concat(c).join(", ")+" )"),d.push(v.concat(h))}y={h6:p,h7:d,j2:this,i9:!0},g===500?(this._i5+=500,y.j1=this._f7):y.j1=this._f9,t._e2(y)}},_f9:function(){var e=this._a8,t=this._a9,n="DROP TABLE "+t,r=this._i6,i="ALTER TABLE "+r+" RENAME TO "+t;e._e2({h6:[n,i],j2:this,j1:this._g1,i9:!0})},_g1:function(){var e=this._a8;this._g2()},_g2:function(){var e=this._a8;this._d1&&!this._j4?this._g7():this._g6()},_g6:function(){delete this._i2,delete this._j5,delete this._j4,delete this._i6,delete this._i5,delete this._i4,delete this._c9,delete this._d1,this._a6.call(this._a7,!0),delete this._a6,delete this._a7,this._a8._d5()},_g7:function(){var e=this._a8,t=e._a9,n=this._a9,r="DELETE FROM "+n;e._e2({h6:[r],j2:this,j1:this._g6,i9:!0})},_g8:function(){var e=this._a8,t=this._a9,n=[],r=this._i4,i,s=this._j5;while(r.length)n.push("DROP INDEX "+this._g9(t,r.shift()));for(i in s)s[i]?n.push(this._e9(t,i)):n.push(this._f1(t,i));e._e2({h6:n,j2:this,j1:this._g2,i9:!0})},get:function(e,n,r){var i=this._a8,s=this._b1,o,u=i._a9,a=this._a9,f,l=[],c=[];if(!e)throw t;for(o in s)l.push(o+" = ?"),c.push(this._w(o,e));f="SELECT * FROM "+a+" WHERE "+l.join(" OR "),i._e2({h6:f,h7:[c],j1:this._g4,j2:this,c7:n,c8:r})},getByCallback:function(e,n,r){var i=this._a8,s=this._b1,o,u=this._a9,a;if(typeof e!="function")throw t;a="SELECT * FROM "+u,i._e2({h6:a,j2:this,j1:this._g3,c7:n,c8:r,c6:e})},_g3:function(e,t){var n=this._b1,r=e.rows,i=0,s=r.length,o,u,a=t.c6,f,l=[];for(;i<s;i++){o=r.item(i),f={};for(u in o)f[u]=n[u].jj(o[u]);a(f)&&l.push(f)}t.c7.call(t.c8,l)},getByIndex:function(e,n,r,i){var s=this._a8,o=s._a9,u=this._a9,a,f=[],l=[],c,h,p,d;if(this._b4!==e&&this._b2.indexOf(e)===-1)throw t;if(!n)throw t;n instanceof Array||(n=[n]);for(p=0,d=n.length;p<d;p++)c=n[p],h=this._w(e,c),f.push(e+" = ?"),l.push(h);a="SELECT * FROM "+u+(f.length?" WHERE "+f.join(" OR "):""),s._e2({h6:a,h7:[l],j2:this,j1:this._g4,c7:r,c8:i})},getByIndexWithRange:function(e,n,r,i){var s=this._a8,o=s._a9,u=this._a9,a=this._b1,f=/^(?:>|<|>=|<=|=)$/,l,c=[],h,p,d=[],v;if(this._b4!==e&&this._b2.indexOf(e)===-1)throw t;for(l in n){if(!f.test(l))throw t;h=n[l],p=this._w(e,h);if(!p&&p!==a[e].hh)throw t;c.push(e+" "+l+" ?"),d.push(p)}if(!c.length)throw t;v="SELECT * FROM "+u+" WHERE "+c.join(" AND "),s._e2({h6:v,h7:[d],j2:this,j1:this._g4,c7:r,c8:i})},getAll:function(e,t){var n=this._a8,r=this._a9,i="SELECT * FROM "+r;n._e2({h6:i,j2:this,j1:this._g4,c7:e,c8:t})},getWithLike:function(e,n,r,i){var s=this._a8,o=s._a9,u=this._b1,a=this._a9,f,l,c,h,p,d=[],v,m=[];if(typeof n!="object")throw t;h=Object.keys(n)[0],p=n[h];if(!h||!p)throw t;h==="both"?p="%"+p+"%":h==="start"?p+="%":h==="end"&&(p="%"+p),e instanceof Array||(e=[e]);for(f=0,l=e.length;f<l;f++){c=e[f];if(!u[c])throw t;m.push(c+" LIKE ?"),d.push(p)}v="SELECT * FROM "+a+" WHERE "+m.join(" OR "),s._e2({h6:v,h7:[d],j2:this,j1:this._g4,c7:r,c8:i})},_g4:function(e,t){var n=this._b1,r=e.rows,i=0,s=r.length,o,u,a,f=[];for(;i<s;i++){o=r.item(i),a={};for(u in o)a[u]=n[u].jj(o[u]);f.push(a)}t.c7.call(t.c8,f)},put:function(e,t,n){var r=this._a8,i=r._a9,s=this._b5,o,u=this._a9,a,f=[],l,c,h=[],p,d,v,m,g=s.length,y;!(e instanceof Array)&&typeof e=="object"&&(e=[e]);for(d=0,v=e.length;d<v;d++){p=e[d],a=[],l=[],c=[];for(m=0;m<g;m++)o=s[m],a.push(o),l.push(this._w(o,p[o])),c.push("?");f.push(l),h.push("INSERT OR ROLLBACK INTO "+u+" ( "+a.join(", ")+" ) "+"VALUES ( "+c.join(" , ")+" )")}y={h6:h,h7:f,c7:t,c8:n,i1:!0};if(r._b7)return y;r._e2(y)},set:function(e,n,r){var i=this._a8,s=this._a9,o=i._a9,u=this._b1,a,f,l,c,h,p,d,v,m,g=[],y,b=[],w,S,x;if(!e||typeof e!="object")throw t;e instanceof Array||(e=[e]);for(w=0,S=e.length;w<S;w++){f=e[w],y=[],m=[],v=[];if(!f.data||typeof f.data!="object"||!Object.keys(f.data).length)throw t;if(f.target){if(typeof f.target!="object"||!Object.keys(f.target).length)throw t}else f.target=[];h=f.data;for(p in h){d=h[p],l=this._w(p,d);if(!l&&l!==u[p].hh)throw t;m.push(p+" = ?"),y.push(l)}c=f.target;for(p in c){d=c[p],l=this._w(p,d);if(!l&&l!==u[p].hh)throw t;v.push(p+" = ?"),y.push(l)}b.push("UPDATE OR ROLLBACK "+s+" SET "+m.join(", ")+(v.length?" WHERE "+v.join(" AND "):"")),g.push(y)}x={h6:b,h7:g,h8:!0,c7:n,c8:r};if(i._b7)return x;i._e2(x)},del:function(e,n,r){var i=this._a8,s=i._a9,o=this._b4,u=this._a9,a,f,l,c=[],h,p,d;if(!o)throw t;if(!e)throw t;e instanceof Array||(e=[e]);for(h=0,p=e.length;h<p;h++){a=e[h],f=this._w(o,a);if(!f)throw t;c.push(o+" = "+f)}l="DELETE FROM "+u+(c.length?" WHERE "+c.join(" OR "):""),d={h6:l,h9:!0,c7:n,c8:r};if(i._b7)return d;i._e2(d)},destroy:function(e,t){var n=this._a8,r=this._a9,i="DROP TABLE "+r;n._e2({j1:this._g5,j2:this,h6:i,c7:e,c8:t})},_g5:function(e,t){var n=this._a8;e&&n._d9(this,t)},empty:function(e,t){var n=this._a8,r=this._a9,i="DELETE FROM "+r;n._e2({h6:i,h9:!0,c7:e,c8:t})}},e.MSQTA=o})(window);