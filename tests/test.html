<html>
	<head>
		<meta charset="utf-8">
		<title>MSQTA.ORM - Test</title>
		<script src="../release/msqta.orm-1.0.0.js"></script>
		<script src="http://code.jquery.com/qunit/qunit-git.js"></script>
		<link href="http://code.jquery.com/qunit/qunit-git.css" rel="stylesheet">
	</head>
	<body>
		<div id="qunit"></div>
		<div id="qunit-fixture"></div>
		<script>
			var db, schema;
			var tests = [], i = 0;
			
			next = function() {
				if( tests[i] ) {
					tests[i]();
					i++;
				}
			};
		</script>
		<script>
		tests.push( function() {
			asyncTest( 'Creating a database', 1, function() {
				db = MSQTA.ORM( 'test.db', function( statusCode ) {
					equal( statusCode, true );
					start();
					
					next();
				} );
			} );
		} );
		</script>
		<script>
		tests.push( function() {
			asyncTest( 'Dropping a database', 1, function() {
				db.destroy( function( statusCode ) {
					equal( statusCode, true );
					start();
					
					next();
				} );
			} );
		} );
		</script>
		<script>
		tests.push( function() {
			asyncTest( 'Creating a database again', 1, function() {
				db = MSQTA.ORM( 'test.db', function( statusCode ) {
					equal( statusCode, true );
					start();
					
					next();
				} );
			} );
		} );
		</script>
		<script>
		tests.push( function() {
			asyncTest( 'Creating an schema', 1, function() {
				schema = new db.Schema( {
					name: 'clients',
					fields: {
						id: { type: 'integer' },
						name: { type: 'string', index: true, unique: true },
						age: { type: 'integer', index: true },
						date: { type: 'object' }
					},
					primaryKey: 'id'
				}, function( statusCode ) {
					equal( statusCode, true );
					start();
					
					next();
				} );
			} );
		} );
		</script>
		<script>
			next();
		</script>
	</body>
</html>